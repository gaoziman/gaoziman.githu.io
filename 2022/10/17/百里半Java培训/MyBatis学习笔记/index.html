<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>MyBatiså­¦ä¹ ç¬”è®° | çˆ±ç¬‘çš„Gaoçš„ä¸ªäººåšå®¢</title><meta name="keywords" content="ç™¾é‡ŒåŠJavaåŸ¹è®­,å¼€å‘å¿…å¤‡æ¡†æ¶"><meta name="author" content="Gao"><meta name="copyright" content="Gao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="MyBatiså­¦ä¹ ç¬”è®° ğŸ ä¸ªäººä¸»é¡µï¼šä¸ä¼šå†™ä»£ç çš„æ»¡æ»¡ğŸ§‘ä¸ªäººç®€ä»‹ï¼šå¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ»¡æ»¡ï¼Œä¸€ä¸ªæƒ³è¦ä¸å¤§å®¶å…±åŒè¿›æ­¥çš„ç”·äººğŸ˜‰ğŸ˜‰ç›®å‰çŠ¶å†µğŸ‰ï¼šå¼€å­¦å³å°†å¤§ä¸‰ï¼Œç›®æ ‡å°±æ˜¯åŠå¹´å†…æ‰¾åˆ°ä¸€ä»½å®ä¹ å·¥ä½œğŸ‘ğŸ‘ğŸ’•æ¬¢è¿å¤§å®¶ï¼šè¿™é‡Œæ˜¯CSDNï¼Œæˆ‘æ€»ç»“çŸ¥è¯†çš„åœ°æ–¹ï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ï¼Œæˆ‘äº²çˆ±çš„å¤§ä½¬ğŸ˜˜  æ­£æ–‡å¼€å§‹  â€”â€”â€”â€”â€”  ç¬¬ä¸€ç«  æ¡†æ¶æ¦‚è¿°1.1 æ¡†æ¶â—åœ¨â½‚çŒ®ä¸­çœ‹åˆ°çš„frameworkè¢«ç¿»è¯‘ä¸ºæ¡†æ¶ â— Javaå¸¸â½¤æ¡†æ¶ï¼š">
<meta property="og:type" content="article">
<meta property="og:title" content="MyBatiså­¦ä¹ ç¬”è®°">
<meta property="og:url" content="https://manamn.space/2022/10/17/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/MyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="çˆ±ç¬‘çš„Gaoçš„ä¸ªäººåšå®¢">
<meta property="og:description" content="MyBatiså­¦ä¹ ç¬”è®° ğŸ ä¸ªäººä¸»é¡µï¼šä¸ä¼šå†™ä»£ç çš„æ»¡æ»¡ğŸ§‘ä¸ªäººç®€ä»‹ï¼šå¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ»¡æ»¡ï¼Œä¸€ä¸ªæƒ³è¦ä¸å¤§å®¶å…±åŒè¿›æ­¥çš„ç”·äººğŸ˜‰ğŸ˜‰ç›®å‰çŠ¶å†µğŸ‰ï¼šå¼€å­¦å³å°†å¤§ä¸‰ï¼Œç›®æ ‡å°±æ˜¯åŠå¹´å†…æ‰¾åˆ°ä¸€ä»½å®ä¹ å·¥ä½œğŸ‘ğŸ‘ğŸ’•æ¬¢è¿å¤§å®¶ï¼šè¿™é‡Œæ˜¯CSDNï¼Œæˆ‘æ€»ç»“çŸ¥è¯†çš„åœ°æ–¹ï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ï¼Œæˆ‘äº²çˆ±çš„å¤§ä½¬ğŸ˜˜  æ­£æ–‡å¼€å§‹  â€”â€”â€”â€”â€”  ç¬¬ä¸€ç«  æ¡†æ¶æ¦‚è¿°1.1 æ¡†æ¶â—åœ¨â½‚çŒ®ä¸­çœ‹åˆ°çš„frameworkè¢«ç¿»è¯‘ä¸ºæ¡†æ¶ â— Javaå¸¸â½¤æ¡†æ¶ï¼š">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.leonus.cn/cover/171111-16429290715c39.webp">
<meta property="article:published_time" content="2022-10-17T04:46:33.000Z">
<meta property="article:modified_time" content="2022-10-17T05:00:11.333Z">
<meta property="article:author" content="Gao">
<meta property="article:tag" content="ç™¾é‡ŒåŠJavaåŸ¹è®­">
<meta property="article:tag" content="å¼€å‘å¿…å¤‡æ¡†æ¶">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.leonus.cn/cover/171111-16429290715c39.webp"><link rel="shortcut icon" href="https://yzf.qq.com/fsna/kf-file/kf_pic/20221016/KFPIC_38088722014365ca6_WXIMAGE_d75c047ed85544ddaded8bf8eafb054c.jpg?"><link rel="canonical" href="https://manamn.space/2022/10/17/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/MyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'MyBatiså­¦ä¹ ç¬”è®°',
  isPost: true,
  isHome: false,
  isHighlightShrink: true,
  isToc: true,
  postUpdate: '2022-10-17 13:00:11'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><script data-pjax src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><link rel="stylesheet" href="/js/title.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Jayhrn/fontawesome-pro/css/all.min.css"><link rel="stylesheet" href="https://npm.elemecdn.com/remixicon@2.5.0/fonts/remixicon.css"><script src="https://at.alicdn.com/t/c/font_3570527_dthoqrrv2tv.css"></script><script src="https://at.alicdn.com/t/c/font_3570527_dthoqrrv2tv.css"></script><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css" /><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/css/runtime/runtime.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-swiper-anzhiyu@1.0.4/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-swiper-anzhiyu@1.0.4/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="çˆ±ç¬‘çš„Gaoçš„ä¸ªäººåšå®¢" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://yzf.qq.com/fsna/kf-file/kf_pic/20221016/KFPIC_38088722014365ca6_WXIMAGE_d75c047ed85544ddaded8bf8eafb054c.jpg?" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">147</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">38</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">26</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="fa-fw fas fa-home faa-tada"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><i class="fa-fw fas fa-archive faa-tada"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/music/"><i class="fa-fw fas fa-music faa-tada"></i><span> éŸ³ä¹é¦†</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/categories/"><i class="fa-fw fas fa-folder-open faa-tada"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/comments/"><i class="fa-fw fas fa-envelope faa-tada"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/link/"><i class="fa-fw fas fa-link faa-tada"></i><span> å‹äººå¸</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/photos"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#iconfont icon-xiangji1"></use></svg><span> ç…§ç‰‡å¢™</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-zhifeiji"></use></svg><span> å…³äºæˆ‘</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.leonus.cn/cover/171111-16429290715c39.webp')"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" title="è¿”å›åšå®¢ä¸»é¡µ"><span>JAYHRN</span></a></span><span id="page_name"><a id="page-name-text" title="å›åˆ°é¡¶éƒ¨" onclick="btf.scrollToDest(0,500)"><span>çˆ±ç¬‘çš„Gaoçš„ä¸ªäººåšå®¢</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="fa-fw fas fa-home faa-tada"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><i class="fa-fw fas fa-archive faa-tada"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/music/"><i class="fa-fw fas fa-music faa-tada"></i><span> éŸ³ä¹é¦†</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/categories/"><i class="fa-fw fas fa-folder-open faa-tada"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/comments/"><i class="fa-fw fas fa-envelope faa-tada"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/link/"><i class="fa-fw fas fa-link faa-tada"></i><span> å‹äººå¸</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/photos"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#iconfont icon-xiangji1"></use></svg><span> ç…§ç‰‡å¢™</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-zhifeiji"></use></svg><span> å…³äºæˆ‘</span></a></div></div></div><div id="hotkey"><div id="search-button"><a class="site-page social-icon search" title="æœç´¢"><i class="ri-search-eye-line"></i></a></div><div id="randompost-button"><a class="site-page" title="éšæœºæ–‡ç« " onclick="toRandomPost()"><i class="ri-subway-fill"></i></a></div><div id="mode-button"><a class="site-page" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢" onclick="switchDarkMode()"><i class="ri-sun-fill"></i></a></div><div id="top-button"><a class="site-page" title="å›åˆ°é¡¶éƒ¨" onclick="btf.scrollToDest(0,500)"><i class="ri-plane-fill"></i></a></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav><div id="post-info"><h1 class="post-title">MyBatiså­¦ä¹ ç¬”è®°</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2022-10-17T04:46:33.000Z" title="å‘è¡¨äº 2022-10-17 12:46:33">2022-10-17</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2022-10-17T05:00:11.333Z" title="æ›´æ–°äº 2022-10-17 13:00:11">2022-10-17</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BC%80%E5%8F%91%E5%BF%85%E5%A4%87%E6%A1%86%E6%9E%B6/">å¼€å‘å¿…å¤‡æ¡†æ¶</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">24.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>114åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="MyBatiså­¦ä¹ ç¬”è®°"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="MyBatiså­¦ä¹ ç¬”è®°"><a href="#MyBatiså­¦ä¹ ç¬”è®°" class="headerlink" title="MyBatiså­¦ä¹ ç¬”è®°"></a>MyBatiså­¦ä¹ ç¬”è®°</h1><blockquote>
<p>ğŸ ä¸ªäººä¸»é¡µï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_58608526?spm=1019.2139.3001.5343">ä¸ä¼šå†™ä»£ç çš„æ»¡æ»¡</a><br>ğŸ§‘ä¸ªäººç®€ä»‹ï¼šå¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ»¡æ»¡ï¼Œä¸€ä¸ªæƒ³è¦ä¸å¤§å®¶å…±åŒè¿›æ­¥çš„ç”·äººğŸ˜‰ğŸ˜‰<br>ç›®å‰çŠ¶å†µğŸ‰ï¼šå¼€å­¦å³å°†å¤§ä¸‰ï¼Œç›®æ ‡å°±æ˜¯åŠå¹´å†…æ‰¾åˆ°ä¸€ä»½å®ä¹ å·¥ä½œğŸ‘ğŸ‘<br>ğŸ’•æ¬¢è¿å¤§å®¶ï¼šè¿™é‡Œæ˜¯CSDNï¼Œæˆ‘æ€»ç»“çŸ¥è¯†çš„åœ°æ–¹ï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ï¼Œæˆ‘äº²çˆ±çš„å¤§ä½¬ğŸ˜˜</p>
</blockquote>
<p><strong>æ­£æ–‡å¼€å§‹</strong>  â€”â€”â€”â€”â€”</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/Mybatis.png" alt=""></p>
<h2 id="ç¬¬ä¸€ç« -æ¡†æ¶æ¦‚è¿°"><a href="#ç¬¬ä¸€ç« -æ¡†æ¶æ¦‚è¿°" class="headerlink" title="ç¬¬ä¸€ç«  æ¡†æ¶æ¦‚è¿°"></a>ç¬¬ä¸€ç«  æ¡†æ¶æ¦‚è¿°</h2><h3 id="1-1-æ¡†æ¶"><a href="#1-1-æ¡†æ¶" class="headerlink" title="1.1 æ¡†æ¶"></a>1.1 æ¡†æ¶</h3><p>â—åœ¨â½‚çŒ®ä¸­çœ‹åˆ°çš„frameworkè¢«ç¿»è¯‘ä¸ºæ¡†æ¶</p>
<p>â— Javaå¸¸â½¤æ¡†æ¶ï¼š </p>
<p>â—‹ SSMä¸‰â¼¤æ¡†æ¶ï¼šSpring + SpringMVC + MyBatis </p>
<p>â—‹ SpringBoot </p>
<p>â—‹ SpringCloud </p>
<p>â—‹ ç­‰ã€‚ã€‚</p>
<p>â— æ¡†æ¶å…¶å®å°±æ˜¯å¯¹é€šâ½¤ä»£ç çš„å°è£…ï¼Œæå‰å†™å¥½äº†â¼€å †æ¥â¼å’Œç±»ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åšé¡¹â½¬çš„æ—¶å€™ç›´æ¥å¼•â¼Šè¿™äº› </p>
<p>æ¥â¼å’Œç±»ï¼ˆå¼•â¼Šæ¡†æ¶ï¼‰ï¼ŒåŸºäºè¿™äº›ç°æœ‰çš„æ¥â¼å’Œç±»è¿›â¾å¼€å‘ï¼Œå¯ä»¥â¼¤â¼¤æâ¾¼å¼€å‘æ•ˆç‡ã€‚ </p>
<p>â— æ¡†æ¶â¼€èˆ¬éƒ½ä»¥jaråŒ…çš„å½¢å¼å­˜åœ¨ã€‚(jaråŒ…ä¸­æœ‰classâ½‚ä»¶ä»¥åŠå„ç§é…ç½®â½‚ä»¶ç­‰ã€‚) </p>
<p>â— SSMä¸‰â¼¤æ¡†æ¶çš„å­¦ä¹ é¡ºåºï¼š </p>
<p>â—‹ â½…å¼â¼€ï¼šMyBatisã€Springã€SpringMVCï¼ˆå»ºè®®ï¼‰ </p>
<p>â—‹ â½…å¼â¼†ï¼šSpringã€MyBatisã€SpringMVC</p>
<h3 id="è½¯ä»¶å¼€å‘å¸¸ç”¨ç»“æ„"><a href="#è½¯ä»¶å¼€å‘å¸¸ç”¨ç»“æ„" class="headerlink" title="è½¯ä»¶å¼€å‘å¸¸ç”¨ç»“æ„"></a>è½¯ä»¶å¼€å‘å¸¸ç”¨ç»“æ„</h3><h4 id="ä¸‰å±‚æ¶æ„"><a href="#ä¸‰å±‚æ¶æ„" class="headerlink" title="ä¸‰å±‚æ¶æ„"></a>ä¸‰å±‚æ¶æ„</h4><p>ä¸‰å±‚æ¶æ„åŒ…å«çš„ä¸‰å±‚ï¼š</p>
<p>ç•Œé¢å±‚ï¼ˆUser Interface layerï¼‰ã€ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆBusiness Logic Layerï¼‰ã€æ•°æ®è®¿é—®å±‚ï¼ˆData access layerï¼‰</p>
<p>ä¸‰å±‚çš„èŒè´£</p>
<ol>
<li>ç•Œé¢å±‚ï¼ˆè¡¨ç¤ºå±‚ï¼Œè§†å›¾å±‚ï¼‰  : <strong>ä¸»è¦åŠŸèƒ½æ˜¯æ¥å—ç”¨æˆ·çš„æ•°æ®ï¼Œæ˜¾ç¤ºè¯·æ±‚çš„å¤„ç†ç»“æœã€‚ä½¿ç”¨ web é¡µé¢å’Œç”¨æˆ·äº¤äº’ï¼Œæ‰‹æœº app ä¹Ÿå°±æ˜¯è¡¨ç¤ºå±‚çš„ï¼Œç”¨æˆ·åœ¨ app ä¸­æ“ä½œï¼Œä¸šåŠ¡é€»è¾‘åœ¨æœåŠ¡å™¨ç«¯å¤„ç†ã€‚</strong></li>
<li>ä¸šåŠ¡é€»è¾‘å±‚ï¼š<strong>æ¥æ”¶è¡¨ç¤ºä¼ é€’è¿‡æ¥çš„æ•°æ®ï¼Œæ£€æŸ¥æ•°æ®ï¼Œè®¡ç®—ä¸šåŠ¡é€»è¾‘ï¼Œè°ƒç”¨æ•°æ®è®¿é—®å±‚è·å–æ•°æ®ã€‚</strong></li>
<li>æ•°æ®è®¿é—®å±‚ï¼š<strong>ä¸æ•°æ®åº“æ‰“äº¤é“ã€‚ä¸»è¦å®ç°å¯¹æ•°æ®çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥ã€‚å°†å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„æ•°æ®æäº¤ç»™ä¸šåŠ¡å±‚ï¼ŒåŒæ—¶å°†ä¸šåŠ¡å±‚å¤„ç†çš„æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“.</strong></li>
</ol>
<p><code>ä¸‰å±‚çš„å¤„ç†è¯·æ±‚çš„äº¤äº’ï¼š</code></p>
<blockquote>
<p>å®¢æˆ·ç«¯&lt;â€”-&gt;ç•Œé¢å±‚&lt;â€”-&gt;ä¸šåŠ¡é€»è¾‘å±‚&lt;â€”-&gt;æ•°æ®è®¿é—®å±‚&lt;â€”-&gt;æ•°æ®åº“ã€‚</p>
</blockquote>
<p>å¦‚å›¾ ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/Snipaste_2022-09-16_23-03-15.png" style="zoom:80%;" /></p>
<blockquote>
<p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ä¸‰å±‚æ¶æ„ ï¼Ÿ</p>
<p>1ã€ ç»“æ„æ¸…æ™°ã€è€¦åˆåº¦ä½ã€å„å±‚åˆ†å·¥æ˜ç¡®ã€</p>
<p>2ã€ å¯ç»´æŠ¤åº¦é«˜ï¼Œå¯æ‰©å±•æ€§é«˜ã€‚</p>
<p>3ã€æœ‰åˆ©ç”¨æ ‡å‡†åŒ–ã€‚</p>
<p>4ã€ å¼€å‘äººå‘˜å¯ä»¥åªå…³æ³¨æ•´ä¸ªç»“æ„ä¸­çš„å…¶ä¸­æŸä¸€å±‚çš„åŠŸèƒ½å®ç°</p>
<p>5ã€æœ‰åˆ©äºå„å±‚é€»è¾‘çš„å¤ç”¨</p>
</blockquote>
<h4 id="å¸¸ç”¨æ¡†æ¶"><a href="#å¸¸ç”¨æ¡†æ¶" class="headerlink" title="å¸¸ç”¨æ¡†æ¶"></a>å¸¸ç”¨æ¡†æ¶</h4><p><strong>å¸¸è§çš„ J2EE ä¸­å¼€å‘æ¡†æ¶</strong></p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220710211042246.png" alt="image-20220710211042246"></p>
<h3 id="æ¡†æ¶æ˜¯ä»€ä¹ˆ"><a href="#æ¡†æ¶æ˜¯ä»€ä¹ˆ" class="headerlink" title="æ¡†æ¶æ˜¯ä»€ä¹ˆ"></a>æ¡†æ¶æ˜¯ä»€ä¹ˆ</h3><h4 id="æ¡†æ¶å®šä¹‰"><a href="#æ¡†æ¶å®šä¹‰" class="headerlink" title="æ¡†æ¶å®šä¹‰"></a>æ¡†æ¶å®šä¹‰</h4><blockquote>
<p>â€‹        æ¡†æ¶ï¼ˆFrameworkï¼‰æ˜¯æ•´ä¸ªæˆ–éƒ¨åˆ†ç³»ç»Ÿçš„å¯é‡ç”¨è®¾è®¡ï¼Œè¡¨ç°ä¸ºä¸€ç»„æŠ½è±¡æ„ä»¶åŠæ„ä»¶å®ä¾‹é—´äº¤äº’çš„æ–¹æ³•;å¦ä¸€ç§è®¤ä¸ºï¼Œæ¡†æ¶æ˜¯å¯è¢«åº”ç”¨å¼€å‘è€…å®šåˆ¶çš„åº”ç”¨éª¨æ¶ã€æ¨¡æ¿ã€‚</p>
<p>ç®€å•çš„è¯´ï¼Œæ¡†æ¶å…¶å®æ˜¯åŠæˆå“è½¯ä»¶ï¼Œå°±æ˜¯ä¸€ç»„ç»„ä»¶ï¼Œä¾›ä½ ä½¿ç”¨å®Œæˆä½ è‡ªå·±çš„ç³»ç»Ÿã€‚ä»å¦ä¸€ä¸ªè§’åº¦æ¥è¯´æ¡†æ¶ä¸€ä¸ªèˆå°ï¼Œä½ åœ¨èˆå°ä¸Šåšè¡¨æ¼”ã€‚åœ¨æ¡†æ¶åŸºç¡€ä¸ŠåŠ å…¥ä½ è¦å®Œæˆçš„åŠŸèƒ½ã€‚</p>
<p>æ¡†æ¶å®‰å…¨çš„ï¼Œå¯å¤ç”¨çš„ï¼Œä¸æ–­å‡çº§çš„è½¯ä»¶ã€‚</p>
</blockquote>
<h4 id="æ¡†æ¶è§£å†³çš„é—®é¢˜"><a href="#æ¡†æ¶è§£å†³çš„é—®é¢˜" class="headerlink" title="æ¡†æ¶è§£å†³çš„é—®é¢˜"></a>æ¡†æ¶è§£å†³çš„é—®é¢˜</h4><blockquote>
<p>â€‹        æ¡†æ¶è¦è§£å†³çš„æœ€é‡è¦çš„ä¸€ä¸ªé—®é¢˜æ˜¯æŠ€æœ¯æ•´åˆï¼Œåœ¨ J2EE çš„ æ¡†æ¶ä¸­ï¼Œæœ‰ç€å„ç§å„æ ·çš„æŠ€æœ¯ï¼Œä¸åŒçš„åº”ç”¨ï¼Œç³»ç»Ÿä½¿ç”¨ä¸åŒçš„æŠ€æœ¯è§£å†³é—®é¢˜ã€‚éœ€è¦ä» J2EE ä¸­é€‰æ‹©ä¸åŒçš„æŠ€æœ¯ï¼Œè€ŒæŠ€æœ¯è‡ªèº«çš„å¤æ‚æ€§ï¼Œæœ‰å¯¼è‡´æ›´å¤§çš„é£é™©ã€‚ä¼ä¸šåœ¨å¼€å‘è½¯ä»¶é¡¹ç›®æ—¶ï¼Œä¸»è¦ç›®çš„æ˜¯è§£å†³ä¸šåŠ¡é—®é¢˜ã€‚ å³è¦æ±‚ä¼ä¸šè´Ÿè´£æŠ€æœ¯æœ¬èº«ï¼Œåˆè¦æ±‚è§£å†³ä¸šåŠ¡é—®é¢˜ã€‚è¿™æ˜¯å¤§å¤šæ•°ä¼ä¸šä¸èƒ½å®Œæˆçš„ã€‚æ¡†æ¶æŠŠç›¸å…³çš„æŠ€æœ¯èåˆåœ¨ä¸€èµ·ï¼Œä¼ä¸šå¼€å‘å¯ä»¥é›†ä¸­åœ¨ä¸šåŠ¡é¢†åŸŸæ–¹é¢ã€‚</p>
<p>å¦ä¸€ä¸ªæ–¹é¢å¯ä»¥æä¾›å¼€å‘çš„æ•ˆç‡ã€‚</p>
</blockquote>
<h3 id="JDBCç¼–ç¨‹"><a href="#JDBCç¼–ç¨‹" class="headerlink" title="JDBCç¼–ç¨‹"></a>JDBCç¼–ç¨‹</h3><h4 id="ä½¿ç”¨JDBCçš„ç¼–ç¨‹å›é¡¾"><a href="#ä½¿ç”¨JDBCçš„ç¼–ç¨‹å›é¡¾" class="headerlink" title="ä½¿ç”¨JDBCçš„ç¼–ç¨‹å›é¡¾"></a>ä½¿ç”¨JDBCçš„ç¼–ç¨‹å›é¡¾</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findStudent</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>; </span><br><span class="line"><span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">//æ³¨å†Œ mysql é©±åŠ¨ </span></span><br><span class="line">  Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line"><span class="comment">//è¿æ¥æ•°æ®çš„åŸºæœ¬ä¿¡æ¯ url ï¼Œusernameï¼Œpassword</span></span><br><span class="line"><span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/springdb&quot;</span>; </span><br><span class="line"><span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"><span class="comment">//åˆ›å»ºè¿æ¥å¯¹è±¡ </span></span><br><span class="line">conn = DriverManager.getConnection(url, username, password);</span><br><span class="line"><span class="comment">//ä¿å­˜æŸ¥è¯¢ç»“æœ </span></span><br><span class="line">List&lt;Student&gt; stuList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="comment">//åˆ›å»º Statement, ç”¨æ¥æ‰§è¡Œ sql è¯­å¥ </span></span><br><span class="line">stmt = conn.createStatement();</span><br><span class="line"><span class="comment">//æ‰§è¡ŒæŸ¥è¯¢ï¼Œåˆ›å»ºè®°å½•é›†ï¼Œ </span></span><br><span class="line">rs = stmt.executeQuery(<span class="string">&quot;select * from student&quot;</span>);</span><br><span class="line"><span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line"><span class="type">Student</span> <span class="variable">stu</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(); </span><br><span class="line">stu.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">stu.setName(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">stu.setAge(rs.getInt(<span class="string">&quot;age&quot;</span>));</span><br><span class="line"><span class="comment">//ä»æ•°æ®åº“å–å‡ºæ•°æ®è½¬ä¸º Student å¯¹è±¡ï¼Œå°è£…åˆ° List é›†åˆ </span></span><br><span class="line">    <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> conn.prepareStatement(sql);</span><br><span class="line"><span class="comment">// ç¹ççš„èµ‹å€¼ï¼šæ€è€ƒâ¼€ä¸‹ï¼Œè¿™ç§æœ‰è§„å¾‹çš„ä»£ç èƒ½ä¸èƒ½é€šè¿‡åå°„æœºåˆ¶æ¥åšâ¾ƒåŠ¨åŒ–ã€‚</span></span><br><span class="line">ps.setString(<span class="number">1</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">2</span>, <span class="string">&quot;123456789&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">3</span>, <span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">4</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">5</span>, <span class="string">&quot;1980-10-11&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">6</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">7</span>, <span class="string">&quot;zhangsan@126.com&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">8</span>, <span class="string">&quot;åŒ—äº¬&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">9</span>, <span class="string">&quot;â¼¤å…´åŒºå‡‰â½”æ²³â¼†è¡—&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">10</span>, <span class="string">&quot;1000000&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">11</span>, <span class="string">&quot;16398574152&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">12</span>, <span class="string">&quot;A&quot;</span>);</span><br><span class="line"><span class="comment">// æ‰§â¾SQL</span></span><br><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> ps.executeUpdate();</span><br><span class="line"><span class="comment">// ......</span></span><br><span class="line">stuList.add(stu);&#125;</span><br><span class="line">  &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">   <span class="keyword">try</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(rs != <span class="literal">null</span>)</span><br><span class="line">      rs.lose();</span><br><span class="line"><span class="keyword">if</span>(pstm != <span class="literal">null</span>)</span><br><span class="line">      pstm.close();</span><br><span class="line">   <span class="keyword">if</span>(con != <span class="literal">null</span>)</span><br><span class="line">      con.close();</span><br><span class="line">   </span><br><span class="line">&#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">  e.printStackTrace();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä½¿ç”¨JDBCçš„ç¼ºé™·"><a href="#ä½¿ç”¨JDBCçš„ç¼ºé™·" class="headerlink" title="ä½¿ç”¨JDBCçš„ç¼ºé™·"></a>ä½¿ç”¨JDBCçš„ç¼ºé™·</h4><ol>
<li>ä»£ç æ¯”è¾ƒå¤šï¼Œå¼€å‘æ•ˆç‡æ¯”è¾ƒä½ã€‚</li>
<li>SQLè¯­å¥å†™æ­»åœ¨Javaç¨‹åºä¸­ï¼Œä¸çµæ´»ã€‚æ”¹SQLçš„è¯å°±è¦æ”¹Javaä»£ç ã€‚è¿èƒŒå¼€é—­åŸåˆ™OCPã€‚</li>
<li>éœ€è¦å…³æ³¨Connectionï¼ŒStatementï¼ŒResultSetå¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯ã€‚</li>
<li>å¯¹ResultSetçš„æŸ¥è¯¢ç»“æœï¼Œéœ€è¦è‡ªå·±å»å°è£…ä¸ºListã€‚</li>
<li>é‡å¤å†—ä½™çš„ä»£ç æ¯”è¾ƒå¤šã€‚</li>
<li>ä¸šåŠ¡ä»£ç å’Œæ•°æ®åº“çš„æ“ä½œæ··åœ¨ä¸€èµ·ã€‚</li>
</ol>
<h3 id="äº†è§£MyBatis"><a href="#äº†è§£MyBatis" class="headerlink" title="äº†è§£MyBatis"></a>äº†è§£MyBatis</h3><p>MyBatisæœ¬è´¨ä¸Šå°±æ˜¯å¯¹JDBCçš„å°è£…ï¼Œé€šè¿‡MyBatiså®ŒæˆCRUDã€‚ </p>
<p>â— MyBatisåœ¨ä¸‰å±‚æ¶æ„ä¸­è´Ÿè´£æŒä¹…å±‚çš„ï¼Œå±äºæŒä¹…å±‚æ¡†æ¶ã€‚ </p>
<p>â— MyBatisçš„å‘å±•å†ç¨‹ï¼šã€å¼•â½¤ç™¾åº¦ç™¾ç§‘ã€‘ </p>
<p>â—‹ MyBatisæœ¬æ˜¯apacheçš„â¼€ä¸ªå¼€æºé¡¹â½¬iBatisï¼Œ2010å¹´è¿™ä¸ªé¡¹â½¬ç”±apache software foundationè¿ </p>
<p>ç§»åˆ°äº†google codeï¼Œå¹¶ä¸”æ”¹åä¸ºMyBatisã€‚2013å¹´11â½‰è¿ç§»åˆ°Githubã€‚ </p>
<p>â—‹ iBATISâ¼€è¯æ¥æºäºâ€œinternetâ€å’Œâ€œabatisâ€çš„ç»„åˆï¼Œæ˜¯â¼€ä¸ªåŸºäºJavaçš„æŒä¹…å±‚æ¡†æ¶ã€‚iBATISæä¾›çš„ </p>
<p>æŒä¹…å±‚æ¡†æ¶åŒ…æ‹¬SQL Mapså’ŒData Access Objectsï¼ˆDAOsï¼‰ã€‚ </p>
<p>â— æ‰“å¼€mybatisä»£ç å¯ä»¥çœ‹åˆ°å®ƒçš„åŒ…ç»“æ„ä¸­åŒ…å«ï¼šibatis</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220916231211933.png" alt="image-20220916231211933" style="zoom:67%;" /></p>
<ul>
<li><p>ORM : å¯¹è±¡å…³ç³»æ˜ å°„</p>
<p>â—‹ Oï¼ˆObjectï¼‰ï¼šJavaè™šæ‹Ÿæœºä¸­çš„Javaå¯¹è±¡ </p>
<p>â—‹ Rï¼ˆRelationalï¼‰ï¼šå…³ç³»å‹æ•°æ®åº“ </p>
<p>â—‹ Mï¼ˆMappingï¼‰ï¼šå°†Javaè™šæ‹Ÿæœºä¸­çš„Javaå¯¹è±¡æ˜ å°„åˆ°æ•°æ®åº“è¡¨ä¸­â¼€â¾è®°å½•ï¼Œæˆ–æ˜¯å°†æ•°æ®åº“è¡¨ä¸­ </p>
<p>â¼€â¾è®°å½•æ˜ å°„æˆJavaè™šæ‹Ÿæœºä¸­çš„â¼€ä¸ªJavaå¯¹è±¡ã€‚ </p>
<p>â—‹ ORMå›¾ç¤º </p>
</li>
</ul>
<p>  <img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/Snipaste_2022-09-16_23-14-37.png" style="zoom: 80%;" /></p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220916231612458.png" alt="image-20220916231612458" style="zoom:80%;" /></p>
<p><strong>ä¸‹é¢ä¸€å¼ å›¾å¾ˆæ¸…æ™°çš„ä»‹ç»ä»€ä¹ˆæ˜¯ORM</strong></p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/001-ORM%E6%80%9D%E6%83%B3-%E5%AF%B9%E8%B1%A1%E5%85%B3%E7%B3%BB%E6%98%A0%E5%B0%84.png" style="zoom:80%;" /></p>
<ul>
<li>MyBatiså±äºåŠè‡ªåŠ¨åŒ–ORMæ¡†æ¶</li>
<li>Hibernateå…¨è‡ªåŠ¨åŒ–ORMæ¡†æ¶</li>
</ul>
<hr>
<ul>
<li><p>MyBatisæ¡†æ¶çš„ä¼˜ç‚¹ :</p>
<p>â—‹ â½€æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ã€åŸºæœ¬æ˜ å°„ä»¥åŠâ¾¼çº§æ˜ å°„ </p>
<p>â—‹ é¿å…äº†â¼ä¹æ‰€æœ‰çš„ JDBC ä»£ç ä¸­â¼¿åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›† </p>
<p>â—‹ â½€æŒXMLå¼€å‘ï¼Œä¹Ÿâ½€æŒæ³¨è§£å¼å¼€å‘ã€‚ã€ä¸ºäº†ä¿è¯sqlè¯­å¥çš„çµæ´»ï¼Œæ‰€ä»¥mybatisâ¼¤éƒ¨åˆ†æ˜¯é‡‡â½¤ </p>
<p>XMLâ½…å¼å¼€å‘ã€‚ã€‘</p>
<p>â—‹ å°†æ¥â¼å’Œ Java çš„ POJOs(Plain Ordinary Java Objectï¼Œç®€å•æ™®é€šçš„Javaå¯¹è±¡)æ˜ å°„æˆæ•°æ®åº“ä¸­çš„ </p>
<p>è®°å½• </p>
<p>â—‹ ä½“ç§¯â¼©å¥½å­¦ï¼šä¸¤ä¸ªjaråŒ…ï¼Œä¸¤ä¸ªXMLé…ç½®â½‚ä»¶ã€‚ </p>
<p>â—‹ å®Œå…¨åšåˆ°sqlè§£è€¦åˆã€‚ </p>
<p>â—‹ æä¾›äº†åŸºæœ¬æ˜ å°„æ ‡ç­¾ã€‚ </p>
<p>â—‹ æä¾›äº†â¾¼çº§æ˜ å°„æ ‡ç­¾ã€‚ </p>
<p>â—‹ æä¾›äº†XMLæ ‡ç­¾ï¼Œâ½€æŒåŠ¨æ€SQLçš„ç¼–å†™ã€‚ </p>
<p>â—‹ â€¦â€¦ </p>
</li>
</ul>
<h4 id="MyBatisæ¡†æ¶è§£å†³çš„ä¸»è¦é—®é¢˜"><a href="#MyBatisæ¡†æ¶è§£å†³çš„ä¸»è¦é—®é¢˜" class="headerlink" title="MyBatisæ¡†æ¶è§£å†³çš„ä¸»è¦é—®é¢˜"></a>MyBatisæ¡†æ¶è§£å†³çš„ä¸»è¦é—®é¢˜</h4><blockquote>
<p>å‡è½»ä½¿ç”¨ JDBC çš„å¤æ‚æ€§ï¼Œä¸ç”¨ç¼–å†™é‡å¤çš„åˆ›å»º Connetion , Statement ; ä¸ç”¨ç¼–å†™å…³é—­èµ„æºä»£ç ã€‚ç›´æ¥ä½¿ç”¨ java å¯¹è±¡ï¼Œè¡¨ç¤ºç»“æœæ•°æ®ã€‚<strong>è®©å¼€å‘è€…ä¸“æ³¨</strong> <code>SQL</code>çš„å¤„ç†ã€‚ å…¶ä»–åˆ†å¿ƒçš„å·¥ä½œç”± MyBatis ä»£åŠ³ã€‚</p>
<p>MyBatis å¯ä»¥å®Œæˆï¼š</p>
<p>æ³¨å†Œæ•°æ®åº“çš„é©±åŠ¨ï¼Œä¾‹å¦‚ Class.forName(â€œcom.mysql.jdbc.Driverâ€))</p>
<p>åˆ›å»º JDBC ä¸­å¿…é¡»ä½¿ç”¨çš„ Connection ï¼Œ Statementï¼Œ ResultSet å¯¹è±¡</p>
<p>ä» xml ä¸­è·å– sqlï¼Œå¹¶æ‰§è¡Œ sql è¯­å¥ï¼ŒæŠŠ ResultSet ç»“æœè½¬æ¢ java å¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Student&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayLsit</span>&lt;&gt;();</span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> state.executeQuery(â€œselect * from studentâ€); </span><br><span class="line"><span class="keyword">while</span>(rs.next)&#123;</span><br><span class="line"><span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">student.setName(rs.getString(â€œnameâ€)); student.setAge(rs.getInt(â€œageâ€));</span><br><span class="line">list.add(student);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>å…³é—­èµ„æº</span><br><span class="line">ResultSet.close() , Statement.close() , Conenection.close()</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="MyBatisæ¡†æ¶çš„æ¦‚è¿°"><a href="#MyBatisæ¡†æ¶çš„æ¦‚è¿°" class="headerlink" title="MyBatisæ¡†æ¶çš„æ¦‚è¿°"></a>MyBatisæ¡†æ¶çš„æ¦‚è¿°</h4><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220710211122577.png" alt="image-20220710211122577" style="zoom:80%;" /></p>
<blockquote>
<p>1ã€ <code>mybatisé…ç½®</code></p>
<p>mybatis-config.xmlï¼Œæ­¤æ–‡ä»¶ä½œä¸ºmybatisçš„å…¨å±€é…ç½®æ–‡ä»¶ï¼Œé…ç½®äº†mybatisçš„è¿è¡Œç¯å¢ƒç­‰ä¿¡æ¯ã€‚</p>
<p>mapper.xmlæ–‡ä»¶å³sqlæ˜ å°„æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­é…ç½®äº†æ“ä½œæ•°æ®åº“çš„sqlè¯­å¥ã€‚æ­¤æ–‡ä»¶éœ€è¦åœ¨SqlMapConfig.xmlä¸­åŠ è½½ã€‚</p>
<p>2ã€ é€šè¿‡mybatisç¯å¢ƒç­‰é…ç½®ä¿¡æ¯æ„é€ <code>SqlSessionFactory</code>å³ä¼šè¯å·¥å‚</p>
<p>3ã€ ç”±ä¼šè¯å·¥å‚åˆ›å»ºsqlSessionå³ä¼šè¯ï¼Œæ“ä½œæ•°æ®åº“éœ€è¦é€šè¿‡sqlSessionè¿›è¡Œã€‚</p>
<p>4ã€ <code>mybatis</code>åº•å±‚è‡ªå®šä¹‰äº†<code>Executor</code>æ‰§è¡Œå™¨æ¥å£æ“ä½œæ•°æ®åº“ï¼ŒExecutoræ¥å£æœ‰ä¸¤ä¸ªå®ç°ï¼Œä¸€ä¸ªæ˜¯åŸºæœ¬æ‰§è¡Œå™¨ã€ä¸€ä¸ªæ˜¯ç¼“å­˜æ‰§è¡Œå™¨ã€‚</p>
<p>5ã€ <code>Mapped Statemen</code>tä¹Ÿæ˜¯mybatisä¸€ä¸ªåº•å±‚å°è£…å¯¹è±¡ï¼Œå®ƒåŒ…è£…äº†<code>mybatis</code>é…ç½®ä¿¡æ¯åŠsqlæ˜ å°„ä¿¡æ¯ç­‰ã€‚mapper.xmlæ–‡ä»¶ä¸­ä¸€ä¸ªsqlå¯¹åº”ä¸€ä¸ªMapped Statementå¯¹è±¡ï¼Œsqlçš„<code>id</code>å³æ˜¯Mapped statementçš„idã€‚</p>
<p>6ã€ <code>Mapped Statement</code>å¯¹sqlæ‰§è¡Œè¾“å…¥å‚æ•°è¿›è¡Œå®šä¹‰ï¼ŒåŒ…æ‹¬<code>HashMap</code>ã€<code>åŸºæœ¬ç±»å‹</code>ã€<code>pojo</code>ï¼ŒExecutoré€šè¿‡Mapped Statementåœ¨æ‰§è¡Œsqlå‰å°†è¾“å…¥çš„javaå¯¹è±¡æ˜ å°„è‡³sqlä¸­ï¼Œè¾“å…¥å‚æ•°æ˜ å°„å°±æ˜¯jdbcç¼–ç¨‹ä¸­å¯¹<code>preparedStatement</code>è®¾ç½®å‚æ•°ã€‚</p>
<p>7ã€ Mapped Statementå¯¹sqlæ‰§è¡Œè¾“å‡ºç»“æœè¿›è¡Œå®šä¹‰ï¼ŒåŒ…æ‹¬<code>HashMap</code>ã€åŸºæœ¬ç±»å‹ã€<code>pojo</code>ï¼Œ<code>Executor</code>é€šè¿‡<code>Mapped Statement</code>åœ¨æ‰§è¡Œsqlåå°†è¾“å‡ºç»“æœæ˜ å°„è‡³<code>javaå¯¹è±¡</code>ä¸­ï¼Œè¾“å‡ºç»“æœæ˜ å°„è¿‡ç¨‹ç›¸å½“äº<code>jdbc</code>ç¼–ç¨‹ä¸­å¯¹ç»“æœçš„è§£æå¤„ç†è¿‡ç¨‹ã€‚</p>
</blockquote>
<h2 id="ç¬¬äºŒç« -MyBatisæ¡†æ¶å¿«é€Ÿå…¥é—¨"><a href="#ç¬¬äºŒç« -MyBatisæ¡†æ¶å¿«é€Ÿå…¥é—¨" class="headerlink" title="ç¬¬äºŒç«  MyBatisæ¡†æ¶å¿«é€Ÿå…¥é—¨"></a>ç¬¬äºŒç«  MyBatisæ¡†æ¶å¿«é€Ÿå…¥é—¨</h2><h3 id="2-1-å†…å®¹åˆ—è¡¨"><a href="#2-1-å†…å®¹åˆ—è¡¨" class="headerlink" title="2.1 å†…å®¹åˆ—è¡¨"></a>2.1 å†…å®¹åˆ—è¡¨</h3><blockquote>
<p>å¿«é€Ÿå¼€å§‹ä¸€ä¸ª<code>MyBatis</code></p>
<p>åŸºæœ¬<code>CURD</code>çš„æ“ä½œ</p>
<p>MyBatiså†…éƒ¨å¯¹è±¡åˆ†æ</p>
<p>ä½¿ç”¨DaoImpl.xml</p>
</blockquote>
<h3 id="2-2-å…¥é—¨æ¡ˆä¾‹"><a href="#2-2-å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="2. 2 å…¥é—¨æ¡ˆä¾‹"></a>2. 2 å…¥é—¨æ¡ˆä¾‹</h3><h4 id="2-2-1-å¼€å‘å‡†å¤‡"><a href="#2-2-1-å¼€å‘å‡†å¤‡" class="headerlink" title="2.2.1 å¼€å‘å‡†å¤‡"></a>2.2.1 å¼€å‘å‡†å¤‡</h4><blockquote>
<p>æ­å»º MyBatis å¼€å‘ç¯å¢ƒï¼Œå®ç°ç¬¬ä¸€ä¸ªæ¡ˆä¾‹</p>
<p>ä¸‹è½½ mybatis</p>
<p><a target="_blank" rel="noopener" href="https://github.com/mybatis/mybatis-3/releases">MyBatiså®˜ç½‘</a></p>
</blockquote>
<p><strong>ä¸‹è½½åçš„ç›®å½•ç»“æ„</strong></p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220710211134605.png" alt="image-20220710211134605"></p>
<blockquote>
<p><strong>å…¶ä¸­ï¼š</strong></p>
<p>mybatis-3.5.1.jar        â€”â€”&gt;mybatisçš„æ ¸å¿ƒåŒ…</p>
<p>lib                                â€”â€”&gt;mybatisçš„ä¾èµ–åŒ…</p>
<p>mybatis-3.5.1.pdf        â€”â€”&gt;mybatisä½¿ç”¨æ‰‹å†Œ</p>
</blockquote>
<h3 id="2-2-MyBatisä¸‹è½½"><a href="#2-2-MyBatisä¸‹è½½" class="headerlink" title="2.2 MyBatisä¸‹è½½"></a>2.2 MyBatisä¸‹è½½</h3><ul>
<li>ä»githubä¸Šä¸‹è½½ï¼Œåœ°å€ï¼š<a target="_blank" rel="noopener" href="https://github.com/mybatis/mybatis-3">https://github.com/mybatis/mybatis-3</a></li>
</ul>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220917150902782.png" alt="image-20220917150902782" style="zoom:67%;" /><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220917150917323.png" alt="image-20220917150917323"></p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220917150932329.png" alt="image-20220917150932329" style="zoom:67%;" /></p>
<p>å°†æ¡†æ¶ä»¥åŠæ¡†æ¶çš„æºç éƒ½ä¸‹è½½ä¸‹æ¥ï¼Œä¸‹è½½æ¡†æ¶åè§£å‹ï¼Œæ‰“å¼€mybatisâ½¬å½• </p>
<p>â€‹        <img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220917151007894.png" alt="image-20220917151007894"></p>
<p>â—‹ é€šè¿‡ä»¥ä¸Šè§£å‹å¯ä»¥çœ‹åˆ°ï¼Œæ¡†æ¶â¼€èˆ¬éƒ½æ˜¯ä»¥jaråŒ…çš„å½¢å¼å­˜åœ¨ã€‚æˆ‘ä»¬çš„mybatisè¯¾ç¨‹ä½¿â½¤mavenï¼Œæ‰€ </p>
<p>ä»¥è¿™ä¸ªjaræˆ‘ä»¬ä¸éœ€è¦ã€‚ </p>
<p>â—‹ å®˜â½…â¼¿å†Œéœ€è¦ã€‚</p>
<h3 id="2-3-MyBatisâ¼Šâ»”ç¨‹åºå¼€å‘æ­¥éª¤"><a href="#2-3-MyBatisâ¼Šâ»”ç¨‹åºå¼€å‘æ­¥éª¤" class="headerlink" title="2.3 MyBatisâ¼Šâ»”ç¨‹åºå¼€å‘æ­¥éª¤"></a>2.3 MyBatisâ¼Šâ»”ç¨‹åºå¼€å‘æ­¥éª¤</h3><p>â— å†™ä»£ç å‰å‡†å¤‡ï¼š </p>
<p>â—‹ å‡†å¤‡æ•°æ®åº“è¡¨ï¼šæ±½â»‹è¡¨t_carï¼Œå­—æ®µåŒ…æ‹¬ï¼š</p>
<blockquote>
<p>idï¼šä¸»é”®ï¼ˆâ¾ƒå¢ï¼‰ã€bigintã€‘ </p>
<p>car_numï¼šæ±½â»‹ç¼–å·ã€</p>
<p>varcharã€‘ </p>
<p>brandï¼šå“ç‰Œã€</p>
<p>varcharã€‘ </p>
<p>guide_priceï¼šâ¼šå®¶æŒ‡å¯¼ä»·ã€</p>
<p>decimalç±»å‹ï¼Œä¸“â»”ä¸ºè´¢åŠ¡æ•°æ®å‡†å¤‡çš„ç±»å‹ã€‘ </p>
<p>produce_timeï¼šâ½£äº§æ—¶é—´ã€</p>
<p>charï¼Œå¹´â½‰â½‡å³å¯ï¼Œ10ä¸ªâ»“åº¦ï¼Œâ€™2022-10-11â€™ã€‘ </p>
<p>car_typeï¼šæ±½â»‹ç±»å‹ï¼ˆç‡ƒæ²¹â»‹ã€ç”µâ»‹ã€æ°¢èƒ½æºï¼‰ã€</p>
<p>varcharã€‘ </p>
</blockquote>
<ul>
<li><p>ä½¿â½¤navicat for mysqlâ¼¯å…·å»ºè¡¨ </p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220917151115623.png" alt="image-20220917151115623"></p>
</li>
<li><p>ä½¿â½¤navicat for mysqlâ¼¯å…·å‘t_carè¡¨ä¸­æ’â¼Šä¸¤æ¡æ•°æ®ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220917151128346.png" alt="image-20220917151128346"></p>
</li>
<li><p>åˆ›å»ºProjectï¼šå»ºè®®åˆ›å»ºEmpty Projectï¼Œè®¾ç½®Javaç‰ˆæœ¬ä»¥åŠç¼–è¯‘ç‰ˆæœ¬ç­‰ã€‚ </p>
</li>
</ul>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220917151150338.png" alt="image-20220917151150338" style="zoom:67%;" /></p>
<ul>
<li><p>æ­¥éª¤1ï¼šæ‰“åŒ…â½…å¼ï¼šjarï¼ˆä¸éœ€è¦warï¼Œå› ä¸ºmybatiså°è£…çš„æ˜¯jdbcã€‚ï¼‰ </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.powernode<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-001-introduction<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span> </span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>æ­¥éª¤2ï¼šå¼•â¼Šä¾èµ–ï¼ˆmybatisä¾èµ– + mysqlé©±åŠ¨ä¾èµ–ï¼‰ </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mybatisæ ¸â¼¼ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--mysqlé©±åŠ¨ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.30<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>æ­¥éª¤3ï¼šåœ¨resourcesæ ¹â½¬å½•ä¸‹æ–°å»ºmybatis-config.xmlé…ç½®â½‚ä»¶ï¼ˆå¯ä»¥å‚è€ƒmybatisâ¼¿å†Œæ‹·â»‰ï¼‰ </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/po</span></span></span><br><span class="line"><span class="string"><span class="tag">wernode&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--sqlæ˜ å°„â½‚ä»¶åˆ›å»ºå¥½ä¹‹åï¼Œéœ€è¦å°†è¯¥â½‚ä»¶è·¯å¾„é…ç½®åˆ°è¿™â¾¥--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>æ³¨æ„1ï¼šmybatisæ ¸â¼¼é…ç½®â½‚ä»¶çš„â½‚ä»¶åä¸â¼€å®šæ˜¯mybatis-config.xmlï¼Œå¯ä»¥æ˜¯å…¶å®ƒåå­—ã€‚ </p>
</li>
<li><p>æ³¨æ„2ï¼šmybatisæ ¸â¼¼é…ç½®â½‚ä»¶å­˜æ”¾çš„ä½ç½®ä¹Ÿå¯ä»¥éšæ„ã€‚è¿™â¾¥é€‰æ‹©æ”¾åœ¨resourcesæ ¹ä¸‹ï¼Œç›¸å½“äºæ”¾åˆ°äº†ç±»çš„ æ ¹è·¯å¾„ä¸‹ã€‚ </p>
</li>
<li><p>æ­¥éª¤4ï¼šåœ¨resourcesæ ¹â½¬å½•ä¸‹æ–°å»ºCarMapper.xmlé…ç½®â½‚ä»¶ï¼ˆå¯ä»¥å‚è€ƒmybatisâ¼¿å†Œæ‹·â»‰ï¼‰</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--namespaceå…ˆéšæ„å†™â¼€ä¸ª--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--insert sqlï¼šä¿å­˜â¼€ä¸ªæ±½â»‹ä¿¡æ¯--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertCar&quot;</span>&gt;</span></span><br><span class="line"> insert into t_car</span><br><span class="line"> (id,car_num,brand,guide_price,produce_time,car_type)</span><br><span class="line"> values</span><br><span class="line"> (null,&#x27;102&#x27;,&#x27;ä¸°â½¥mirai&#x27;,40.30,&#x27;2014-10-05&#x27;,&#x27;æ°¢èƒ½æº&#x27;)</span><br><span class="line"> <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>æ³¨æ„1ï¼šsqlè¯­å¥æœ€åç»“å°¾å¯ä»¥ä¸å†™â€œ;â€ </p>
</li>
<li><p>æ³¨æ„2ï¼šCarMapper.xmlâ½‚ä»¶çš„åå­—ä¸æ˜¯å›ºå®šçš„ã€‚å¯ä»¥ä½¿â½¤å…¶å®ƒåå­—ã€‚ </p>
</li>
<li><p>æ³¨æ„3ï¼šCarMapper.xmlâ½‚ä»¶çš„ä½ç½®ä¹Ÿæ˜¯éšæ„çš„ã€‚è¿™â¾¥é€‰æ‹©æ”¾åœ¨resourcesæ ¹ä¸‹ï¼Œç›¸å½“äºæ”¾åˆ°äº†ç±»çš„æ ¹è·¯ å¾„ä¸‹ã€‚ </p>
</li>
<li><p>æ³¨æ„4ï¼šå°†CarMapper.xmlâ½‚ä»¶è·¯å¾„é…ç½®åˆ°mybatis-config.xmlï¼š </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper.xml&quot;</span>/&gt;</span> 1</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ­¥éª¤5ï¼šç¼–å†™MyBatisIntroductionTestä»£ç </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.manman.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Gaoziman</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * description:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/15 22:16</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDelete</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">//    åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="comment">//    åˆ›å»ºæµ åŠ è½½mybatisä¸»é…ç½®æ–‡ä»¶</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//    é€šè¿‡æµåˆ›å»ºSqlSessionFactory</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(is);</span><br><span class="line">        <span class="comment">//    é€šè¿‡SqlSessionFactoryåˆ›å»ºSqlSession</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">    <span class="comment">//    ä½¿ç”¨SQL</span></span><br><span class="line">    <span class="comment">//    int i = sqlSession.delete(&quot;deleteCar&quot;);</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>);</span><br><span class="line">        <span class="comment">//    æ‰‹åŠ¨æäº¤äº‹åŠ¡</span></span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        System.out.println(<span class="string">&quot;å—å½±å“çš„è¡Œæ•°ä¸º : &quot;</span> +i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„1ï¼šé»˜è®¤é‡‡â½¤çš„äº‹åŠ¡ç®¡ç†å™¨æ˜¯ï¼šJDBCã€‚JDBCäº‹åŠ¡é»˜è®¤æ˜¯ä¸æäº¤çš„ï¼Œéœ€è¦â¼¿åŠ¨æäº¤ã€‚ </p>
</li>
</ul>
<p>  â— æ­¥éª¤6ï¼šè¿â¾ç¨‹åºï¼ŒæŸ¥çœ‹è¿â¾ç»“æœï¼Œä»¥åŠæ•°æ®åº“è¡¨ä¸­çš„æ•°æ®</p>
<p>  <img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220917151607889.png" alt="image-20220917151607889" style="zoom:67%;" /></p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220917151628888.png" alt="image-20220917151628888" style="zoom:67%;" /></p>
<h3 id="2-4-å…³äºMyBatisæ ¸â¼¼é…ç½®â½‚ä»¶çš„åå­—å’Œè·¯å¾„è¯¦è§£"><a href="#2-4-å…³äºMyBatisæ ¸â¼¼é…ç½®â½‚ä»¶çš„åå­—å’Œè·¯å¾„è¯¦è§£" class="headerlink" title="2.4 å…³äºMyBatisæ ¸â¼¼é…ç½®â½‚ä»¶çš„åå­—å’Œè·¯å¾„è¯¦è§£"></a>2.4 å…³äºMyBatisæ ¸â¼¼é…ç½®â½‚ä»¶çš„åå­—å’Œè·¯å¾„è¯¦è§£</h3><ul>
<li>æ ¸â¼¼é…ç½®â½‚ä»¶çš„åå­—æ˜¯éšæ„çš„ï¼Œå› ä¸ºä»¥ä¸‹çš„ä»£ç ï¼š</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// â½‚ä»¶åæ˜¯å‡ºç°åœ¨ç¨‹åºä¸­çš„ï¼Œâ½‚ä»¶åå¦‚æœä¿®æ”¹äº†ï¼Œå¯¹åº”è¿™â¾¥çš„javaç¨‹åºä¹Ÿæ”¹â¼€ä¸‹å°±â¾äº†ã€‚</span><br><span class="line">InputStream is = Thread.currentThread().getContextClassLoader().getResource</span><br><span class="line">AsStream(&quot;mybatis-config.xml&quot;);</span><br></pre></td></tr></table></figure>
<ul>
<li><p>è™½ç„¶mybatisæ ¸â¼¼é…ç½®â½‚ä»¶çš„åå­—ä¸æ˜¯å›ºå®šçš„ï¼Œä½†é€šå¸¸è¯¥â½‚ä»¶çš„åå­—å«åšï¼šmybatis-config.xml </p>
</li>
<li><p>è™½ç„¶mybatisæ ¸â¼¼é…ç½®â½‚ä»¶çš„è·¯å¾„ä¸æ˜¯å›ºå®šçš„ï¼Œä½†é€šå¸¸è¯¥â½‚ä»¶ä¼šå­˜æ”¾åˆ°ç±»è·¯å¾„å½“ä¸­ï¼Œè¿™æ ·è®©é¡¹â½¬çš„ç§»æ¤æ›´åŠ å¥å£®ã€‚</p>
</li>
</ul>
<ul>
<li>åœ¨mybatisä¸­æä¾›äº†â¼€ä¸ªç±»ï¼šResourcesã€org.apache.ibatis.io.Resourcesã€‘ï¼Œè¯¥ç±»å¯ä»¥ä»ç±»è·¯å¾„å½“ä¸­è·å–èµ„æºï¼Œæˆ‘ä»¬é€šå¸¸ä½¿â½¤å®ƒæ¥è·å–è¾“â¼ŠæµInputStreamï¼Œä»£ç å¦‚ä¸‹ </li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// è¿™ç§â½…å¼åªèƒ½ä»ç±»è·¯å¾„å½“ä¸­è·å–èµ„æºï¼Œä¹Ÿå°±æ˜¯è¯´mybatis-config.xmlâ½‚ä»¶éœ€è¦åœ¨ç±»è·¯å¾„ä¸‹ã€‚</span><br><span class="line">InputStream is = Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;);</span><br></pre></td></tr></table></figure>
<h3 id="2-5-MyBatisç¬¬â¼€ä¸ªâ½è¾ƒå®Œæ•´çš„ä»£ç å†™æ³•"><a href="#2-5-MyBatisç¬¬â¼€ä¸ªâ½è¾ƒå®Œæ•´çš„ä»£ç å†™æ³•" class="headerlink" title="2.5 MyBatisç¬¬â¼€ä¸ªâ½è¾ƒå®Œæ•´çš„ä»£ç å†™æ³•"></a>2.5 MyBatisç¬¬â¼€ä¸ªâ½è¾ƒå®Œæ•´çš„ä»£ç å†™æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * â½è¾ƒå®Œæ•´çš„ç¬¬â¼€ä¸ªmybatisç¨‹åºå†™æ³•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> gaoziman</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisCompleteCodeTest</span> &#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"> <span class="keyword">try</span> &#123;</span><br><span class="line">     <span class="comment">// 1.åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡</span></span><br><span class="line">     <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSes</span></span><br><span class="line">    sionFactoryBuilder();</span><br><span class="line">     <span class="comment">// 2.åˆ›å»ºSqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">     <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line">     <span class="comment">// 3.åˆ›å»ºSqlSessionå¯¹è±¡</span></span><br><span class="line">     sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">     <span class="comment">// 4.æ‰§â¾SQL</span></span><br><span class="line">     <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>);</span><br><span class="line">     System.out.println(<span class="string">&quot;æ›´æ–°äº†â¼æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line">     <span class="comment">// 5.æäº¤</span></span><br><span class="line">     sqlSession.commit();</span><br><span class="line"> 	&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"> <span class="comment">// å›æ»š</span></span><br><span class="line"> <span class="keyword">if</span> (sqlSession != <span class="literal">null</span>) &#123;</span><br><span class="line">     sqlSession.rollback();</span><br><span class="line"> 	&#125;</span><br><span class="line"> 	e.printStackTrace();</span><br><span class="line"> 	&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"> <span class="comment">// 6.å…³é—­</span></span><br><span class="line"> <span class="keyword">if</span> (sqlSession != <span class="literal">null</span>) &#123;</span><br><span class="line"> 	sqlSession.close();</span><br><span class="line">	 	&#125;</span><br><span class="line"> 	&#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-6-å¼•å…¥å•å…ƒæµ‹è¯•"><a href="#2-6-å¼•å…¥å•å…ƒæµ‹è¯•" class="headerlink" title="2.6 å¼•å…¥å•å…ƒæµ‹è¯•"></a>2.6 å¼•å…¥å•å…ƒæµ‹è¯•</h3><ul>
<li>JUnitæ˜¯ä¸“â»”åšå•å…ƒæµ‹è¯•çš„ç»„ä»¶ã€‚ <ul>
<li>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå•å…ƒæµ‹è¯•â¼€èˆ¬æ˜¯ç”±æˆ‘ä»¬Javaç¨‹åºå‘˜æ¥å®Œæˆçš„ã€‚ </li>
<li>æˆ‘ä»¬è¦å¯¹æˆ‘ä»¬â¾ƒâ¼°å†™çš„æ¯â¼€ä¸ªä¸šåŠ¡â½…æ³•è´Ÿè´£ä»»ï¼Œè¦ä¿è¯æ¯ä¸ªä¸šåŠ¡â½…æ³•åœ¨è¿›â¾æµ‹è¯•çš„æ—¶å€™éƒ½èƒ½é€šè¿‡ã€‚</li>
<li>æµ‹è¯•çš„è¿‡ç¨‹ä¸­æ¶‰åŠåˆ°ä¸¤ä¸ªæ¦‚å¿µï¼š<ul>
<li>æœŸæœ›å€¼ </li>
<li>å®é™…å€¼</li>
</ul>
</li>
<li>æœŸæœ›å€¼å’Œå®é™…å€¼ç›¸åŒè¡¨ç¤ºæµ‹è¯•é€šè¿‡ï¼ŒæœŸæœ›å€¼å’Œå®é™…å€¼ä¸åŒåˆ™å•å…ƒæµ‹è¯•æ‰§â¾æ—¶ä¼šæŠ¥é”™ã€‚ </li>
<li>è¿™â¾¥å¼•â¼ŠJUnitæ˜¯ä¸ºäº†ä»£æ›¿mainâ½…æ³•ã€‚ </li>
</ul>
</li>
<li>ä½¿â½¤JUnitæ­¥éª¤ï¼š <ul>
<li>ç¬¬â¼€æ­¥ï¼šå¼•â¼Šä¾èµ–</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- junitä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>ç¬¬â¼†æ­¥ï¼šç¼–å†™å•å…ƒæµ‹è¯•ç±»ã€æµ‹è¯•â½¤ä¾‹ã€‘ï¼Œæµ‹è¯•â½¤ä¾‹ä¸­æ¯â¼€ä¸ªæµ‹è¯•â½…æ³•ä¸Šä½¿â½¤@Testæ³¨è§£è¿›â¾æ ‡æ³¨ã€‚</p>
<ul>
<li><p>æµ‹è¯•â½¤ä¾‹çš„åå­—ä»¥åŠæ¯ä¸ªæµ‹è¯•â½…æ³•çš„å®šä¹‰éƒ½æ˜¯æœ‰è§„èŒƒçš„ï¼š </p>
<p>æµ‹è¯•â½¤ä¾‹çš„åå­—ï¼šXxxTest </p>
<p>æµ‹è¯•â½…æ³•å£°æ˜æ ¼å¼ï¼špublic void testä¸šåŠ¡â½…æ³•å(){} </p>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æµ‹è¯•â½¤ä¾‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CarMapperTest</span>&#123;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">// æµ‹è¯•â½…æ³•</span></span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsert</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"> </span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>ç¬¬ä¸‰æ­¥ï¼šå¯ä»¥åœ¨ç±»ä¸Šæ‰§â¾ï¼Œä¹Ÿå¯ä»¥åœ¨â½…æ³•ä¸Šæ‰§â¾ </p>
<ul>
<li>åœ¨ç±»ä¸Šæ‰§â¾æ—¶ï¼Œè¯¥ç±»ä¸­æ‰€æœ‰çš„æµ‹è¯•â½…æ³•éƒ½ä¼šæ‰§â¾ã€‚ </li>
<li>åœ¨â½…æ³•ä¸Šæ‰§â¾æ—¶ï¼Œåªæ‰§â¾å½“å‰çš„æµ‹è¯•â½…æ³•ã€‚ </li>
</ul>
</li>
<li><p>ç¼–å†™â¼€ä¸ªæµ‹è¯•â½¤ä¾‹ï¼Œæ¥æµ‹è¯•insertCarä¸šåŠ¡ </p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CarMapperTest</span> &#123;</span><br><span class="line"> </span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertCar</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"> <span class="keyword">try</span> &#123;</span><br><span class="line"> <span class="comment">// 1.åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡</span></span><br><span class="line"> <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSes</span></span><br><span class="line">sionFactoryBuilder();</span><br><span class="line"> <span class="comment">// 2.åˆ›å»ºSqlSessionFactoryå¯¹è±¡</span></span><br><span class="line"> <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder</span><br><span class="line">.build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line"> <span class="comment">// 3.åˆ›å»ºSqlSessionå¯¹è±¡</span></span><br><span class="line"> sqlSession = sqlSessionFactory.openSession();</span><br><span class="line"> <span class="comment">// 4.æ‰§â¾SQL</span></span><br><span class="line"> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>);</span><br><span class="line"> System.out.println(<span class="string">&quot;æ›´æ–°äº†â¼æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line"> <span class="comment">// 5.æäº¤</span></span><br><span class="line"> sqlSession.commit();</span><br><span class="line"> &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"> <span class="comment">// å›æ»š</span></span><br><span class="line"> <span class="keyword">if</span> (sqlSession != <span class="literal">null</span>) &#123;</span><br><span class="line"> sqlSession.rollback();</span><br><span class="line"> &#125;</span><br><span class="line"> e.printStackTrace();</span><br><span class="line"> &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"> <span class="comment">// 6.å…³é—­</span></span><br><span class="line"> <span class="keyword">if</span> (sqlSession != <span class="literal">null</span>) &#123;</span><br><span class="line"> sqlSession.close();</span><br><span class="line"> 	&#125;</span><br><span class="line"> 	&#125;</span><br><span class="line"> 	&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§â¾å•å…ƒæµ‹è¯•ï¼ŒæŸ¥çœ‹æ•°æ®åº“è¡¨çš„å˜åŒ–ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220917233826281.png" alt="image-20220917233826281" style="zoom:80%;" /></p>
<h3 id="2-7-å¼•å…¥æ—¥å¿—æ¡†æ¶"><a href="#2-7-å¼•å…¥æ—¥å¿—æ¡†æ¶" class="headerlink" title="2.7 å¼•å…¥æ—¥å¿—æ¡†æ¶"></a>2.7 å¼•å…¥æ—¥å¿—æ¡†æ¶</h3><ul>
<li><p>å¼•â¼Šâ½‡å¿—æ¡†æ¶çš„â½¬çš„æ˜¯ä¸ºäº†çœ‹æ¸…æ¥šmybatisæ‰§â¾çš„å…·ä½“sqlã€‚ </p>
</li>
<li><p>å¯â½¤æ ‡å‡†â½‡å¿—ç»„ä»¶ï¼Œåªéœ€è¦åœ¨mybatis-config.xmlâ½‚ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼šã€å¯å‚è€ƒmybatisâ¼¿å†Œã€‘</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ ‡å‡†â½‡å¿—ä¹Ÿå¯ä»¥â½¤ï¼Œä½†æ˜¯é…ç½®ä¸å¤Ÿçµæ´»ï¼Œå¯ä»¥é›†æˆå…¶ä»–çš„â½‡å¿—ç»„ä»¶ï¼Œä¾‹å¦‚ï¼šlog4jï¼Œlogbackç­‰ã€‚ </p>
<ul>
<li><p>logbackæ˜¯â½¬å‰â½‡å¿—æ¡†æ¶ä¸­æ€§èƒ½è¾ƒå¥½çš„ï¼Œè¾ƒæµâ¾çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰å®ƒã€‚ </p>
</li>
<li><p>å¼•â¼Šlogbackçš„æ­¥éª¤ï¼š</p>
<ul>
<li><p>ç¬¬â¼€æ­¥ï¼šå¼•â¼Šlogbackç›¸å…³ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>ç¬¬â¼†æ­¥ï¼šå¼•â¼Šlogbackç›¸å…³é…ç½®â½‚ä»¶ï¼ˆâ½‚ä»¶åå«åšlogback.xmlæˆ–logback-test.xmlï¼Œæ”¾åˆ°ç±»è·¯å¾„ </p>
<p>å½“ä¸­ï¼‰ </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">debug</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--å®šä¹‰â½‡å¿—â½‚ä»¶çš„å­˜å‚¨åœ°å€--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;LOG_HOME&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/home&quot;</span>/&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- æ§åˆ¶å°è¾“å‡º --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncode</span></span></span><br><span class="line"><span class="string"><span class="tag">r&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--æ ¼å¼åŒ–è¾“å‡ºï¼š%dè¡¨ç¤ºâ½‡æœŸï¼Œ%threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ%-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5 ä¸ªå­—ç¬¦å®½åº¦%msgï¼šâ½‡å¿—æ¶ˆæ¯ï¼Œ%næ˜¯æ¢â¾ç¬¦--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logge</span><br><span class="line">r&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- æŒ‰ç…§æ¯å¤©â½£æˆâ½‡å¿—â½‚ä»¶ --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAp</span></span></span><br><span class="line"><span class="string"><span class="tag">pender&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRolling</span></span></span><br><span class="line"><span class="string"><span class="tag">Policy&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--â½‡å¿—â½‚ä»¶è¾“å‡ºçš„â½‚ä»¶å--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">FileNamePattern</span>&gt;</span>$&#123;LOG_HOME&#125;/TestWeb.log.%d&#123;yyyy-MM-dd&#125;.log&lt;/F</span><br><span class="line">ileNamePattern&gt;</span><br><span class="line"> <span class="comment">&lt;!--â½‡å¿—â½‚ä»¶ä¿ç•™å¤©æ•°--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">MaxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">MaxHistory</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncode</span></span></span><br><span class="line"><span class="string"><span class="tag">r&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--æ ¼å¼åŒ–è¾“å‡ºï¼š%dè¡¨ç¤ºâ½‡æœŸï¼Œ%threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ%-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5 ä¸ªå­—ç¬¦å®½åº¦%msgï¼šâ½‡å¿—æ¶ˆæ¯ï¼Œ%næ˜¯æ¢â¾ç¬¦--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logge</span><br><span class="line">r&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--â½‡å¿—â½‚ä»¶æœ€â¼¤çš„â¼¤â¼©--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">triggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeBasedTrig</span></span></span><br><span class="line"><span class="string"><span class="tag">geringPolicy&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">MaxFileSize</span>&gt;</span>100MB<span class="tag">&lt;/<span class="name">MaxFileSize</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">triggeringPolicy</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--mybatis log configure--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;com.apache.ibatis&quot;</span> <span class="attr">level</span>=<span class="string">&quot;TRACE&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.Connection&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.Statement&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.PreparedStatement&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">å†æ¬¡æ‰§â¾å•å…ƒæµ‹è¯•â½…æ³•testInsertCarï¼ŒæŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰sqlè¯­å¥è¾“å‡º æ¯â¼€æ¬¡è·å–SqlSessionå¯¹è±¡ä»£ç å¤ªç¹çï¼Œå°è£…â¼€ä¸ªâ¼¯å…·ç±» â— â—‹ 2.8 MyBatisâ¼¯å…·ç±»SqlSessionUtilçš„å°è£… â—</span><br><span class="line"> <span class="comment">&lt;!-- â½‡å¿—è¾“å‡ºçº§åˆ«,logbackâ½‡å¿—çº§åˆ«åŒ…æ‹¬äº”ä¸ªï¼šTRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ER</span></span><br><span class="line"><span class="comment">ROR --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span>		</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>å†æ¬¡æ‰§â¾å•å…ƒæµ‹è¯•â½…æ³•testInsertCarï¼ŒæŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰sqlè¯­å¥è¾“å‡º </li>
</ul>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220917234236235.png" alt="image-20220917234236235" style="zoom:80%;" /></p>
<h3 id="2-8-MyBatiså·¥å…·ç±»SessionUtilsçš„å°è£…"><a href="#2-8-MyBatiså·¥å…·ç±»SessionUtilsçš„å°è£…" class="headerlink" title="2.8 MyBatiså·¥å…·ç±»SessionUtilsçš„å°è£…"></a>2.8 MyBatiså·¥å…·ç±»SessionUtilsçš„å°è£…</h3><blockquote>
<p>å¤§å®¶åº”è¯¥å¯ä»¥å‘ç°ï¼Œæ¯å½“æˆ‘ä»¬è¿›è¡ŒCEUDçš„æ—¶å€™ï¼Œä¼šå‘ç°æˆ‘ä»¬æ¯æ¬¡è·å–SqlSessionéƒ½éœ€è¦å¾ˆç¹æ‚çš„ä»£ç ï¼Œæ‰€ä»¥æ­¤æ—¶å°±éœ€è¦ä¸€ä¸ªå·¥å…·ç±»æ¥å¸®æˆ‘ä»¬å®Œæˆï¼Œä»¥åè·å–SqlSessionæ—¶ç›´æ¥è°ƒç”¨å³å¯ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.manman.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Gaoziman</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * description:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/17 16:44</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SqlSessionUtil</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  SqlSession sqlSession;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç±»åŠ è½½æ—¶åˆå§‹åŒ–sqlSessionFactoryå¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            sqlSessionFactory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¯è°ƒâ½¤â¼€æ¬¡openSession()å¯è·å–â¼€ä¸ªæ–°çš„ä¼šè¯ï¼Œè¯¥ä¼šè¯â½€æŒâ¾ƒåŠ¨æäº¤ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ–°çš„ä¼šè¯å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession  <span class="title function_">getSqlSession</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (sqlSessionFactory != <span class="literal">null</span>)&#123;</span><br><span class="line">             sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sqlSession;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•â¼¯å…·ç±»ï¼Œå°†testInsertCar()æ”¹é€ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * description : æµ‹è¯•å·¥å…·ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsert</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>);</span><br><span class="line">        System.out.println( <span class="string">&quot;å—å½±å“çš„è¡Œæ•°ä¸º : &quot;</span> + count);</span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬ä¸‰ç« -ä½¿ç”¨MyBatiså®ŒæˆCRUD"><a href="#ç¬¬ä¸‰ç« -ä½¿ç”¨MyBatiså®ŒæˆCRUD" class="headerlink" title="ç¬¬ä¸‰ç«  ä½¿ç”¨MyBatiså®ŒæˆCRUD"></a>ç¬¬ä¸‰ç«  ä½¿ç”¨MyBatiså®ŒæˆCRUD</h2><ul>
<li>å‡†å¤‡â¼¯ä½œ<ul>
<li>åˆ›å»ºmoduleï¼ˆMavençš„æ™®é€šJavaæ¨¡å—ï¼‰ï¼šmybatis-002-crud </li>
<li>pom.xml <ul>
<li>æ‰“åŒ…â½…å¼jar </li>
<li>ä¾èµ–ï¼š<ul>
<li>mybatisä¾èµ– </li>
<li>mysqlé©±åŠ¨ä¾èµ– </li>
<li>junitä¾èµ– </li>
<li>logbackä¾èµ– </li>
</ul>
</li>
</ul>
</li>
<li>mybatis-config.xmlæ”¾åœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹ </li>
<li>CarMapper.xmlæ”¾åœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹ </li>
<li>logback.xmlæ”¾åœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹ </li>
<li>æä¾›com.powernode.mybatis.utils.SqlSessionUtilâ¼¯å…·ç±» </li>
<li>åˆ›å»ºæµ‹è¯•â½¤ä¾‹ï¼šcom.powernode.mybatis.CarMapperTest</li>
</ul>
</li>
</ul>
<h3 id="3-1-Inser-Create"><a href="#3-1-Inser-Create" class="headerlink" title="3.1 Inser(Create)"></a>3.1 Inser(Create)</h3><p>åˆ†æä»¥ä¸‹SQLæ˜ å°„â½‚ä»¶ä¸­SQLè¯­å¥å­˜åœ¨çš„é—®é¢˜</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--namespaceå…ˆéšä¾¿å†™--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertCar&quot;</span>&gt;</span></span><br><span class="line"> insert into t_car(car_num,brand,guide_price,produce_time,car_typ</span><br><span class="line">e) values(&#x27;103&#x27;, &#x27;å¥”é©°E300L&#x27;, 50.3, &#x27;2022-01-01&#x27;, &#x27;ç‡ƒæ²¹â»‹&#x27;)</span><br><span class="line"> <span class="tag">&lt;/<span class="name">insert</span>&gt;</span>	</span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å­˜åœ¨çš„é—®é¢˜æ˜¯ï¼šSQLè¯­å¥ä¸­çš„å€¼ä¸åº”è¯¥å†™æ­»ï¼Œå€¼åº”è¯¥æ˜¯â½¤æˆ·æä¾›çš„ã€‚ä¹‹å‰çš„JDBCä»£ç æ˜¯è¿™æ ·å†™çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JDBCä¸­ä½¿â½¤ ? ä½œä¸ºå ä½ç¬¦ã€‚é‚£ä¹ˆMyBatisä¸­ä¼šä½¿â½¤ä»€ä¹ˆä½œä¸ºå ä½ç¬¦å‘¢ï¼Ÿ</span></span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_car(car_num,brand,guide_price,produce_time,car_</span></span><br><span class="line"><span class="string">type) values(?,?,?,?,?)&quot;</span>;</span><br><span class="line"><span class="comment">// ......</span></span><br><span class="line"><span class="comment">// ç»™ ? ä¼ å€¼ã€‚é‚£ä¹ˆMyBatisä¸­åº”è¯¥æ€ä¹ˆä¼ å€¼å‘¢ï¼Ÿ</span></span><br><span class="line">ps.setString(<span class="number">1</span>,<span class="string">&quot;103&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">2</span>,<span class="string">&quot;å¥”é©°E300L&quot;</span>);</span><br><span class="line">ps.setDouble(<span class="number">3</span>,<span class="number">50.3</span>);</span><br><span class="line">ps.setString(<span class="number">4</span>,<span class="string">&quot;2022-01-01&quot;</span>);</span><br><span class="line">ps.setString(<span class="number">5</span>,<span class="string">&quot;ç‡ƒæ²¹â»‹&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>åœ¨MyBatisä¸­å¯ä»¥è¿™æ ·åšï¼š </p>
<font color='red'>åœ¨Javaç¨‹åºä¸­ï¼Œå°†æ•°æ®æ”¾åˆ°Mapé›†åˆä¸­ </font>

<font color='red'>åœ¨sqlè¯­å¥ä¸­ä½¿â½¤ #{mapé›†åˆçš„key} æ¥å®Œæˆä¼ å€¼ï¼Œ#{} ç­‰åŒäºJDBCä¸­çš„ ? ï¼Œ#{}å°±æ˜¯å ä½ç¬¦ </font>

<p>Javaç¨‹åºè¿™æ ·å†™ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.utils.SqlSessionUtil;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµ‹è¯•MyBatisçš„CRUD</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> manman</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CarMapperTest</span> &#123;</span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertCar</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="comment">// å‡†å¤‡æ•°æ®</span></span><br><span class="line"> Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"> map.put(<span class="string">&quot;carNum&quot;</span>, <span class="string">&quot;103&quot;</span>);</span><br><span class="line"> map.put(<span class="string">&quot;brand&quot;</span>, <span class="string">&quot;å¥”é©°E300L&quot;</span>);</span><br><span class="line"> map.put(<span class="string">&quot;guidePrice&quot;</span>, <span class="number">50.3</span>);</span><br><span class="line"> map.put(<span class="string">&quot;produceTime&quot;</span>, <span class="string">&quot;2020-10-01&quot;</span>);</span><br><span class="line"> map.put(<span class="string">&quot;carType&quot;</span>, <span class="string">&quot;ç‡ƒæ²¹â»‹&quot;</span>);</span><br><span class="line"> <span class="comment">// è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line"> <span class="comment">// æ‰§â¾SQLè¯­å¥ï¼ˆä½¿â½¤mapé›†åˆç»™sqlè¯­å¥ä¼ é€’æ•°æ®ï¼‰</span></span><br><span class="line"> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>, map);</span><br><span class="line"> System.out.println(<span class="string">&quot;æ’â¼Šäº†â¼æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line"> &#125; &#125;</span><br></pre></td></tr></table></figure>
<p>SQLè¯­å¥æ˜¯è¿™æ ·å†™çš„ ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--namespaceå…ˆéšä¾¿å†™--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertCar&quot;</span>&gt;</span></span><br><span class="line"> insert into t_car(car_num,brand,guide_price,produce_time,car_typ</span><br><span class="line">e) values(#&#123;carNum&#125;,#&#123;brand&#125;,#&#123;guidePrice&#125;,#&#123;produceTime&#125;,#&#123;carType&#125;)</span><br><span class="line"> <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ ï¼š æˆ‘ä»¬åœ¨ç»™keyå€¼èµ·åçš„æ—¶å€™ï¼Œä¸€å®šè¦è§åçŸ¥æ„ï¼Œä¸è¦ä½¿ç”¨k1.k2.k3.k4â€¦..ç±»ä¼¼è¿™æ ·çš„åå­—</p>
</blockquote>
<font color='red'>#{} çš„â¾¥â¾¯å¿…é¡»å¡«å†™mapé›†åˆçš„keyï¼Œä¸èƒ½éšä¾¿å†™ã€‚</font>è¿â¾æµ‹è¯•ç¨‹åºï¼ŒæŸ¥çœ‹æ•°æ®åº“ï¼š 

<img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220918143607020.png" alt="image-20220918143607020" style="zoom:80%;" />

å¦‚æœ#{}â¾¥å†™çš„æ˜¯mapé›†åˆä¸­ä¸å­˜åœ¨çš„keyä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ 

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--namespaceå…ˆéšä¾¿å†™--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertCar&quot;</span>&gt;</span></span><br><span class="line"> insert into t_car(car_num,brand,guide_price,produce_time,car_typ</span><br><span class="line">e) values(#&#123;carNum1&#125;,#&#123;brand&#125;,#&#123;guidePrice&#125;,#&#123;produceTime&#125;,#&#123;carType&#125;)</span><br><span class="line"> <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

è¿è¡Œç¨‹åº ï¼š 

<img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220918143744411.png" alt="image-20220918143744411" style="zoom:80%;" />

<img src="C:\Users\lemon\AppData\Roaming\Typora\typora-user-images\image-20220918143812382.png" alt="image-20220918143812382" style="zoom:80%;" />

é€šè¿‡æµ‹è¯•ï¼Œçœ‹åˆ°ç¨‹åºå¹¶æ²¡æœ‰æŠ¥é”™ã€‚æ­£å¸¸æ‰§â¾ã€‚ä¸è¿‡ #{kk} çš„å†™æ³•å¯¼è‡´â½†æ³•è·å–åˆ°mapé›†åˆä¸­çš„æ•°æ®ï¼Œæœ€ç»ˆ 

å¯¼è‡´æ•°æ®åº“è¡¨car_numæ’â¼Šäº†NULLã€‚ 



ä½¿â½¤Mapé›†åˆå¯ä»¥ä¼ å‚ï¼Œé‚£ä½¿â½¤ <font color='red'>pojo</font>ï¼ˆç®€å•æ™®é€šçš„javaå¯¹è±¡ï¼‰å¯ä»¥å®Œæˆä¼ å‚å—ï¼Ÿæµ‹è¯•â¼€ä¸‹ï¼š

â— ç¬¬â¼€æ­¥ï¼šå®šä¹‰â¼€ä¸ªpojoç±»Carï¼Œæä¾›ç›¸å…³å±æ€§ã€‚

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.manman.pojo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Gaoziman</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * description:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/18 0:54</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String carNum;</span><br><span class="line">    <span class="keyword">private</span> String brand;</span><br><span class="line">    <span class="keyword">private</span> Double guidePrice;</span><br><span class="line">    <span class="keyword">private</span> String produceTime;</span><br><span class="line">    <span class="keyword">private</span> String carType;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Car&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, carNum=&#x27;&quot;</span> + carNum + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, brand=&#x27;&quot;</span> + brand + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, guidePrice=&quot;</span> + guidePrice +</span><br><span class="line">                <span class="string">&quot;, produceTime=&#x27;&quot;</span> + produceTime + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, carType=&#x27;&quot;</span> + carType + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">(Long id, String carNum, String brand, Double guidePrice, String produceTime, String carType)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.carNum = carNum;</span><br><span class="line">        <span class="built_in">this</span>.brand = brand;</span><br><span class="line">        <span class="built_in">this</span>.guidePrice = guidePrice;</span><br><span class="line">        <span class="built_in">this</span>.produceTime = produceTime;</span><br><span class="line">        <span class="built_in">this</span>.carType = carType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCarNum</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> carNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCarNum</span><span class="params">(String carNum)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.carNum = carNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getBrand</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> brand;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBrand</span><span class="params">(String brand)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.brand = brand;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getGuidePrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> guidePrice;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGuidePrice</span><span class="params">(Double guidePrice)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.guidePrice = guidePrice;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getProduceTime</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> produceTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setProduceTime</span><span class="params">(String produceTime)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.produceTime = produceTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCarType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> carType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCarType</span><span class="params">(String carType)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.carType = carType;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

- ç¬¬äºŒæ­¥ ï¼šJavaå°ç¨‹åº



  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertCarByPOJO</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="comment">// åˆ›å»ºPOJOï¼Œå°è£…æ•°æ®</span></span><br><span class="line"> <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line"> car.setCarNum(<span class="string">&quot;103&quot;</span>);</span><br><span class="line"> car.setBrand(<span class="string">&quot;å¥”é©°C200&quot;</span>);</span><br><span class="line"> car.setGuidePrice(<span class="number">33.23</span>);</span><br><span class="line"> car.setProduceTime(<span class="string">&quot;2020-10-11&quot;</span>);</span><br><span class="line"> car.setCarType(<span class="string">&quot;ç‡ƒæ²¹â»‹&quot;</span>);</span><br><span class="line"> <span class="comment">// è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line"> <span class="comment">// æ‰§â¾SQLï¼Œä¼ æ•°æ®</span></span><br><span class="line"> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCarByPOJO&quot;</span>, car);</span><br><span class="line"> System.out.println(<span class="string">&quot;æ’â¼Šäº†â¼æ¡è®°å½•&quot;</span> + count); &#125;</span><br></pre></td></tr></table></figure>

- ç¬¬ä¸‰æ­¥ ï¼šSQLè¯­å¥

  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertCarByPOJO&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--#&#123;&#125; â¾¥å†™çš„æ˜¯POJOçš„å±æ€§å--&gt;</span></span><br><span class="line"> insert into t_car(car_num,brand,guide_price,produce_time,car_type) values</span><br><span class="line">(#&#123;carNum&#125;,#&#123;brand&#125;,#&#123;guidePrice&#125;,#&#123;produceTime&#125;,#&#123;carType&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

- è¿è¡Œç¨‹åº ï¼ŒæŸ¥çœ‹æ•°æ®åº“è¡¨ ï¼š

  <img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220918144142493.png" alt="image-20220918144142493" style="zoom:67%;" />

\#{} â¾¥å†™çš„æ˜¯POJOçš„å±æ€§åï¼Œå¦‚æœå†™æˆå…¶ä»–çš„ä¼šæœ‰é—®é¢˜å—ï¼Ÿ 

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertCarByPOJO&quot;</span>&gt;</span></span><br><span class="line"> insert into t_car(car_num,brand,guide_price,produce_time,car_type) values</span><br><span class="line">(#&#123;a&#125;,#&#123;brand&#125;,#&#123;guidePrice&#125;,#&#123;produceTime&#125;,#&#123;carType&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220918144219130.png" alt="image-20220918144219130" style="zoom: 80%;" />

é”™è¯¯ä¿¡æ¯ä¸­æè¿°ï¼šåœ¨Carç±»ä¸­æ²¡æœ‰æ‰¾åˆ°aå±æ€§çš„getterâ½…æ³•ã€‚ 

ä¿®æ”¹POJOç±»Carçš„ä»£ç ï¼Œ<font color='red'>åªå°†getCarNum()â½…æ³•åä¿®æ”¹ä¸ºgetA()</font>ï¼Œå…¶ä»–ä»£ç ä¸å˜ï¼Œå¦‚ä¸‹ï¼š

<img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220918144316193.png" alt="image-20220918144316193" style="zoom:80%;" />

- å†è¿è¡Œç¨‹åºï¼ŒæŸ¥çœ‹æ•°æ®è¡¨ ï¼š

  ![](https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220918144343720.png)



<font style="color:red;">ç»è¿‡æµ‹è¯•å¾—å‡ºç»“è®ºï¼š </font>

<font style="color:red;">å¦‚æœé‡‡â½¤mapé›†åˆä¼ å‚ï¼Œ#{} â¾¥å†™çš„æ˜¯mapé›†åˆçš„keyï¼Œå¦‚æœkeyä¸å­˜åœ¨ä¸ä¼šæŠ¥é”™ï¼Œæ•°æ®åº“è¡¨ä¸­ä¼šæ’ â¼ŠNULLã€‚  </font>

<font style="color:red;">å¦‚æœé‡‡â½¤POJOä¼ å‚ï¼Œ#{} â¾¥å†™çš„æ˜¯getâ½…æ³•çš„â½…æ³•åå»æ‰getä¹‹åå°†å‰©ä¸‹çš„å•è¯â¾¸å­—âºŸå˜â¼©å†™ï¼ˆä¾‹ å¦‚ï¼šgetAgeå¯¹åº”çš„æ˜¯#{age}ï¼ŒgetUserNameå¯¹åº”çš„æ˜¯#{userName}ï¼‰ï¼Œå¦‚æœè¿™æ ·çš„getâ½…æ³•ä¸å­˜åœ¨ä¼šæŠ¥é”™ã€‚ </font>



<blockquote>
<p>æ³¨æ„ï¼šå…¶å®ä¼ å‚æ•°çš„æ—¶å€™æœ‰â¼€ä¸ªå±æ€§parameterTypeï¼Œè¿™ä¸ªå±æ€§â½¤æ¥æŒ‡å®šä¼ å‚çš„æ•°æ®ç±»å‹ï¼Œä¸è¿‡è¿™ä¸ªå± </p>
<p>æ€§æ˜¯å¯ä»¥çœç•¥çš„ </p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertCar&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.util.Map&quot;</span>&gt;</span></span><br><span class="line"> insert into t_car(car_num,brand,guide_price,produce_time,car_type) values</span><br><span class="line">(#&#123;carNum&#125;,#&#123;brand&#125;,#&#123;guidePrice&#125;,#&#123;produceTime&#125;,#&#123;carType&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span> <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertCarByPOJO&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.manman.pojo.Car&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line"> insert into t_car(car_num,brand,guide_price,produce_time,car_type) values</span><br><span class="line">(#&#123;carNum&#125;,#&#123;brand&#125;,#&#123;guidePrice&#125;,#&#123;produceTime&#125;,#&#123;carType&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-2-delete-Delete"><a href="#3-2-delete-Delete" class="headerlink" title="3.2 delete(Delete)"></a>3.2 delete(Delete)</h3><p>éœ€æ±‚ï¼šæ ¹æ®car_numè¿›â¾åˆ é™¤ã€‚ </p>
<p>SQLè¯­å¥è¿™æ ·å†™ï¼š </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByCarNum&quot;</span>&gt;</span></span><br><span class="line"> delete from t_car where car_num = #&#123;SuiBianXie&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Javaç¨‹åºå®åœ¨è¿™æ ·å†™çš„ ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteByCarNum</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="comment">// è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line"> <span class="comment">// æ‰§â¾SQLè¯­å¥</span></span><br><span class="line"> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.delete(<span class="string">&quot;deleteByCarNum&quot;</span>, <span class="string">&quot;102&quot;</span>);</span><br><span class="line"> System.out.println(<span class="string">&quot;åˆ é™¤äº†â¼æ¡è®°å½•ï¼š&quot;</span> + count); &#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220918144913436.png" alt="image-20220918144913436" style="zoom:80%;" /></p>
<font color='red'>æ³¨æ„ï¼šå½“å ä½ç¬¦åªæœ‰â¼€ä¸ªçš„æ—¶å€™ï¼Œ${} â¾¥â¾¯çš„å†…å®¹å¯ä»¥éšä¾¿å†™ã€‚ </font>



<h3 id="3-3-update-Update"><a href="#3-3-update-Update" class="headerlink" title="3.3 update(Update)"></a>3.3 update(Update)</h3><p>éœ€æ±‚ï¼šä¿®æ”¹id=34çš„Carä¿¡æ¯ï¼Œcar_numä¸º102ï¼Œbrandä¸ºâ½äºšè¿ªæ±‰ï¼Œguide_priceä¸º30.23ï¼Œproduce_time </p>
<p>ä¸º2018-09-10ï¼Œcar_typeä¸ºç”µâ»‹ </p>
<p>ä¿®æ”¹å‰ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220918145015975.png" alt="image-20220918145015975" style="zoom:80%;" /></p>
<p>SQLè¯­å¥å¦‚ä¸‹ ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateCarByPOJO&quot;</span>&gt;</span></span><br><span class="line"> update t_car set</span><br><span class="line"> car_num = #&#123;carNum&#125;, brand = #&#123;brand&#125;,</span><br><span class="line"> guide_price = #&#123;guidePrice&#125;, produce_time = #&#123;produceTime&#125;,</span><br><span class="line"> car_type = #&#123;carType&#125;</span><br><span class="line"> where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Javaä»£ç å¦‚ä¸‹ ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdateCarByPOJO</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="comment">// å‡†å¤‡æ•°æ®</span></span><br><span class="line"> <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line"> car.setId(<span class="number">34L</span>);</span><br><span class="line"> car.setCarNum(<span class="string">&quot;102&quot;</span>);</span><br><span class="line"> car.setBrand(<span class="string">&quot;â½äºšè¿ªæ±‰&quot;</span>);</span><br><span class="line"> car.setGuidePrice(<span class="number">30.23</span>);</span><br><span class="line"> car.setProduceTime(<span class="string">&quot;2018-09-10&quot;</span>);</span><br><span class="line"> car.setCarType(<span class="string">&quot;ç”µâ»‹&quot;</span>);</span><br><span class="line"> <span class="comment">// è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line"> <span class="comment">// æ‰§â¾SQLè¯­å¥</span></span><br><span class="line"> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.update(<span class="string">&quot;updateCarByPOJO&quot;</span>, car);</span><br><span class="line"> System.out.println(<span class="string">&quot;æ›´æ–°äº†â¼æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220918145118660.png" alt="image-20220918145118660"></p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220918145128215.png" alt="image-20220918145128215"></p>
<blockquote>
<p>å½“ç„¶äº†ï¼Œå¦‚æœä½¿â½¤mapä¼ æ•°æ®ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ </p>
</blockquote>
<h3 id="3-4-select-Retrieve"><a href="#3-4-select-Retrieve" class="headerlink" title="3.4 select(Retrieve)"></a>3.4 select(Retrieve)</h3><p>selectè¯­å¥å’Œå…¶å®ƒè¯­å¥ä¸åŒçš„æ˜¯ï¼šæŸ¥è¯¢ä¼šæœ‰â¼€ä¸ªç»“æœé›†ã€‚æ¥çœ‹mybatisæ˜¯æ€ä¹ˆå¤„ç†ç»“æœé›†çš„ï¼ï¼ï¼</p>
<p><strong>æŸ¥è¯¢ä¸€æ¡è¯­å¥</strong></p>
<p>éœ€æ±‚ï¼šæŸ¥è¯¢idä¸º1çš„Carä¿¡æ¯ </p>
<p>SQLè¯­å¥å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectCarById&quot;</span>&gt;</span></span><br><span class="line"> select * from t_car where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Javaç¨‹åºå¦‚ä¸‹ ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectCarById</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="comment">// è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line"> <span class="comment">// æ‰§â¾SQLè¯­å¥</span></span><br><span class="line"> <span class="type">Object</span> <span class="variable">car</span> <span class="operator">=</span> sqlSession.selectOne(<span class="string">&quot;selectCarById&quot;</span>, <span class="number">1</span>);</span><br><span class="line"> System.out.println(car); &#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœå¦‚ä¸‹ ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### Error querying database. Cause: org.apache.ibatis.executor.ExecutorExc</span></span><br><span class="line">eption:</span><br><span class="line"> A query was run and no Result Maps were found <span class="keyword">for</span> the Mapped Statement</span><br><span class="line"><span class="string">&#x27;car.selectCarById&#x27;</span>. ã€ç¿»è¯‘ã€‘ï¼šå¯¹äºâ¼€ä¸ªæŸ¥è¯¢è¯­å¥æ¥è¯´ï¼Œæ²¡æœ‰æ‰¾åˆ°æŸ¥è¯¢çš„ç»“æœæ˜ å°„ã€‚</span><br><span class="line"> It<span class="string">&#x27;s likely that neither a Result Type nor a Result Map was specified. ã€ç¿»è¯‘ã€‘ï¼šå¾ˆå¯èƒ½æ—¢æ²¡æœ‰æŒ‡å®šç»“æœç±»å‹ï¼Œä¹Ÿæ²¡æœ‰æŒ‡å®šç»“æœæ˜ å°„ã€‚</span></span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šçš„å¼‚å¸¸â¼¤è‡´çš„æ„æ€æ˜¯ï¼šå¯¹äºâ¼€ä¸ªæŸ¥è¯¢è¯­å¥æ¥è¯´ï¼Œä½ éœ€è¦æŒ‡å®šå®ƒçš„â€œç»“æœç±»å‹â€æˆ–è€…â€œç»“æœæ˜ å°„â€ã€‚ </p>
<p>æ‰€ä»¥è¯´ï¼Œä½ æƒ³è®©mybatisæŸ¥è¯¢ä¹‹åè¿”å›â¼€ä¸ªJavaå¯¹è±¡çš„è¯ï¼Œâ¾„å°‘ä½ è¦å‘Šè¯‰mybatisè¿”å›â¼€ä¸ªä»€ä¹ˆç±»å‹çš„ </p>
<p>Javaå¯¹è±¡ï¼Œå¯ä»¥åœ¨<select>æ ‡ç­¾ä¸­æ·»åŠ resultTypeå±æ€§ï¼Œâ½¤æ¥æŒ‡å®šæŸ¥è¯¢è¦è½¬æ¢çš„ç±»å‹ï¼š </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectCarById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.manman.pojo.Car&quot;</span>&gt;</span></span><br><span class="line"> select * from t_car where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220918145418402.png" alt="image-20220918145418402" style="zoom:80%;" /></p>
<p>è¿â¾åä¹‹å‰çš„å¼‚å¸¸ä¸å†å‡ºç°äº†ï¼Œè¿™è¯´æ˜æ·»åŠ äº†resultTypeå±æ€§ä¹‹åï¼Œè§£å†³äº†ä¹‹å‰çš„å¼‚å¸¸ï¼Œå¯ä»¥çœ‹å‡º </p>
<p>resultTypeæ˜¯ä¸èƒ½çœç•¥çš„ã€‚ </p>
<p>ä»”ç»†è§‚å¯Ÿæ§åˆ¶å°çš„â½‡å¿—ä¿¡æ¯ï¼Œä¸éš¾çœ‹å‡ºï¼Œç»“æœæŸ¥è¯¢å‡ºäº†â¼€æ¡ã€‚å¹¶ä¸”æ¯ä¸ªå­—æ®µéƒ½æŸ¥è¯¢åˆ°å€¼äº†ï¼šRow: 1, 100, å®â»¢520Li, 41.00, 2022-09-01, ç‡ƒæ²¹â»‹ </p>
<p>ä½†æ˜¯å¥‡æ€ªçš„æ˜¯è¿”å›çš„Carå¯¹è±¡ï¼Œåªæœ‰idå’Œbrandä¸¤ä¸ªå±æ€§æœ‰å€¼ï¼Œå…¶å®ƒå±æ€§çš„å€¼éƒ½æ˜¯nullï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ ä»¬æ¥è§‚å¯Ÿâ¼€ä¸‹æŸ¥è¯¢ç»“æœåˆ—åå’ŒCarç±»çš„å±æ€§åæ˜¯å¦èƒ½â¼€â¼€å¯¹åº”ï¼š </p>
<p>æŸ¥è¯¢ç»“æœé›†çš„åˆ—åï¼šid, car_num, brand, guide_price, produce_time, car_type </p>
<p>Carç±»çš„å±æ€§åï¼šid, carNum, brand, guidePrice, produceTime, carType</p>
<p>é€šè¿‡è§‚å¯Ÿå‘ç°ï¼šåªæœ‰idå’Œbrandæ˜¯â¼€è‡´çš„ï¼Œå…¶ä»–å­—æ®µåå’Œå±æ€§åå¯¹åº”ä¸ä¸Šï¼Œè¿™æ˜¯ä¸æ˜¯å¯¼è‡´nullçš„åŸå› å‘¢ï¼Ÿ </p>
<p>æˆ‘ä»¬å°è¯•åœ¨sqlè¯­å¥ä¸­ä½¿â½¤aså…³é”®å­—æ¥ç»™æŸ¥è¯¢ç»“æœåˆ—åèµ·åˆ«åè¯•è¯• ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectCarById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.powernode.mybatis.pojo.Car&quot;</span>&gt;</span></span><br><span class="line"> select</span><br><span class="line"> id, car_num as carNum, brand, guide_price as guidePrice, produce_time a</span><br><span class="line">s produceTime, car_type as carType</span><br><span class="line"> from</span><br><span class="line"> t_car</span><br><span class="line"> where</span><br><span class="line"> id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœå¦‚ä¸‹ ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220918145512215.png" alt="image-20220918145512215"></p>
<p>é€šè¿‡æµ‹è¯•å¾—çŸ¥ï¼Œå¦‚æœå½“æŸ¥è¯¢ç»“æœçš„å­—æ®µåå’Œjavaç±»çš„å±æ€§åå¯¹åº”ä¸ä¸Šçš„è¯ï¼Œå¯ä»¥é‡‡â½¤aså…³é”®å­—èµ·åˆ«åï¼Œ </p>
<p>å½“ç„¶è¿˜æœ‰å…¶å®ƒè§£å†³â½…æ¡ˆï¼Œæˆ‘ä»¬åâ¾¯å†çœ‹ã€‚ </p>
<p><strong>æŸ¥è¯¢æ‰€æœ‰æ•°æ®</strong></p>
<p>éœ€æ±‚ï¼šæŸ¥è¯¢æ‰€æœ‰çš„Carä¿¡æ¯ã€‚ </p>
<p>SQLè¯­å¥å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--è™½ç„¶ç»“æœæ˜¯Listé›†åˆï¼Œä½†æ˜¯resultTypeå±æ€§éœ€è¦æŒ‡å®šçš„æ˜¯Listé›†åˆä¸­å…ƒç´ çš„ç±»å‹ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectCarAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.powernode.mybatis.pojo.Car&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--è®°å¾—ä½¿â½¤asèµ·åˆ«åï¼Œè®©æŸ¥è¯¢ç»“æœçš„å­—æ®µåå’Œjavaç±»çš„å±æ€§åå¯¹åº”ä¸Šã€‚--&gt;</span></span><br><span class="line"> select</span><br><span class="line"> id, car_num as carNum, brand, guide_price as guidePrice, produce_time a</span><br><span class="line">s produceTime, car_type as carType</span><br><span class="line"> from</span><br><span class="line"> t_car</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Javaä»£ç å¦‚ä¸‹ ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectCarAll</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="comment">// è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line"> <span class="comment">// æ‰§â¾SQLè¯­å¥</span></span><br><span class="line"> List&lt;Object&gt; cars = sqlSession.selectList(<span class="string">&quot;selectCarAll&quot;</span>);</span><br><span class="line"> <span class="comment">// è¾“å‡ºç»“æœ</span></span><br><span class="line"> cars.forEach(car -&gt; System.out.println(car)); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220918145621950.png" alt="image-20220918145621950" style="zoom:80%;" /></p>
<h3 id="3-5-å…³äºSQLä¸­çš„namespace"><a href="#3-5-å…³äºSQLä¸­çš„namespace" class="headerlink" title="3.5 å…³äºSQLä¸­çš„namespace"></a>3.5 å…³äºSQLä¸­çš„namespace</h3><p>åœ¨SQL Mapperé…ç½®â½‚ä»¶ä¸­<mapper>æ ‡ç­¾çš„namespaceå±æ€§å¯ä»¥ç¿»è¯‘ä¸ºå‘½åç©ºé—´ï¼Œè¿™ä¸ªå‘½åç©ºé—´ä¸»è¦æ˜¯</p>
<p>ä¸ºäº†é˜²â½ŒsqlIdå†²çªçš„ã€‚ </p>
<p>åˆ›å»ºCarMapper2.xmlâ½‚ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;car2&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectCarAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.powernode.manman.pojo.Car&quot;</span>&gt;</span></span><br><span class="line"> select</span><br><span class="line"> id, car_num as carNum, brand, guide_price as guidePrice, produ</span><br><span class="line">ce_time as produceTime, car_type as carType</span><br><span class="line"> from</span><br><span class="line"> t_car</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¸éš¾çœ‹å‡ºï¼ŒCarMapper.xmlå’ŒCarMapper2.xmlâ½‚ä»¶ä¸­éƒ½æœ‰ id=â€selectCarAllâ€ </p>
<p>å°†CarMapper2.xmlé…ç½®åˆ°mybatis-config.xmlâ½‚ä»¶ä¸­ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper2.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç¼–å†™Javaä»£ç å¦‚ä¸‹ ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testNamespace</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="comment">// è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line"> <span class="comment">// æ‰§â¾SQLè¯­å¥</span></span><br><span class="line"> List&lt;Object&gt; cars = sqlSession.selectList(<span class="string">&quot;selectCarAll&quot;</span>);</span><br><span class="line"> <span class="comment">// è¾“å‡ºç»“æœ</span></span><br><span class="line"> cars.forEach(car -&gt; System.out.println(car)); &#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">org.apache.ibatis.exceptions.PersistenceException:</span><br><span class="line"><span class="comment">### Error querying database. Cause: java.lang.IllegalArgumentException:</span></span><br><span class="line"> selectCarAll is ambiguous <span class="keyword">in</span> Mapped Statements collection (<span class="keyword">try</span> <span class="keyword">using</span> the</span><br><span class="line">full name including the namespace, or rename one of the entries)</span><br><span class="line"> ã€ç¿»è¯‘ã€‘selectCarAllåœ¨Mapped Statementsé›†åˆä¸­ä¸æ˜ç¡®ï¼ˆè¯·å°è¯•ä½¿â½¤åŒ…å«åç§°ç©ºé—´çš„å…¨ åï¼Œæˆ–é‡å‘½åå…¶ä¸­â¼€ä¸ªæ¡â½¬ï¼‰</span><br><span class="line"> ã€â¼¤è‡´æ„æ€æ˜¯ã€‘selectCarAllé‡åäº†ï¼Œä½ è¦ä¹ˆåœ¨selectCarAllå‰æ·»åŠ â¼€ä¸ªåç§°ç©ºé—´ï¼Œè¦æœ‰ä½ æ”¹ ä¸ªå…¶å®ƒåå­—ã€‚</span><br></pre></td></tr></table></figure>
<p>Javaä»£ç ä¿®æ”¹å¦‚ä¸‹ ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testNamespace</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="comment">// è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line"> <span class="comment">// æ‰§â¾SQLè¯­å¥</span></span><br><span class="line"> <span class="comment">//List&lt;Object&gt; cars = sqlSession.selectList(&quot;car.selectCarAll&quot;);</span></span><br><span class="line"> List&lt;Object&gt; cars = sqlSession.selectList(<span class="string">&quot;car2.selectCarAll&quot;</span>);</span><br><span class="line"> <span class="comment">// è¾“å‡ºç»“æœ</span></span><br><span class="line"> cars.forEach(car -&gt; System.out.println(car)); &#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœå¦‚ä¸‹ ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220918150026469.png" alt="image-20220918150026469" style="zoom:80%;" /></p>
<h2 id="ç¬¬å››ç« -MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶è¯¦è§£"><a href="#ç¬¬å››ç« -MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶è¯¦è§£" class="headerlink" title="ç¬¬å››ç«  MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶è¯¦è§£"></a>ç¬¬å››ç«  MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶è¯¦è§£</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper2.xml&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>configurationï¼šæ ¹æ ‡ç­¾ï¼Œè¡¨ç¤ºé…ç½®ä¿¡æ¯ã€‚ </p>
</li>
<li><p>environmentsï¼šç¯å¢ƒï¼ˆå¤šä¸ªï¼‰ï¼Œä»¥â€œsâ€ç»“å°¾è¡¨ç¤ºå¤æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´mybatisçš„ç¯å¢ƒå¯ä»¥é…ç½®å¤šä¸ªæ•°æ®æºã€‚</p>
</li>
<li><p>defaultå±æ€§ï¼šè¡¨ç¤ºé»˜è®¤ä½¿â½¤çš„æ˜¯å“ªä¸ªç¯å¢ƒï¼Œdefaultåâ¾¯å¡«å†™çš„æ˜¯environmentçš„idã€‚defaultçš„ å€¼åªéœ€è¦å’Œenvironmentçš„idå€¼â¼€è‡´å³å¯ã€‚ </p>
</li>
<li><p>environmentï¼šå…·ä½“çš„ç¯å¢ƒé…ç½®ï¼ˆä¸»è¦åŒ…æ‹¬ï¼šäº‹åŠ¡ç®¡ç†å™¨çš„é…ç½® + æ•°æ®æºçš„é…ç½®ï¼‰ </p>
<ul>
<li>idï¼šç»™å½“å‰ç¯å¢ƒâ¼€ä¸ªå”¯â¼€æ ‡è¯†ï¼Œè¯¥æ ‡è¯†â½¤åœ¨environmentsçš„defaultåâ¾¯ï¼Œâ½¤æ¥æŒ‡å®šé»˜è®¤ç¯å¢ƒçš„ é€‰æ‹©ã€‚</li>
</ul>
</li>
</ul>
<ul>
<li><p>transactionManagerï¼šé…ç½®äº‹åŠ¡ç®¡ç†å™¨ </p>
</li>
<li><p>typeå±æ€§ï¼šæŒ‡å®šäº‹åŠ¡ç®¡ç†å™¨å…·ä½“ä½¿â½¤ä»€ä¹ˆâ½…å¼ï¼Œå¯é€‰å€¼åŒ…æ‹¬ä¸¤ä¸ª</p>
<p>â–  JDBCï¼šä½¿â½¤JDBCåŸâ½£çš„äº‹åŠ¡ç®¡ç†æœºåˆ¶ã€‚åº•å±‚åŸç†ï¼šäº‹åŠ¡å¼€å¯ </p>
<p>â€‹    conn.setAutoCommit(false); â€¦å¤„ç†ä¸šåŠ¡â€¦äº‹åŠ¡æäº¤conn.commit(); </p>
<p>â–  MANAGEDï¼šäº¤ç»™å…¶å®ƒå®¹å™¨æ¥ç®¡ç†äº‹åŠ¡ï¼Œâ½å¦‚WebLogicã€JBOSSç­‰ã€‚å¦‚æœæ²¡æœ‰ç®¡ç†äº‹åŠ¡çš„ å®¹å™¨ï¼Œåˆ™æ²¡æœ‰äº‹åŠ¡ã€‚æ²¡æœ‰äº‹åŠ¡çš„å«ä¹‰ï¼šåªè¦æ‰§â¾â¼€æ¡DMLè¯­å¥ï¼Œåˆ™æäº¤â¼€æ¬¡ã€‚ </p>
</li>
<li><p>dataSourceï¼šæŒ‡å®šæ•°æ®æº </p>
<ul>
<li><p>typeå±æ€§ï¼šâ½¤æ¥æŒ‡å®šå…·ä½“ä½¿â½¤çš„æ•°æ®åº“è¿æ¥æ± çš„ç­–ç•¥ï¼Œå¯é€‰å€¼åŒ…æ‹¬ä¸‰ä¸ª</p>
<ul>
<li>UNPOOLEDï¼šé‡‡â½¤ä¼ ç»Ÿçš„è·å–è¿æ¥çš„â½…å¼ï¼Œè™½ç„¶ä¹Ÿå®ç°Javax.sql.DataSourceæ¥â¼ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä½¿â½¤æ± çš„æ€æƒ³ã€‚ </li>
</ul>
</li>
<li><p>propertyå¯ä»¥æ˜¯ï¼š </p>
<p>â—‹ driver è¿™æ˜¯ JDBC é©±åŠ¨çš„ Java ç±»å…¨é™å®šåã€‚ </p>
<p>â—‹ url è¿™æ˜¯æ•°æ®åº“çš„ JDBC URL åœ°å€ã€‚ </p>
<p>â—‹ username ç™»å½•æ•°æ®åº“çš„â½¤æˆ·åã€‚ </p>
<p>â—‹ password ç™»å½•æ•°æ®åº“çš„å¯†ç ã€‚ </p>
<p>â—‹ defaultTransactionIsolationLevel é»˜è®¤çš„è¿æ¥äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚ </p>
<p>â—‹ defaultNetworkTimeout ç­‰å¾…æ•°æ®åº“æ“ä½œå®Œæˆçš„é»˜è®¤â½¹ç»œè¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰ </p>
</li>
</ul>
</li>
</ul>
<p>â–  POOLEDï¼šé‡‡â½¤ä¼ ç»Ÿçš„javax.sql.DataSourceè§„èŒƒä¸­çš„è¿æ¥æ± ï¼Œmybatisä¸­æœ‰é’ˆå¯¹è§„èŒƒçš„å® </p>
<p>ç°ã€‚</p>
<ul>
<li>propertyå¯ä»¥æ˜¯ï¼ˆé™¤äº†åŒ…å«UNPOOLEDä¸­ä¹‹å¤–ï¼‰ï¼š<ul>
<li>poolMaximumActiveConnections åœ¨ä»»æ„æ—¶é—´å¯å­˜åœ¨çš„æ´»åŠ¨ï¼ˆæ­£åœ¨ä½¿â½¤ï¼‰è¿æ¥æ•°é‡ï¼Œé»˜è®¤å€¼ï¼š10</li>
<li>poolMaximumIdleConnections ä»»æ„æ—¶é—´å¯èƒ½å­˜åœ¨çš„ç©ºé—²è¿æ¥æ•°ã€‚ </li>
<li>å…¶å®ƒâ€¦.</li>
</ul>
</li>
</ul>
<p>â–  JNDIï¼šé‡‡â½¤æœåŠ¡å™¨æä¾›çš„JNDIæŠ€æœ¯å®ç°ï¼Œæ¥è·å–DataSourceå¯¹è±¡ï¼Œä¸åŒçš„æœåŠ¡å™¨æ‰€èƒ½æ‹¿åˆ° </p>
<p>â€‹    DataSourceæ˜¯ä¸â¼€æ ·ã€‚å¦‚æœä¸æ˜¯webæˆ–è€…mavençš„warâ¼¯ç¨‹ï¼ŒJNDIæ˜¯ä¸èƒ½ä½¿â½¤çš„ã€‚ </p>
<ul>
<li>propertyå¯ä»¥æ˜¯ï¼ˆæœ€å¤šåªåŒ…å«ä»¥ä¸‹ä¸¤ä¸ªå±æ€§ï¼‰ï¼š<ul>
<li>initial_context è¿™ä¸ªå±æ€§â½¤æ¥åœ¨ InitialContext ä¸­å¯»æ‰¾ä¸Šä¸‹â½‚ï¼ˆå³ï¼Œ </li>
<li>initialContext.lookup(initial_context)ï¼‰è¿™æ˜¯ä¸ªå¯é€‰å±æ€§ï¼Œå¦‚æœå¿½ç•¥ï¼Œé‚£ä¹ˆå°†ä¼šç›´æ¥ä» </li>
<li>InitialContext ä¸­å¯»æ‰¾ data_source å±æ€§ã€‚ </li>
</ul>
</li>
</ul>
<p>â—‹ data_source è¿™æ˜¯å¼•â½¤æ•°æ®æºå®ä¾‹ä½ç½®çš„ä¸Šä¸‹â½‚è·¯å¾„ã€‚æä¾›äº† initial_context é…ç½®æ—¶ä¼š åœ¨å…¶è¿”å›çš„ä¸Šä¸‹â½‚ä¸­è¿›â¾æŸ¥æ‰¾ï¼Œæ²¡æœ‰æä¾›æ—¶åˆ™ç›´æ¥åœ¨ InitialContext ä¸­æŸ¥æ‰¾ã€‚ </p>
<ul>
<li><p>mappersï¼šåœ¨mappersæ ‡ç­¾ä¸­å¯ä»¥é…ç½®å¤šä¸ªsqlæ˜ å°„â½‚ä»¶çš„è·¯å¾„ã€‚ </p>
</li>
<li><p>mapperï¼šé…ç½®æŸä¸ªsqlæ˜ å°„â½‚ä»¶çš„è·¯å¾„</p>
</li>
<li><p>resourceå±æ€§ï¼šä½¿â½¤ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•â½¤â½…å¼ </p>
</li>
<li><p>urlå±æ€§ï¼šä½¿â½¤å®Œå…¨é™å®šèµ„æºå®šä½ç¬¦ï¼ˆURLï¼‰â½…å¼ </p>
</li>
</ul>
<h3 id="4-1-environment"><a href="#4-1-environment" class="headerlink" title="4.1  environment"></a>4.1  environment</h3><p>mybatis-003-configuration </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--é»˜è®¤ä½¿â½¤å¼€å‘ç¯å¢ƒ--&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--&lt;environments default=&quot;dev&quot;&gt;--&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--é»˜è®¤ä½¿â½¤â½£äº§ç¯å¢ƒ--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;production&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--å¼€å‘ç¯å¢ƒ--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/powernode&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--â½£äº§ç¯å¢ƒ--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;production&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertCar&quot;</span>&gt;</span></span><br><span class="line"> insert into t_car(id,car_num,brand,guide_price,produce_time,car_ty</span><br><span class="line">pe) values(null,#&#123;carNum&#125;,#&#123;brand&#125;,#&#123;guidePrice&#125;,#&#123;produceTime&#125;,#&#123;carTyp</span><br><span class="line">e&#125;)</span><br><span class="line"> <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.pojo.Car;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfigurationTest</span> &#123;</span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testEnvironment</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line"> <span class="comment">// å‡†å¤‡æ•°æ®</span></span><br><span class="line"> <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line"> car.setCarNum(<span class="string">&quot;133&quot;</span>);</span><br><span class="line"> car.setBrand(<span class="string">&quot;ä¸°â½¥éœ¸é“&quot;</span>);</span><br><span class="line"> car.setGuidePrice(<span class="number">50.3</span>);</span><br><span class="line"> car.setProduceTime(<span class="string">&quot;2020-01-10&quot;</span>);</span><br><span class="line"> car.setCarType(<span class="string">&quot;ç‡ƒæ²¹â»‹&quot;</span>);</span><br><span class="line"> <span class="comment">// â¼€ä¸ªæ•°æ®åº“å¯¹åº”â¼€ä¸ªSqlSessionFactoryå¯¹è±¡</span></span><br><span class="line"> <span class="comment">// ä¸¤ä¸ªæ•°æ®åº“å¯¹åº”ä¸¤ä¸ªSqlSessionFactoryå¯¹è±¡ï¼Œä»¥æ­¤ç±»æ¨</span></span><br><span class="line"> <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSession</span></span><br><span class="line">FactoryBuilder();</span><br><span class="line"> <span class="comment">// ä½¿â½¤é»˜è®¤æ•°æ®åº“</span></span><br><span class="line"> <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.bui</span><br><span class="line"><span class="title function_">ld</span><span class="params">(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>)</span>);</span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession(<span class="literal">true</span>);</span><br><span class="line"> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>, car);</span><br><span class="line"> System.out.println(<span class="string">&quot;æ’â¼Šäº†â¼æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line"> <span class="comment">// ä½¿â½¤æŒ‡å®šæ•°æ®åº“</span></span><br><span class="line"> <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory1</span> <span class="operator">=</span> sqlSessionFactoryBuilder.bu</span><br><span class="line"><span class="title function_">ild</span><span class="params">(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>)</span>, <span class="string">&quot;dev&quot;</span>);</span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession1</span> <span class="operator">=</span> sqlSessionFactory1.openSession(<span class="literal">true</span>);</span><br><span class="line"> <span class="type">int</span> <span class="variable">count1</span> <span class="operator">=</span> sqlSession1.insert(<span class="string">&quot;insertCar&quot;</span>, car);</span><br><span class="line"> System.out.println(<span class="string">&quot;æ’â¼Šäº†â¼æ¡è®°å½•ï¼š&quot;</span> + count1);</span><br><span class="line"> &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœ ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220918150846696.png" alt="image-20220918150846696" style="zoom:80%;" /></p>
<h3 id="4-2-transactionManager"><a href="#4-2-transactionManager" class="headerlink" title="4.2 transactionManager"></a>4.2 transactionManager</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;MANAGED&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/po</span></span></span><br><span class="line"><span class="string"><span class="tag">wernode&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testTransactionManager</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line"> <span class="comment">// å‡†å¤‡æ•°æ®</span></span><br><span class="line"> <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line"> car.setCarNum(<span class="string">&quot;133&quot;</span>);</span><br><span class="line"> car.setBrand(<span class="string">&quot;ä¸°â½¥éœ¸é“&quot;</span>);</span><br><span class="line"> car.setGuidePrice(<span class="number">50.3</span>);</span><br><span class="line"> car.setProduceTime(<span class="string">&quot;2020-01-10&quot;</span>);</span><br><span class="line"> car.setCarType(<span class="string">&quot;ç‡ƒæ²¹â»‹&quot;</span>);</span><br><span class="line"> <span class="comment">// è·å–SqlSessionFactoryå¯¹è±¡</span></span><br><span class="line"> <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFact</span></span><br><span class="line">oryBuilder();</span><br><span class="line"> <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(R</span><br><span class="line">esources.getResourceAsStream(<span class="string">&quot;mybatis-config2.xml&quot;</span>));</span><br><span class="line"> <span class="comment">// è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"> <span class="comment">// æ‰§â¾SQL</span></span><br><span class="line"> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>, car);</span><br><span class="line"> System.out.println(<span class="string">&quot;æ’â¼Šäº†â¼æ¡è®°å½•ï¼š&quot;</span> + count); &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>å½“äº‹åŠ¡ç®¡ç†å™¨æ˜¯ï¼šJDBC </p>
<ul>
<li>é‡‡â½¤JDBCçš„åŸâ½£äº‹åŠ¡æœºåˆ¶ï¼š </li>
</ul>
</li>
<li><p>å¼€å¯äº‹åŠ¡ï¼šconn.setAutoCommit(false); </p>
</li>
<li><p>å¤„ç†ä¸šåŠ¡â€¦â€¦ </p>
</li>
<li><p>æäº¤äº‹åŠ¡ï¼šconn.commit(); </p>
</li>
<li><p>å½“äº‹åŠ¡ç®¡ç†å™¨æ˜¯ï¼šMANAGED </p>
<ul>
<li>äº¤ç»™å®¹å™¨å»ç®¡ç†äº‹åŠ¡ï¼Œä½†â½¬å‰ä½¿â½¤çš„æ˜¯æœ¬åœ°ç¨‹åºï¼Œæ²¡æœ‰å®¹å™¨çš„â½€æŒï¼Œå½“mybatisæ‰¾ä¸åˆ°å®¹å™¨çš„â½€æŒ æ—¶ï¼šæ²¡æœ‰äº‹åŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´åªè¦æ‰§â¾â¼€æ¡DMLè¯­å¥ï¼Œåˆ™æäº¤â¼€æ¬¡ã€‚ </li>
</ul>
</li>
</ul>
<h3 id="4-3-dataSource"><a href="#4-3-dataSource" class="headerlink" title="4.3 dataSource"></a>4.3 dataSource</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;UNPOOLED&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/po</span></span></span><br><span class="line"><span class="string"><span class="tag">wernode&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDataSource</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line"> <span class="comment">// å‡†å¤‡æ•°æ®</span></span><br><span class="line"> <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line"> car.setCarNum(<span class="string">&quot;133&quot;</span>);</span><br><span class="line"> car.setBrand(<span class="string">&quot;ä¸°â½¥éœ¸é“&quot;</span>);</span><br><span class="line"> car.setGuidePrice(<span class="number">50.3</span>);</span><br><span class="line"> car.setProduceTime(<span class="string">&quot;2020-01-10&quot;</span>);</span><br><span class="line"> car.setCarType(<span class="string">&quot;ç‡ƒæ²¹â»‹&quot;</span>);</span><br><span class="line"> <span class="comment">// è·å–SqlSessionFactoryå¯¹è±¡</span></span><br><span class="line"> <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFact</span></span><br><span class="line">oryBuilder();</span><br><span class="line"> <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(R</span><br><span class="line">esources.getResourceAsStream(<span class="string">&quot;mybatis-config3.xml&quot;</span>));</span><br><span class="line"> <span class="comment">// è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession(<span class="literal">true</span>);</span><br><span class="line"> <span class="comment">// æ‰§â¾SQL</span></span><br><span class="line"> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>, car);</span><br><span class="line"> System.out.println(<span class="string">&quot;æ’â¼Šäº†â¼æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line"> <span class="comment">// å…³é—­ä¼šè¯</span></span><br><span class="line"> sqlSession.close(); &#125;</span><br></pre></td></tr></table></figure>
<p>å½“typeæ˜¯UNPOOLEDï¼Œæ§åˆ¶å°è¾“å‡ºï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220918151114061.png" alt="image-20220918151114061"></p>
<p>ä¿®æ”¹é…ç½®â½‚ä»¶mybatis-config3.xmlä¸­çš„é…ç½®ï¼š </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span> </span><br></pre></td></tr></table></figure>
<p>Javaæµ‹è¯•ç¨‹åºä¸éœ€è¦ä¿®æ”¹ï¼Œç›´æ¥æ‰§â¾ï¼Œçœ‹æ§åˆ¶å°è¾“å‡ºï¼š </p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220918151216668.png" alt="image-20220918151216668" style="zoom:80%;" /></p>
<p>é€šè¿‡æµ‹è¯•å¾—å‡ºï¼šUNPOOLEDä¸ä¼šä½¿â½¤è¿æ¥æ± ï¼Œæ¯â¼€æ¬¡éƒ½ä¼šæ–°å»ºJDBCè¿æ¥å¯¹è±¡ã€‚POOLEDä¼šä½¿â½¤æ•°æ®åº“ </p>
<p>è¿æ¥æ± ã€‚ã€è¿™ä¸ªè¿æ¥æ± æ˜¯mybatisâ¾ƒâ¼°å®ç°çš„ã€‚ã€‘</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;JNDI&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>JNDIçš„â½…å¼ï¼šè¡¨ç¤ºå¯¹æ¥JNDIæœåŠ¡å™¨ä¸­çš„è¿æ¥æ± ã€‚è¿™ç§â½…å¼ç»™äº†æˆ‘ä»¬å¯ä»¥ä½¿â½¤ç¬¬ä¸‰â½…è¿æ¥æ± çš„æ¥â¼ã€‚å¦‚æœ </p>
<p>æƒ³ä½¿â½¤dbcpã€c3p0ã€druidï¼ˆå¾·é²ä¼Šï¼‰ç­‰ï¼Œéœ€è¦ä½¿â½¤è¿™ç§â½…å¼ã€‚ </p>
<p>è¿™ç§å†é‡ç‚¹è¯´â¼€ä¸‹type=â€POOLEDâ€çš„æ—¶å€™ï¼Œå®ƒçš„å±æ€§æœ‰å“ªäº›ï¼Ÿ</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/po</span></span></span><br><span class="line"><span class="string"><span class="tag">wernode&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--æœ€â¼¤è¿æ¥æ•°--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;poolMaximumActiveConnections&quot;</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span>/&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--æœ€å¤šç©ºé—²æ•°é‡--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;poolMaximumIdleConnections&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--å¼ºâ¾å›å½’æ± çš„æ—¶é—´--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;poolMaximumCheckoutTime&quot;</span> <span class="attr">value</span>=<span class="string">&quot;20000&quot;</span>/&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--è¿™æ˜¯â¼€ä¸ªåº•å±‚è®¾ç½®ï¼Œå¦‚æœè·å–è¿æ¥èŠ±è´¹äº†ç›¸å½“â»“çš„æ—¶é—´ï¼Œè¿æ¥æ± ä¼šæ‰“å°çŠ¶ æ€â½‡å¿—å¹¶é‡æ–°å°è¯•è·å–â¼€ä¸ªè¿æ¥ï¼ˆé¿å…åœ¨è¯¯é…ç½®çš„æƒ…å†µä¸‹â¼€ç›´å¤±è´¥ä¸”ä¸æ‰“å°â½‡å¿—ï¼‰ï¼Œé»˜è®¤å€¼ï¼š20000</span></span><br><span class="line"><span class="comment">æ¯«ç§’ï¼ˆå³ 20 ç§’ï¼‰ã€‚--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;poolTimeToWait&quot;</span> <span class="attr">value</span>=<span class="string">&quot;20000&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>poolMaximumActiveConnectionsï¼šæœ€â¼¤çš„æ´»åŠ¨çš„è¿æ¥æ•°é‡ã€‚é»˜è®¤å€¼10</p>
<p>poolMaximumIdleConnectionsï¼šæœ€â¼¤çš„ç©ºé—²è¿æ¥æ•°é‡ã€‚é»˜è®¤å€¼5 </p>
<p>poolMaximumCheckoutTimeï¼šå¼ºâ¾å›å½’æ± çš„æ—¶é—´ã€‚é»˜è®¤å€¼20ç§’ã€‚ </p>
<p>poolTimeToWaitï¼šå½“â½†æ³•è·å–åˆ°ç©ºé—²è¿æ¥æ—¶ï¼Œæ¯éš”20ç§’æ‰“å°â¼€æ¬¡â½‡å¿—ï¼Œé¿å…å› ä»£ç é…ç½®æœ‰è¯¯ï¼Œå¯¼è‡´å‚» </p>
<p>ç­‰ã€‚ï¼ˆæ—¶â»“æ˜¯å¯ä»¥é…ç½®çš„ï¼‰ </p>
<p>å½“ç„¶ï¼Œè¿˜æœ‰å…¶ä»–å±æ€§ã€‚å¯¹äºè¿æ¥æ± æ¥è¯´ï¼Œä»¥ä¸Šâ¼ä¸ªå±æ€§â½è¾ƒé‡è¦ã€‚ </p>
<p>æœ€â¼¤çš„æ´»åŠ¨çš„è¿æ¥æ•°é‡å°±æ˜¯è¿æ¥æ± è¿æ¥æ•°é‡çš„ä¸Šé™ã€‚é»˜è®¤å€¼10ï¼Œå¦‚æœæœ‰10ä¸ªè¯·æ±‚æ­£åœ¨ä½¿â½¤è¿™10ä¸ªè¿æ¥ï¼Œ </p>
<p>ç¬¬11ä¸ªè¯·æ±‚åªèƒ½ç­‰å¾…ç©ºé—²è¿æ¥ã€‚</p>
<!--è¿™æ˜¯â¼€ä¸ªåº•å±‚è®¾ç½®ï¼Œå¦‚æœè·å–è¿æ¥èŠ±è´¹äº†ç›¸å½“â»“çš„æ—¶é—´ï¼Œè¿æ¥æ± ä¼šæ‰“å°çŠ¶ 

æ€â½‡å¿—å¹¶é‡æ–°å°è¯•è·å–â¼€ä¸ªè¿æ¥ï¼ˆé¿å…åœ¨è¯¯é…ç½®çš„æƒ…å†µä¸‹â¼€ç›´å¤±è´¥ä¸”ä¸æ‰“å°â½‡å¿—ï¼‰ï¼Œé»˜è®¤å€¼ï¼š20000

æ¯«ç§’ï¼ˆå³ 20 ç§’ï¼‰ã€‚-->
<p>æœ€â¼¤çš„ç©ºé—²è¿æ¥æ•°é‡ã€‚é»˜è®¤å€¼5ï¼Œå¦‚ä½•å·²ç»æœ‰äº†5ä¸ªç©ºé—²è¿æ¥ï¼Œå½“ç¬¬6ä¸ªè¿æ¥è¦ç©ºé—²ä¸‹æ¥çš„æ—¶å€™ï¼Œè¿æ¥æ± ä¼š </p>
<p>é€‰æ‹©å…³é—­è¯¥è¿æ¥å¯¹è±¡ã€‚æ¥å‡å°‘æ•°æ®åº“çš„å¼€é”€ã€‚ </p>
<p>éœ€è¦æ ¹æ®ç³»ç»Ÿçš„å¹¶å‘æƒ…å†µï¼Œæ¥åˆç†è°ƒæ•´è¿æ¥æ± æœ€â¼¤è¿æ¥æ•°ä»¥åŠæœ€å¤šç©ºé—²æ•°é‡ã€‚å……åˆ†å‘æŒ¥æ•°æ®åº“è¿æ¥æ± çš„ </p>
<p>æ€§èƒ½ã€‚ã€å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè¿›â¾æµ‹è¯•ï¼Œç„¶åè°ƒæ•´â¼€ä¸ªåˆç†çš„æ•°é‡ã€‚ã€‘</p>
</blockquote>
<p>ä¸‹å›¾æ˜¯é»˜è®¤é…ç½®ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220918151354804.png" alt="image-20220918151354804" style="zoom:80%;" /></p>
<p>åœ¨ä»¥ä¸Šé…ç½®çš„åŸºç¡€ä¹‹ä¸Šï¼Œå¯ä»¥ç¼–å†™javaç¨‹åºæµ‹è¯•ï¼š </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testPool</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line"> <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line"> <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config3.xml&quot;</span>));</span><br><span class="line"> <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"> <span class="type">Object</span> <span class="variable">selectCarByCarNum</span> <span class="operator">=</span> sqlSession.selectOne(<span class="string">&quot;selectCarByCarNum&quot;</span></span><br><span class="line">);</span><br><span class="line"> &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectCarByCarNum&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.powernode.mybatis.pojo.Car&quot;</span>&gt;</span></span><br><span class="line"> select id,car_num carNum,brand,guide_price guidePrice,produce_time produceTime,car_type carType from t_car where car_num = &#x27;100&#x27;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20220918151438112.png" alt="image-20220918151438112"></p>
<h3 id="4-4-Properties"><a href="#4-4-Properties" class="headerlink" title="4.4 Properties"></a>4.4 Properties</h3><p>mybatisæä¾›äº†æ›´åŠ çµæ´»çš„é…ç½®ï¼Œè¿æ¥æ•°æ®åº“çš„ä¿¡æ¯å¯ä»¥å•ç‹¬å†™åˆ°â¼€ä¸ªå±æ€§èµ„æºâ½‚ä»¶ä¸­ï¼Œå‡è®¾åœ¨ç±»çš„æ ¹è·¯ </p>
<p>å¾„ä¸‹åˆ›å»ºjdbc.propertiesâ½‚ä»¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/powernode</span></span><br></pre></td></tr></table></figure>
<p>åœ¨mybatisæ ¸â¼¼é…ç½®â½‚ä»¶ä¸­å¼•â¼Šå¹¶ä½¿â½¤ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--å¼•â¼Šå¤–éƒ¨å±æ€§èµ„æºâ½‚ä»¶--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;jdbc.properties&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbc.username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbc.password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--$&#123;key&#125;ä½¿â½¤--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç¼–å†™Javaç¨‹åºæµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testProperties</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line"> <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFacto</span></span><br><span class="line">ryBuilder();</span><br><span class="line"> <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(Re</span><br><span class="line">sources.getResourceAsStream(<span class="string">&quot;mybatis-config4.xml&quot;</span>));</span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"> <span class="type">Object</span> <span class="variable">car</span> <span class="operator">=</span> sqlSession.selectOne(<span class="string">&quot;selectCarByCarNum&quot;</span>);</span><br><span class="line"> System.out.println(car); &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>propertiesä¸¤ä¸ªå±æ€§ï¼š</p>
<p>resourceï¼šè¿™ä¸ªå±æ€§ä»ç±»çš„æ ¹è·¯å¾„ä¸‹å¼€å§‹åŠ è½½ã€‚ã€å¸¸â½¤çš„ã€‚ã€‘</p>
<p>urlï¼šä»æŒ‡å®šçš„urlåŠ è½½ï¼Œå‡è®¾â½‚ä»¶æ”¾åœ¨d:/jdbc.propertiesï¼Œè¿™ä¸ªurlå¯ä»¥å†™æˆï¼š </p>
<p>file:///d:/jdbc.propertiesã€‚æ³¨æ„æ˜¯ä¸‰ä¸ªæ–œæ å“¦ã€‚ </p>
<p>æ³¨æ„ï¼šå¦‚æœä¸çŸ¥é“mybatis-config.xmlâ½‚ä»¶ä¸­æ ‡ç­¾çš„ç¼–å†™é¡ºåºçš„è¯ï¼Œå¯ä»¥æœ‰ä¸¤ç§â½…å¼çŸ¥é“å®ƒçš„é¡ºåºï¼š </p>
<p>ç¬¬â¼€ç§â½…å¼ï¼šæŸ¥çœ‹dtdçº¦æŸâ½‚ä»¶ã€‚ </p>
<p>ç¬¬â¼†ç§â½…å¼ï¼šé€šè¿‡ideaçš„æŠ¥é”™æç¤ºä¿¡æ¯ã€‚ã€â¼€èˆ¬é‡‡â½¤è¿™ç§â½…å¼ã€‘ </p>
</blockquote>
<h3 id="4-5-mapper"><a href="#4-5-mapper" class="headerlink" title="4.5 mapper"></a>4.5 mapper</h3><p>mapperæ ‡ç­¾â½¤æ¥æŒ‡å®šSQLæ˜ å°„â½‚ä»¶çš„è·¯å¾„ï¼ŒåŒ…å«å¤šç§æŒ‡å®šâ½…å¼ï¼Œè¿™â¾¥å…ˆä¸»è¦çœ‹å…¶ä¸­ä¸¤ç§ï¼š </p>
<p>ç¬¬â¼€ç§ï¼šresourceï¼Œä»ç±»çš„æ ¹è·¯å¾„ä¸‹å¼€å§‹åŠ è½½ã€â½urlå¸¸â½¤ã€‘ </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯è¿™æ ·å†™çš„è¯ï¼Œå¿…é¡»ä¿è¯ç±»çš„æ ¹ä¸‹æœ‰CarMapper.xmlâ½‚ä»¶ã€‚ </p>
<p>å¦‚æœç±»çš„æ ¹è·¯å¾„ä¸‹æœ‰â¼€ä¸ªåŒ…å«åštestï¼ŒCarMapper.xmlå¦‚æœæ”¾åœ¨teståŒ…ä¸‹çš„è¯ï¼Œè¿™ä¸ªé…ç½®åº”è¯¥æ˜¯è¿™æ ·å†™ï¼š </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;test/CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬â¼†ç§ï¼šurlï¼Œä»æŒ‡å®šçš„urlä½ç½®åŠ è½½ </p>
<p>å‡è®¾CarMapper.xmlâ½‚ä»¶æ”¾åœ¨dç›˜çš„æ ¹ä¸‹ï¼Œè¿™ä¸ªé…ç½®å°±éœ€è¦è¿™æ ·å†™ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">url</span>=<span class="string">&quot;file:///d:/CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬äº”ç« -åœ¨WEBä¸­åº”â½¤MyBatisï¼ˆä½¿â½¤MVCæ¶æ„æ¨¡å¼ï¼‰"><a href="#ç¬¬äº”ç« -åœ¨WEBä¸­åº”â½¤MyBatisï¼ˆä½¿â½¤MVCæ¶æ„æ¨¡å¼ï¼‰" class="headerlink" title="ç¬¬äº”ç«  åœ¨WEBä¸­åº”â½¤MyBatisï¼ˆä½¿â½¤MVCæ¶æ„æ¨¡å¼ï¼‰"></a>ç¬¬äº”ç«  åœ¨WEBä¸­åº”â½¤MyBatisï¼ˆä½¿â½¤MVCæ¶æ„æ¨¡å¼ï¼‰</h2><p><code>â½¬æ ‡</code>ï¼š </p>
<p>â— æŒæ¡mybatisåœ¨webåº”â½¤ä¸­æ€ä¹ˆâ½¤ </p>
<p>â— mybatisä¸‰â¼¤å¯¹è±¡çš„ä½œâ½¤åŸŸå’Œâ½£å‘½å‘¨æœŸ </p>
<p>â— ThreadLocalåŸç†åŠä½¿â½¤ </p>
<p>â— å·©å›ºMVCæ¶æ„æ¨¡å¼ </p>
<p>â— ä¸ºå­¦ä¹ MyBatisçš„æ¥â¼ä»£ç†æœºåˆ¶åšå‡†å¤‡ </p>
<p><code>å®ç°åŠŸèƒ½</code>ï¼š </p>
<p>â— é“¶â¾è´¦æˆ·è½¬è´¦ </p>
<p><code>ä½¿â½¤æŠ€æœ¯</code>ï¼š </p>
<p>â— HTML + Servlet + MyBatis </p>
<p><code>WEBåº”â½¤çš„åç§°</code>ï¼š </p>
<p>â— bank</p>
<h3 id="5-1-éœ€æ±‚åˆ†æ"><a href="#5-1-éœ€æ±‚åˆ†æ" class="headerlink" title="5.1 éœ€æ±‚åˆ†æ"></a>5.1 éœ€æ±‚åˆ†æ</h3><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008095435078.png" alt="image-20221008095435078" style="zoom:80%;" /></p>
<h3 id="5-2-æ•°æ®åº“è¡¨çš„è®¾è®¡å’Œå‡†å¤‡æ•°æ®"><a href="#5-2-æ•°æ®åº“è¡¨çš„è®¾è®¡å’Œå‡†å¤‡æ•°æ®" class="headerlink" title="5.2 æ•°æ®åº“è¡¨çš„è®¾è®¡å’Œå‡†å¤‡æ•°æ®"></a>5.2 æ•°æ®åº“è¡¨çš„è®¾è®¡å’Œå‡†å¤‡æ•°æ®</h3><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008095457316.png" alt="image-20221008095457316" style="zoom:80%;" /></p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008095851305.png" alt="image-20221008095851305"></p>
<h3 id="5-3-å®ç°æ­¥éª¤"><a href="#5-3-å®ç°æ­¥éª¤" class="headerlink" title="5.3 å®ç°æ­¥éª¤"></a>5.3 å®ç°æ­¥éª¤</h3><h4 id="ç¬¬â¼€æ­¥ï¼šç¯å¢ƒæ­å»º"><a href="#ç¬¬â¼€æ­¥ï¼šç¯å¢ƒæ­å»º" class="headerlink" title="ç¬¬â¼€æ­¥ï¼šç¯å¢ƒæ­å»º"></a>ç¬¬â¼€æ­¥ï¼šç¯å¢ƒæ­å»º</h4><p>â— IDEAä¸­åˆ›å»ºMaven WEBåº”â½¤ï¼ˆmybatis-04-webï¼‰</p>
<p>â€‹    <img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008100030527.png" alt="image-20221008100030527" style="zoom:67%;" /></p>
<ul>
<li><p>IDEAé…ç½®Tomcatï¼Œè¿™â¾¥Tomcatä½¿8+ç‰ˆæœ¬ã€‚å¹¶éƒ¨ç½²åº”â½¤åˆ°tomcat</p>
</li>
<li><p>é»˜è®¤åˆ›å»ºçš„maven webåº”â½¤æ²¡æœ‰javaå’Œresourcesâ½¬å½•ï¼ŒåŒ…æ‹¬ä¸¤ç§è§£å†³â½…æ¡ˆ </p>
<p>â—‹ ç¬¬â¼€ç§ï¼šâ¾ƒâ¼°â¼¿åŠ¨åŠ ä¸Šã€‚</p>
</li>
</ul>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008100129507.png" alt="image-20221008100129507" style="zoom:67%;" /></p>
<p>â—‹ ç¬¬â¼†ç§ï¼šä¿®æ”¹maven-archetype-webapp-1.4.jarä¸­çš„é…ç½®â½‚ä»¶ </p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008100150591.png" alt="image-20221008100150591"></p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008100207543.png" alt="image-20221008100207543" style="zoom:67%;" /></p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008100227814.png" alt="image-20221008100227814"></p>
<p>â— å¼•â¼Šç›¸å…³ä¾èµ– </p>
<p>â—‹ ç¼–è¯‘å™¨ç‰ˆæœ¬ä¿®æ”¹ä¸º17</p>
<p>â—‹ å¼•â¼Šçš„ä¾èµ–åŒ…æ‹¬ï¼šmybatisï¼Œmysqlé©±åŠ¨ï¼Œjunitï¼Œlogbackï¼Œservletã€‚ </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w</span></span></span><br><span class="line"><span class="string"><span class="tag">3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://mave</span></span></span><br><span class="line"><span class="string"><span class="tag">n.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.powernode<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-004-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">name</span>&gt;</span>mybatis-004-web<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost:8080/bank<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>17<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>17<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--mybatisä¾èµ–--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--mysqlé©±åŠ¨ä¾èµ–--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.30<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--junitä¾èµ–--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--logbackä¾èµ–--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> 123456789</span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--servletä¾èµ–--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jakarta.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jakarta.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>mybatis-004-web<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-clean-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.22.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-install-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-deploy-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å¼•â¼Šç›¸å…³é…ç½®â½‚ä»¶ï¼Œæ”¾åˆ°resourcesâ½¬å½•ä¸‹ï¼ˆå…¨éƒ¨æ”¾åˆ°ç±»çš„æ ¹è·¯å¾„ä¸‹ï¼‰<ul>
<li>mybatis-config.xml </li>
<li>AccountMapper.xml </li>
<li>logback.xml </li>
<li>jdbc.properties </li>
</ul>
</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">12123</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--â¼€å®šè¦æ³¨æ„è¿™â¾¥çš„è·¯å¾„å“¦ï¼ï¼ï¼--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;AccountMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;account&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="ç¬¬â¼†æ­¥ï¼šå‰ç«¯â»šâ¾¯index-html"><a href="#ç¬¬â¼†æ­¥ï¼šå‰ç«¯â»šâ¾¯index-html" class="headerlink" title="ç¬¬â¼†æ­¥ï¼šå‰ç«¯â»šâ¾¯index.html"></a>ç¬¬â¼†æ­¥ï¼šå‰ç«¯â»šâ¾¯index.html</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">title</span>&gt;</span>é“¶â¾è´¦æˆ·è½¬è´¦<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span> <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--/bankæ˜¯åº”â½¤çš„æ ¹ï¼Œéƒ¨ç½²webåº”â½¤åˆ°tomcatçš„æ—¶å€™â¼€å®šè¦æ³¨æ„è¿™ä¸ªåå­—--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/bank/transfer&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line"> è½¬å‡ºè´¦æˆ·ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;fromActno&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"> è½¬â¼Šè´¦æˆ·ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;toActno&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"> è½¬è´¦â¾¦é¢ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;money&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;è½¬è´¦&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºpojoåŒ…ã€serviceåŒ…ã€daoåŒ…ã€webåŒ…ã€utilsåŒ…"><a href="#ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºpojoåŒ…ã€serviceåŒ…ã€daoåŒ…ã€webåŒ…ã€utilsåŒ…" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºpojoåŒ…ã€serviceåŒ…ã€daoåŒ…ã€webåŒ…ã€utilsåŒ…"></a>ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºpojoåŒ…ã€serviceåŒ…ã€daoåŒ…ã€webåŒ…ã€utilsåŒ…</h4><ul>
<li>com.manman.pojo</li>
<li>com.manman.sevice</li>
<li>com.manman.dao</li>
<li>com.manman.web</li>
<li>com.manman.utils</li>
</ul>
<h4 id="ç¬¬å››æ­¥ï¼šå®šä¹‰pojoç±»ï¼šAccount"><a href="#ç¬¬å››æ­¥ï¼šå®šä¹‰pojoç±»ï¼šAccount" class="headerlink" title="ç¬¬å››æ­¥ï¼šå®šä¹‰pojoç±»ï¼šAccount"></a>ç¬¬å››æ­¥ï¼šå®šä¹‰pojoç±»ï¼šAccount</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Account</span> &#123;</span><br><span class="line"> <span class="keyword">private</span> Long id;</span><br><span class="line"> <span class="keyword">private</span> String actno;</span><br><span class="line"> <span class="keyword">private</span> Double balance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ç¬¬äº”æ­¥ï¼šç¼–å†™AccountDaoæ¥â¼ï¼Œä»¥åŠAccountDaoImplå®ç°ç±»"><a href="#ç¬¬äº”æ­¥ï¼šç¼–å†™AccountDaoæ¥â¼ï¼Œä»¥åŠAccountDaoImplå®ç°ç±»" class="headerlink" title="ç¬¬äº”æ­¥ï¼šç¼–å†™AccountDaoæ¥â¼ï¼Œä»¥åŠAccountDaoImplå®ç°ç±»"></a>ç¬¬äº”æ­¥ï¼šç¼–å†™AccountDaoæ¥â¼ï¼Œä»¥åŠAccountDaoImplå®ç°ç±»</h4><ul>
<li><p>åˆ†ædaoä¸­â¾„å°‘è¦æä¾›â¼ä¸ªâ½…æ³•ï¼Œæ‰èƒ½å®Œæˆè½¬è´¦ï¼š </p>
<p>è½¬è´¦å‰éœ€è¦æŸ¥è¯¢ä½™é¢æ˜¯å¦å……â¾œï¼šselectByActno </p>
<p>è½¬è´¦æ—¶è¦æ›´æ–°è´¦æˆ·ï¼šupdate</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountDao</span> &#123;</span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®è´¦å·è·å–è´¦æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> actno è´¦å·</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> è´¦æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> Account <span class="title function_">selectByActno</span><span class="params">(String actno)</span>;</span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ›´æ–°è´¦æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> act è´¦æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 1è¡¨ç¤ºæ›´æ–°æˆåŠŸï¼Œå…¶ä»–å€¼è¡¨ç¤ºå¤±è´¥</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="type">int</span> <span class="title function_">update</span><span class="params">(Account act)</span>; &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.bank.dao.impl;</span><br><span class="line"><span class="keyword">import</span> com.powernode.bank.dao.AccountDao;</span><br><span class="line"><span class="keyword">import</span> com.powernode.bank.pojo.Account;</span><br><span class="line"><span class="keyword">import</span> com.powernode.bank.utils.SqlSessionUtil;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountDao</span> &#123;</span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> Account <span class="title function_">selectByActno</span><span class="params">(String actno)</span> &#123;</span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line"> <span class="type">Account</span> <span class="variable">act</span> <span class="operator">=</span> (Account)sqlSession.selectOne(<span class="string">&quot;selectByActno&quot;</span>, actno</span><br><span class="line">);</span><br><span class="line"> sqlSession.close();</span><br><span class="line"> <span class="keyword">return</span> act;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(Account act)</span> &#123;</span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line"> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.update(<span class="string">&quot;update&quot;</span>, act);</span><br><span class="line"> sqlSession.commit();</span><br><span class="line"> sqlSession.close();</span><br><span class="line"> <span class="keyword">return</span> count;</span><br><span class="line"> &#125; &#125;</span><br></pre></td></tr></table></figure>
<h4 id="ç¬¬å…­æ­¥ï¼šAccountDaoImplä¸­ç¼–å†™äº†mybatisä»£ç ï¼Œéœ€è¦ç¼–å†™SQLæ˜ å°„â½‚ä»¶äº†"><a href="#ç¬¬å…­æ­¥ï¼šAccountDaoImplä¸­ç¼–å†™äº†mybatisä»£ç ï¼Œéœ€è¦ç¼–å†™SQLæ˜ å°„â½‚ä»¶äº†" class="headerlink" title="ç¬¬å…­æ­¥ï¼šAccountDaoImplä¸­ç¼–å†™äº†mybatisä»£ç ï¼Œéœ€è¦ç¼–å†™SQLæ˜ å°„â½‚ä»¶äº†"></a>ç¬¬å…­æ­¥ï¼šAccountDaoImplä¸­ç¼–å†™äº†mybatisä»£ç ï¼Œéœ€è¦ç¼–å†™SQLæ˜ å°„â½‚ä»¶äº†</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;account&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByActno&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.powernode.bank.pojo.Accoun</span></span></span><br><span class="line"><span class="string"><span class="tag">t&quot;</span>&gt;</span></span><br><span class="line"> select * from t_act where actno = #&#123;actno&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span>&gt;</span></span><br><span class="line"> update t_act set balance = #&#123;balance&#125; where actno = #&#123;actno&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="ç¬¬ä¸ƒæ­¥ï¼šç¼–å†™AccountServiceæ¥â¼ä»¥åŠAccountServiceImpl"><a href="#ç¬¬ä¸ƒæ­¥ï¼šç¼–å†™AccountServiceæ¥â¼ä»¥åŠAccountServiceImpl" class="headerlink" title="ç¬¬ä¸ƒæ­¥ï¼šç¼–å†™AccountServiceæ¥â¼ä»¥åŠAccountServiceImpl"></a>ç¬¬ä¸ƒæ­¥ï¼šç¼–å†™AccountServiceæ¥â¼ä»¥åŠAccountServiceImpl</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MoneyNotEnoughException</span> <span class="keyword">extends</span> <span class="title class_">Exception</span>&#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="title function_">MoneyNotEnoughException</span><span class="params">()</span>&#123;</span><br><span class="line">     </span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">public</span> <span class="title function_">MoneyNotEnoughException</span><span class="params">(String msg)</span>&#123; <span class="built_in">super</span>(msg);</span><br><span class="line">                 &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppException</span> <span class="keyword">extends</span> <span class="title class_">Exception</span>&#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="title function_">AppException</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"> <span class="keyword">public</span> <span class="title function_">AppException</span><span class="params">(String msg)</span>&#123; <span class="built_in">super</span>(msg); </span><br><span class="line">                                &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.bank.service;</span><br><span class="line"><span class="keyword">import</span> com.powernode.bank.exception.AppException;</span><br><span class="line"><span class="keyword">import</span> com.powernode.bank.exception.MoneyNotEnoughException;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è´¦æˆ·ä¸šåŠ¡ç±»ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é“¶â¾è´¦æˆ·è½¬æ­£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> fromActno è½¬å‡ºè´¦æˆ·</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> toActno è½¬â¼Šè´¦æˆ·</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> money è½¬è´¦â¾¦é¢</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> MoneyNotEnoughException ä½™é¢ä¸â¾œå¼‚å¸¸</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> AppException Appå‘â½£å¼‚å¸¸</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String fromActno, String toActno, <span class="type">double</span> money)</span> <span class="keyword">throws</span> MoneyNotEnoughException, AppException; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.bank.service.impl;</span><br><span class="line"><span class="keyword">import</span> com.powernode.bank.dao.AccountDao;</span><br><span class="line"><span class="keyword">import</span> com.powernode.bank.dao.impl.AccountDaoImpl;</span><br><span class="line"><span class="keyword">import</span> com.powernode.bank.exception.AppException;</span><br><span class="line"><span class="keyword">import</span> com.powernode.bank.exception.MoneyNotEnoughException;</span><br><span class="line"><span class="keyword">import</span> com.powernode.bank.pojo.Account;</span><br><span class="line"><span class="keyword">import</span> com.powernode.bank.service.AccountService;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"> <span class="keyword">private</span> <span class="type">AccountDao</span> <span class="variable">accountDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AccountDaoImpl</span>();</span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String fromActno, String toActno, <span class="type">double</span> money)</span> t</span><br><span class="line">hrows MoneyNotEnoughException, AppException &#123;</span><br><span class="line"> <span class="comment">// æŸ¥è¯¢è½¬å‡ºè´¦æˆ·çš„ä½™é¢</span></span><br><span class="line"> <span class="type">Account</span> <span class="variable">fromAct</span> <span class="operator">=</span> accountDao.selectByActno(fromActno);</span><br><span class="line"> <span class="keyword">if</span> (fromAct.getBalance() &lt; money) &#123;</span><br><span class="line"> <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">MoneyNotEnoughException</span>(<span class="string">&quot;å¯¹ä¸èµ·ï¼Œæ‚¨çš„ä½™é¢ä¸â¾œã€‚&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">try</span> &#123;</span><br><span class="line"> <span class="comment">// ç¨‹åºå¦‚æœæ‰§â¾åˆ°è¿™â¾¥è¯´æ˜ä½™é¢å……â¾œ</span></span><br><span class="line"> <span class="comment">// ä¿®æ”¹è´¦æˆ·ä½™é¢</span></span><br><span class="line"> <span class="type">Account</span> <span class="variable">toAct</span> <span class="operator">=</span> accountDao.selectByActno(toActno);</span><br><span class="line"> fromAct.setBalance(fromAct.getBalance() - money);</span><br><span class="line"> toAct.setBalance(toAct.getBalance() + money);</span><br><span class="line"> <span class="comment">// æ›´æ–°æ•°æ®åº“</span></span><br><span class="line"> accountDao.update(fromAct);</span><br><span class="line"> accountDao.update(toAct);</span><br><span class="line"> &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"> <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">AppException</span>(<span class="string">&quot;è½¬è´¦å¤±è´¥ï¼ŒæœªçŸ¥åŸå› ï¼&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ç¬¬â¼‹æ­¥ï¼šç¼–å†™AccountController"><a href="#ç¬¬â¼‹æ­¥ï¼šç¼–å†™AccountController" class="headerlink" title="ç¬¬â¼‹æ­¥ï¼šç¼–å†™AccountController"></a>ç¬¬â¼‹æ­¥ï¼šç¼–å†™AccountController</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/transfer&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountController</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"> <span class="keyword">private</span> <span class="type">AccountService</span> <span class="variable">accountService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AccountServiceImpl</span>();</span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse</span></span><br><span class="line"><span class="params">response)</span></span><br><span class="line"> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"> <span class="comment">// è·å–å“åº”æµ</span></span><br><span class="line"> response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line"> <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line"> <span class="comment">// è·å–è´¦æˆ·ä¿¡æ¯</span></span><br><span class="line"> <span class="type">String</span> <span class="variable">fromActno</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;fromActno&quot;</span>);</span><br><span class="line"> <span class="type">String</span> <span class="variable">toActno</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;toActno&quot;</span>);</span><br><span class="line"> <span class="type">double</span> <span class="variable">money</span> <span class="operator">=</span> Integer.parseInt(request.getParameter(<span class="string">&quot;money&quot;</span>));</span><br><span class="line"> <span class="comment">// è°ƒâ½¤ä¸šåŠ¡â½…æ³•å®Œæˆè½¬è´¦</span></span><br><span class="line"> <span class="keyword">try</span> &#123;</span><br><span class="line"> accountService.transfer(fromActno, toActno, money);</span><br><span class="line"> out.print(<span class="string">&quot;&lt;h1&gt;è½¬è´¦æˆåŠŸï¼ï¼ï¼&lt;/h1&gt;&quot;</span>);</span><br><span class="line"> &#125; <span class="keyword">catch</span> (MoneyNotEnoughException e) &#123;</span><br><span class="line"> out.print(e.getMessage());</span><br><span class="line"> &#125; <span class="keyword">catch</span> (AppException e) &#123;</span><br><span class="line"> out.print(e.getMessage());</span><br><span class="line"> &#125;</span><br><span class="line"> &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨æœåŠ¡å™¨ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œè¾“â¼Šåœ°å€ï¼š<a target="_blank" rel="noopener" href="http://localhost:8080/bankï¼Œæµ‹è¯•ï¼š">http://localhost:8080/bankï¼Œæµ‹è¯•ï¼š</a></p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008101320538.png" alt="image-20221008101320538"></p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008101330993.png" alt="image-20221008101330993"></p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008101338548.png" alt="image-20221008101338548"></p>
<h3 id="5-4-MyBatiså¯¹è±¡ä½œâ½¤åŸŸä»¥åŠäº‹åŠ¡é—®é¢˜"><a href="#5-4-MyBatiså¯¹è±¡ä½œâ½¤åŸŸä»¥åŠäº‹åŠ¡é—®é¢˜" class="headerlink" title="5.4 MyBatiså¯¹è±¡ä½œâ½¤åŸŸä»¥åŠäº‹åŠ¡é—®é¢˜"></a>5.4 MyBatiså¯¹è±¡ä½œâ½¤åŸŸä»¥åŠäº‹åŠ¡é—®é¢˜</h3><p><strong>MyBatisæ ¸â¼¼å¯¹è±¡çš„ä½œâ½¤åŸŸ </strong></p>
<p>SqlSessionFactoryBuilder </p>
<blockquote>
<p>è¿™ä¸ªç±»å¯ä»¥è¢«å®ä¾‹åŒ–ã€ä½¿â½¤å’Œä¸¢å¼ƒï¼Œâ¼€æ—¦åˆ›å»ºäº† SqlSessionFactoryï¼Œå°±ä¸å†éœ€è¦å®ƒäº†ã€‚ å› æ­¤ SqlSessionFactoryBuilder å®ä¾‹çš„æœ€ä½³ä½œâ½¤åŸŸæ˜¯â½…æ³•ä½œâ½¤åŸŸï¼ˆä¹Ÿå°±æ˜¯å±€éƒ¨â½…æ³•å˜é‡ï¼‰ã€‚ ä½ å¯ä»¥é‡â½¤ SqlSessionFactoryBuilder æ¥åˆ›å»ºå¤šä¸ª SqlSessionFactory å®ä¾‹ï¼Œä½†æœ€å¥½è¿˜æ˜¯ä¸è¦â¼€ç›´ä¿ç•™ç€å®ƒï¼Œä»¥ä¿è¯æ‰€æœ‰ çš„ XML è§£æèµ„æºå¯ä»¥è¢«é‡Šæ”¾ç»™æ›´é‡è¦çš„äº‹æƒ…ã€‚ </p>
</blockquote>
<p>SqlSessionFactory </p>
<blockquote>
<p>SqlSessionFactory â¼€æ—¦è¢«åˆ›å»ºå°±åº”è¯¥åœ¨åº”â½¤çš„è¿â¾æœŸé—´â¼€ç›´å­˜åœ¨ï¼Œæ²¡æœ‰ä»»ä½•ç†ç”±ä¸¢å¼ƒå®ƒæˆ–é‡æ–°åˆ›å»ºå¦â¼€ä¸ªå®ä¾‹ã€‚ ä½¿â½¤ SqlSessionFactory çš„æœ€ä½³å®è·µæ˜¯åœ¨åº”â½¤è¿â¾æœŸé—´ä¸è¦é‡å¤åˆ›å»ºå¤šæ¬¡ï¼Œå¤šæ¬¡é‡å»º SqlSessionFactoryè¢«è§†ä¸ºâ¼€ç§ä»£ç â€œåä¹ æƒ¯â€ã€‚å› æ­¤ SqlSessionFactory çš„æœ€ä½³ä½œâ½¤åŸŸæ˜¯åº”â½¤ä½œâ½¤åŸŸã€‚ æœ‰å¾ˆå¤šâ½…æ³•å¯ä»¥åšåˆ°ï¼Œæœ€ç®€å•çš„å°±æ˜¯ä½¿â½¤å•ä¾‹æ¨¡å¼æˆ–è€…é™æ€å•ä¾‹æ¨¡å¼ã€‚ </p>
</blockquote>
<p>SqlSession </p>
<blockquote>
<p>æ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰å®ƒâ¾ƒâ¼°çš„ SqlSession å®ä¾‹ã€‚SqlSession çš„å®ä¾‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤æ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³çš„ä½œâ½¤åŸŸæ˜¯è¯·æ±‚æˆ–â½…æ³•ä½œâ½¤åŸŸã€‚ ç»å¯¹ä¸èƒ½å°† SqlSession å®ä¾‹çš„å¼•â½¤æ”¾åœ¨â¼€ä¸ªç±»çš„é™æ€åŸŸï¼Œç”šâ¾„â¼€ä¸ªç±» çš„å®ä¾‹å˜é‡ä¹Ÿä¸â¾ã€‚ ä¹Ÿç»ä¸èƒ½å°† SqlSession å®ä¾‹çš„å¼•â½¤æ”¾åœ¨ä»»ä½•ç±»å‹çš„æ‰˜ç®¡ä½œâ½¤åŸŸä¸­ï¼Œâ½å¦‚ Servlet æ¡†æ¶ä¸­çš„ HttpSessionã€‚ å¦‚æœä½ ç°åœ¨æ­£åœ¨ä½¿â½¤â¼€ç§ Web æ¡†æ¶ï¼Œè€ƒè™‘å°† SqlSession æ”¾åœ¨â¼€ä¸ªå’Œ HTTP è¯·æ±‚ç›¸ä¼¼çš„ä½œâ½¤åŸŸ ä¸­ã€‚ æ¢å¥è¯è¯´ï¼Œæ¯æ¬¡æ”¶åˆ° HTTP è¯·æ±‚ï¼Œå°±å¯ä»¥æ‰“å¼€â¼€ä¸ª SqlSessionï¼Œè¿”å›â¼€ä¸ªå“åº”åï¼Œå°±å…³é—­å®ƒã€‚ è¿™ä¸ªå…³é—­æ“ ä½œå¾ˆé‡è¦ï¼Œä¸ºäº†ç¡®ä¿æ¯æ¬¡éƒ½èƒ½æ‰§â¾å…³é—­æ“ä½œï¼Œä½ åº”è¯¥æŠŠè¿™ä¸ªå…³é—­æ“ä½œæ”¾åˆ° finally å—ä¸­ã€‚ ä¸‹â¾¯çš„ç¤ºä¾‹å°±æ˜¯â¼€ä¸ªç¡® ä¿ SqlSession å…³é—­çš„æ ‡å‡†æ¨¡å¼ï¼š </p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> (<span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> sqlSessionFactory.openSession()) &#123;</span><br><span class="line"> <span class="comment">// ä½ çš„åº”â½¤é€»è¾‘ä»£ç  &#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="äº‹åŠ¡é—®é¢˜"><a href="#äº‹åŠ¡é—®é¢˜" class="headerlink" title="äº‹åŠ¡é—®é¢˜"></a>äº‹åŠ¡é—®é¢˜</h3><p>åœ¨ä¹‹å‰çš„è½¬è´¦ä¸šåŠ¡ä¸­ï¼Œæ›´æ–°äº†ä¸¤ä¸ªè´¦æˆ·ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯å®ƒä»¬çš„åŒæ—¶æˆåŠŸæˆ–åŒæ—¶å¤±è´¥ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä½¿â½¤äº‹åŠ¡æœº </p>
<p>åˆ¶ï¼Œåœ¨transferâ½…æ³•å¼€å§‹æ‰§â¾æ—¶å¼€å¯äº‹åŠ¡ï¼Œç›´åˆ°ä¸¤ä¸ªæ›´æ–°éƒ½æˆåŠŸä¹‹åï¼Œå†æäº¤äº‹åŠ¡ï¼Œæˆ‘ä»¬å°è¯•å°†transferâ½…æ³•è¿› </p>
<p>â¾å¦‚ä¸‹ä¿®æ”¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"> <span class="keyword">private</span> <span class="type">AccountDao</span> <span class="variable">accountDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AccountDaoImpl</span>();</span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String fromActno, String toActno, <span class="type">double</span> money)</span> t</span><br><span class="line">hrows MoneyNotEnoughException, AppException &#123;</span><br><span class="line"> <span class="comment">// æŸ¥è¯¢è½¬å‡ºè´¦æˆ·çš„ä½™é¢</span></span><br><span class="line"> <span class="type">Account</span> <span class="variable">fromAct</span> <span class="operator">=</span> accountDao.selectByActno(fromActno);</span><br><span class="line"> <span class="keyword">if</span> (fromAct.getBalance() &lt; money) &#123;</span><br><span class="line"> <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">MoneyNotEnoughException</span>(<span class="string">&quot;å¯¹ä¸èµ·ï¼Œæ‚¨çš„ä½™é¢ä¸â¾œã€‚&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">try</span> &#123;</span><br><span class="line"> <span class="comment">// ç¨‹åºå¦‚æœæ‰§â¾åˆ°è¿™â¾¥è¯´æ˜ä½™é¢å……â¾œ</span></span><br><span class="line"> <span class="comment">// ä¿®æ”¹è´¦æˆ·ä½™é¢</span></span><br><span class="line"> <span class="type">Account</span> <span class="variable">toAct</span> <span class="operator">=</span> accountDao.selectByActno(toActno);</span><br><span class="line"> fromAct.setBalance(fromAct.getBalance() - money);</span><br><span class="line"> toAct.setBalance(toAct.getBalance() + money);</span><br><span class="line"> <span class="comment">// æ›´æ–°æ•°æ®åº“ï¼ˆæ·»åŠ äº‹åŠ¡ï¼‰</span></span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.openSession();</span><br><span class="line"> accountDao.update(fromAct);</span><br><span class="line"> <span class="comment">// æ¨¡æ‹Ÿå¼‚å¸¸</span></span><br><span class="line"> <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"> s.toString();</span><br><span class="line"> accountDao.update(toAct);</span><br><span class="line"> sqlSession.commit();</span><br><span class="line"> sqlSession.close();</span><br><span class="line"> &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"> <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">AppException</span>(<span class="string">&quot;è½¬è´¦å¤±è´¥ï¼ŒæœªçŸ¥åŸå› ï¼&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿â¾å‰æ³¨æ„çœ‹æ•°æ®åº“è¡¨ä¸­å½“å‰çš„æ•°æ®ï¼š </p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008101730204.png" alt="image-20221008101730204"></p>
<p>æ‰§è¡Œç¨‹åº ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008101749730.png" alt="image-20221008101749730"></p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008101756552.png" alt="image-20221008101756552"></p>
<p>å†æ¬¡æŸ¥çœ‹æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®ï¼š </p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008101806224.png" alt="image-20221008101806224"></p>
<p>å‚»çœ¼äº†å§ï¼ï¼ï¼äº‹åŠ¡å‡ºé—®é¢˜äº†ï¼Œè½¬è´¦å¤±è´¥äº†ï¼Œé’±ä»ç„¶æ˜¯å°‘äº†<strong>1</strong>ä¸‡ã€‚è¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿä¸»è¦æ˜¯å› ä¸ºservice å’Œdaoä¸­ä½¿â½¤çš„SqlSessionå¯¹è±¡ä¸æ˜¯åŒâ¼€ä¸ªã€‚ </p>
<p>æ€ä¹ˆåŠï¼Ÿä¸ºäº†ä¿è¯serviceå’Œdaoä¸­ä½¿â½¤çš„SqlSessionå¯¹è±¡æ˜¯åŒâ¼€ä¸ªï¼Œå¯ä»¥å°†SqlSessionå¯¹è±¡å­˜æ”¾åˆ° </p>
<p>ThreadLocalå½“ä¸­ã€‚ä¿®æ”¹SqlSessionUtilâ¼¯å…·ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.manman.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Gaoziman</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * description:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/17 16:44</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SqlSessionUtil</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">SqlSessionUtil</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            sqlSessionFactory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…¨å±€çš„ï¼ŒæœåŠ¡å™¨çº§åˆ«çš„ï¼Œä¸€ä¸ªæœåŠ¡å™¨å½“ä¸­å®šä¹‰ä¸€ä¸ªå³å¯ã€‚</span></span><br><span class="line">    <span class="comment">// ä¸ºä»€ä¹ˆæŠŠSqlSessionå¯¹è±¡æ”¾åˆ°ThreadLocalå½“ä¸­å‘¢ï¼Ÿä¸ºäº†ä¿è¯ä¸€ä¸ªçº¿ç¨‹å¯¹åº”ä¸€ä¸ªSqlSessionã€‚</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ThreadLocal&lt;SqlSession&gt; local = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ä¼šè¯å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ä¼šè¯å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">getSqlSession</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> local.get();</span><br><span class="line">        <span class="keyword">if</span> (sqlSession == <span class="literal">null</span>) &#123;</span><br><span class="line">            sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">            <span class="comment">// å°†sqlSessionå¯¹è±¡ç»‘å®šåˆ°å½“å‰çº¿ç¨‹ä¸Šã€‚</span></span><br><span class="line">            local.set(sqlSession);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sqlSession;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å…³é—­SqlSessionå¯¹è±¡(ä»å½“å‰çº¿ç¨‹ä¸­ç§»é™¤SqlSessionå¯¹è±¡ã€‚)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sqlSession</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">(SqlSession sqlSession)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (sqlSession != <span class="literal">null</span>) &#123;</span><br><span class="line">            sqlSession.close();</span><br><span class="line">            <span class="comment">// æ³¨æ„ç§»é™¤SqlSessionå¯¹è±¡å’Œå½“å‰çº¿ç¨‹çš„ç»‘å®šå…³ç³»ã€‚</span></span><br><span class="line">            <span class="comment">// å› ä¸ºTomcatæœåŠ¡å™¨æ”¯æŒçº¿ç¨‹æ± ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šç”¨è¿‡çš„çº¿ç¨‹å¯¹è±¡t1ï¼Œå¯èƒ½ä¸‹ä¸€æ¬¡è¿˜ä¼šä½¿ç”¨è¿™ä¸ªt1çº¿ç¨‹ã€‚</span></span><br><span class="line">            local.remove();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹daoä¸­çš„â½…æ³•ï¼šAccountDaoImplä¸­æ‰€æœ‰â½…æ³•ä¸­çš„æäº¤commitå’Œå…³é—­closeä»£ç å…¨éƒ¨åˆ é™¤ã€‚</p>
<p>å½“å‰æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®ï¼š </p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008101954262.png" alt="image-20221008101954262"></p>
<p>å†æ¬¡è¿â¾ç¨‹åºï¼š </p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008102007426.png" alt="image-20221008102007426"></p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008102018846.png" alt="image-20221008102018846"></p>
<p>æŸ¥çœ‹æ•°æ®åº“è¡¨ï¼šæ²¡æœ‰é—®é¢˜</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008102032972.png" alt="image-20221008102032972"></p>
<p>å†æµ‹è¯•è½¬è´¦æˆåŠŸï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008102049219.png" alt="image-20221008102049219"></p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008102101081.png" alt="image-20221008102101081"></p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008102108593.png" alt="image-20221008102108593"></p>
<p>å¦‚æœä½™é¢ä¸â¾œå‘¢ï¼š </p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008102123748.png" alt="image-20221008102123748"></p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008102134755.png" alt="image-20221008102134755"></p>
<p>è´¦æˆ·çš„ä½™é¢ä¾ç„¶æ­£å¸¸ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008102146548.png" alt="image-20221008102146548"></p>
<h2 id="ç¬¬å…­ç« -MyBatiså°æŠ€å·§"><a href="#ç¬¬å…­ç« -MyBatiså°æŠ€å·§" class="headerlink" title="ç¬¬å…­ç«  MyBatiså°æŠ€å·§"></a>ç¬¬å…­ç«  MyBatiså°æŠ€å·§</h2><h3 id="6-1-å’Œ"><a href="#6-1-å’Œ" class="headerlink" title="6.1 #{}å’Œ${}"></a>6.1 #{}å’Œ${}</h3><p>#{}ï¼šå…ˆç¼–è¯‘sqlè¯­å¥ï¼Œå†ç»™å ä½ç¬¦ä¼ å€¼ï¼Œåº•å±‚æ˜¯PreparedStatementå®ç°ã€‚å¯ä»¥é˜²â½Œsqlæ³¨â¼Šï¼Œâ½è¾ƒå¸¸ â½¤ã€‚</p>
<p>${}ï¼šå…ˆè¿›â¾sqlè¯­å¥æ‹¼æ¥ï¼Œç„¶åå†ç¼–è¯‘sqlè¯­å¥ï¼Œåº•å±‚æ˜¯Statementå®ç°ã€‚å­˜åœ¨sqlæ³¨â¼Šç°è±¡ã€‚åªæœ‰åœ¨éœ€è¦ è¿›â¾sqlè¯­å¥å…³é”®å­—æ‹¼æ¥çš„æƒ…å†µä¸‹æ‰ä¼šâ½¤åˆ°ã€‚ </p>
<p>éœ€æ±‚ï¼šæ ¹æ®car_typeæŸ¥è¯¢æ±½â»‹ </p>
<p>æ¨¡å—åï¼šmybatis-005-antic </p>
<p><strong>ä½¿ç”¨#{}</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.manman.pojo.Car&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">            id, car_num carNum ,brand,guide_price guidePrice ,produce_time produceTime,car_type carType</span><br><span class="line">        from t_car</span><br><span class="line">        where id =#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>ä½¿ç”¨${}</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectFuzzy&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.manman.pojo.Car&quot;</span>&gt;</span></span><br><span class="line">       select</span><br><span class="line">           id,</span><br><span class="line">           car_num as carNum,</span><br><span class="line">           brand,</span><br><span class="line">           guide_price as guidePrice,</span><br><span class="line">           produce_time as produceTime,</span><br><span class="line">           car_type as carType</span><br><span class="line">       from t_car</span><br><span class="line">       where</span><br><span class="line">      brand like &#x27;%$&#123;brand&#125;%&#x27; </span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>CarMapper.xmlï¼Œæ”¾åœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹ï¼šæ³¨æ„namespaceå¿…é¡»å’Œæ¥â¼åâ¼€è‡´ã€‚idå¿…é¡»å’Œæ¥â¼ä¸­â½…æ³•åâ¼€è‡´ã€‚</p>
<h3 id="6-2-ä»€ä¹ˆæƒ…å†µä¸‹å¿…é¡»ä½¿â½¤"><a href="#6-2-ä»€ä¹ˆæƒ…å†µä¸‹å¿…é¡»ä½¿â½¤" class="headerlink" title="6.2 ä»€ä¹ˆæƒ…å†µä¸‹å¿…é¡»ä½¿â½¤${}"></a>6.2 ä»€ä¹ˆæƒ…å†µä¸‹å¿…é¡»ä½¿â½¤${}</h3><p>å½“éœ€è¦è¿›â¾sqlè¯­å¥å…³é”®å­—æ‹¼æ¥çš„æ—¶å€™ã€‚å¿…é¡»ä½¿â½¤${}</p>
<p>éœ€æ±‚ï¼šé€šè¿‡å‘sqlè¯­å¥ä¸­æ³¨â¼Šascæˆ–descå…³é”®å­—ï¼Œæ¥å®Œæˆæ•°æ®çš„å‡åºæˆ–é™åºæ’åˆ—ã€‚ </p>
<p>å…ˆä½¿â½¤#{}å°è¯•ï¼š </p>
<p>CarMapperæ¥â¼ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æŸ¥è¯¢æ‰€æœ‰çš„Car</span><br><span class="line"> * @param ascOrDesc ascæˆ–desc</span><br><span class="line"> * @return</span><br><span class="line"> */</span><br><span class="line">List<span class="tag">&lt;<span class="name">Car</span>&gt;</span> selectAll(String ascOrDesc);</span><br></pre></td></tr></table></figure>
<p>CarMapper.xmlâ½‚ä»¶ï¼š </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.mybatis.pojo.Car&quot;</span>&gt;</span></span><br><span class="line"> select</span><br><span class="line"> id,car_num as carNum,brand,guide_price as guidePrice,produce_time as prod</span><br><span class="line">uceTime,car_type as carType</span><br><span class="line"> from</span><br><span class="line"> t_car</span><br><span class="line"> order by carNum #&#123;key&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ç¨‹åº </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectAll</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> (CarMapper) SqlSessionUtil.openSession().getMapper(C</span><br><span class="line">arMapper.class);</span><br><span class="line"> List&lt;Car&gt; cars = mapper.selectAll(<span class="string">&quot;desc&quot;</span>);</span><br><span class="line"> cars.forEach(car -&gt; System.out.println(car)); &#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœ ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008104300247.png" alt="image-20221008104300247" style="zoom:80%;" /></p>
<p>æŠ¥é”™çš„åŸå› æ˜¯sqlè¯­å¥ä¸åˆæ³•ï¼Œå› ä¸ºé‡‡â½¤è¿™ç§â½…å¼ä¼ å€¼ï¼Œæœ€ç»ˆsqlè¯­å¥ä¼šæ˜¯è¿™æ ·ï¼š </p>
<blockquote>
<p>select id,car_num as carNum,brand,guide_price as guidePrice,produce_time as produceTime,car_type as carType from t_car order by carNum â€˜descâ€™ </p>
</blockquote>
<p>descæ˜¯â¼€ä¸ªå…³é”®å­—ï¼Œä¸èƒ½å¸¦å•å¼•å·çš„ï¼Œæ‰€ä»¥åœ¨è¿›â¾sqlè¯­å¥å…³é”®å­—æ‹¼æ¥çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿â½¤${}</p>
<h3 id="6-3-æ‹¼æ¥è¡¨å"><a href="#6-3-æ‹¼æ¥è¡¨å" class="headerlink" title="6.3 æ‹¼æ¥è¡¨å"></a>6.3 æ‹¼æ¥è¡¨å</h3><p>ä¸šåŠ¡èƒŒæ™¯ï¼šå®é™…å¼€å‘ä¸­ï¼Œæœ‰çš„è¡¨æ•°æ®é‡â¾®å¸¸åºâ¼¤ï¼Œå¯èƒ½ä¼šé‡‡â½¤åˆ†è¡¨â½…å¼è¿›â¾å­˜å‚¨ï¼Œâ½å¦‚æ¯å¤©â½£æˆâ¼€å¼ è¡¨ï¼Œè¡¨çš„åå­—ä¸â½‡æœŸæŒ‚é’©ï¼Œä¾‹å¦‚ï¼š2022å¹´8â½‰1â½‡â½£æˆçš„è¡¨ï¼št_user20220108ã€‚2000å¹´1â½‰1â½‡â½£æˆçš„ </p>
<p>è¡¨ï¼št_user20000101ã€‚æ­¤æ—¶å‰ç«¯åœ¨è¿›â¾æŸ¥è¯¢çš„æ—¶å€™ä¼šæäº¤â¼€ä¸ªå…·ä½“çš„â½‡æœŸï¼Œâ½å¦‚å‰ç«¯æäº¤çš„â½‡æœŸä¸ºï¼š2000å¹´1â½‰1â½‡ï¼Œé‚£ä¹ˆåç«¯å°±ä¼šæ ¹æ®è¿™ä¸ªâ½‡æœŸåŠ¨æ€æ‹¼æ¥è¡¨åä¸ºï¼št_user20000101ã€‚æœ‰äº†è¿™ä¸ªè¡¨åä¹‹åï¼Œå°† </p>
<p>è¡¨åæ‹¼æ¥åˆ°sqlè¯­å¥å½“ä¸­ï¼Œè¿”å›æŸ¥è¯¢ç»“æœã€‚é‚£ä¹ˆâ¼¤å®¶æ€è€ƒâ¼€ä¸‹ï¼Œæ‹¼æ¥è¡¨ååˆ°sqlè¯­å¥å½“ä¸­åº”è¯¥ä½¿â½¤#{} è¿˜æ˜¯${} å‘¢ï¼Ÿ </p>
<blockquote>
<p>ä½¿â½¤#{}ä¼šæ˜¯è¿™æ ·ï¼šselect * from â€˜t_carâ€™ </p>
<p>ä½¿â½¤${}ä¼šæ˜¯è¿™æ ·ï¼šselect * from t_car </p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllByTableName&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line"> select</span><br><span class="line"> id,car_num as carNum,brand,guide_price as guidePrice,produce_time as prod</span><br><span class="line">uceTime,car_type as carType</span><br><span class="line"> from</span><br><span class="line"> $&#123;tableName&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®è¡¨åæŸ¥è¯¢æ‰€æœ‰çš„Car</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> tableName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;Car&gt; <span class="title function_">selectAllByTableName</span><span class="params">(String tableName)</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectAllByTableName</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.cla</span><br><span class="line">ss);</span><br><span class="line"> List&lt;Car&gt; cars = mapper.selectAllByTableName(<span class="string">&quot;t_car&quot;</span>);</span><br><span class="line"> cars.forEach(car -&gt; System.out.println(car)); &#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008104616616.png" alt="image-20221008104616616"></p>
<h3 id="6-4-æ‰¹é‡åˆ é™¤"><a href="#6-4-æ‰¹é‡åˆ é™¤" class="headerlink" title="6.4 æ‰¹é‡åˆ é™¤"></a>6.4 æ‰¹é‡åˆ é™¤</h3><p>ä¸šåŠ¡èƒŒæ™¯ï¼šâ¼€æ¬¡åˆ é™¤å¤šæ¡è®°å½•</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008104645849.png" alt="image-20221008104645849"></p>
<p>å¯¹åº”çš„sqlè¯­å¥ï¼š </p>
<blockquote>
<p>delete from t_user where id = 1 or id = 2 or id = 3; </p>
<p>delete from t_user where id in(1, 2, 3); </p>
</blockquote>
<p>å‡è®¾ç°åœ¨ä½¿â½¤inçš„â½…å¼å¤„ç†ï¼Œå‰ç«¯ä¼ è¿‡æ¥çš„å­—ç¬¦ä¸²ï¼š1, 2, 3å¦‚æœä½¿â½¤mybatiså¤„ç†ï¼Œåº”è¯¥ä½¿â½¤#{} è¿˜æ˜¯ ${} </p>
<blockquote>
<p>ä½¿â½¤#{} ï¼šdelete from t_user where id in(â€˜1,2,3â€™) æ‰§â¾é”™è¯¯ï¼š<strong>1292</strong> - Truncated incorrect DOUBLE value: â€˜<strong>1</strong>,<strong>2</strong>,<strong>3</strong>â€˜ </p>
<p>ä½¿â½¤${} ï¼šdelete from t_user where id in(1, 2, 3) </p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®idæ‰¹é‡åˆ é™¤</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> ids</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteBatch</span><span class="params">(String ids)</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteBatch&quot;</span>&gt;</span></span><br><span class="line"> delete from t_car where id in($&#123;ids&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteBatch</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.cla</span><br><span class="line">ss);</span><br><span class="line"> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> mapper.deleteBatch(<span class="string">&quot;1,2,3&quot;</span>);</span><br><span class="line"> System.out.println(<span class="string">&quot;åˆ é™¤äº†â¼æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line"> SqlSessionUtil.openSession().commit();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœ ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008104933398.png" alt="image-20221008104933398" style="zoom:80%;" /></p>
<h3 id="6-5-æ¨¡ç³ŠæŸ¥è¯¢"><a href="#6-5-æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="6.5 æ¨¡ç³ŠæŸ¥è¯¢"></a>6.5 æ¨¡ç³ŠæŸ¥è¯¢</h3><p>éœ€æ±‚ï¼šæŸ¥è¯¢å¥”é©°ç³»åˆ—çš„æ±½â»‹ã€‚ã€åªè¦å“ç‰Œbrandä¸­å«æœ‰å¥”é©°ä¸¤ä¸ªå­—çš„éƒ½æŸ¥è¯¢å‡ºæ¥ã€‚ã€‘</p>
<h4 id="ä½¿â½¤"><a href="#ä½¿â½¤" class="headerlink" title="ä½¿â½¤${}"></a>ä½¿â½¤${}</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®å“ç‰Œè¿›â¾æ¨¡ç³ŠæŸ¥è¯¢</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> likeBrank</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;Car&gt; <span class="title function_">selectLikeByBrand</span><span class="params">(String likeBrank)</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectLikeByBrand&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Car&quot;</span>&gt;</span></span><br><span class="line"> select</span><br><span class="line"> id,car_num as carNum,brand,guide_price as guidePrice,produce_time as prod</span><br><span class="line">uceTime,car_type as carType</span><br><span class="line"> from</span><br><span class="line"> t_car</span><br><span class="line"> where</span><br><span class="line"> brand like &#x27;%$&#123;brand&#125;%&#x27;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectLikeByBrand</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.cla</span><br><span class="line">ss);</span><br><span class="line"> List&lt;Car&gt; cars = mapper.selectLikeByBrand(<span class="string">&quot;å¥”é©°&quot;</span>);</span><br><span class="line"> cars.forEach(car -&gt; System.out.println(car)); &#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœ ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008105119361.png" alt="image-20221008105119361"></p>
<h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨#{}"></a>ä½¿ç”¨#{}</h4><p>ç¬¬â¼€ç§ï¼šconcatå‡½æ•°</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectLikeByBrand&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Car&quot;</span>&gt;</span></span><br><span class="line"> select</span><br><span class="line"> id,car_num as carNum,brand,guide_price as guidePrice,produce_time as prod</span><br><span class="line">uceTime,car_type as carType</span><br><span class="line"> from</span><br><span class="line"> t_car</span><br><span class="line"> where</span><br><span class="line"> brand like concat(&#x27;%&#x27;,#&#123;brand&#125;,&#x27;%&#x27;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœ ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008105207058.png" alt="image-20221008105207058"></p>
<p>ç¬¬â¼†ç§ï¼šåŒå¼•å·â½…å¼</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectLikeByBrand&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Car&quot;</span>&gt;</span></span><br><span class="line"> select</span><br><span class="line"> id,car_num as carNum,brand,guide_price as guidePrice,produce_time as prod</span><br><span class="line">uceTime,car_type as carType</span><br><span class="line"> from</span><br><span class="line"> t_car</span><br><span class="line"> where</span><br><span class="line"> brand like &quot;%&quot;#&#123;brand&#125;&quot;%&quot;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008105236005.png" alt="image-20221008105236005"></p>
<h3 id="6-6-æ’â¼Šæ•°æ®æ—¶è·å–â¾ƒåŠ¨â½£æˆçš„ä¸»é”®"><a href="#6-6-æ’â¼Šæ•°æ®æ—¶è·å–â¾ƒåŠ¨â½£æˆçš„ä¸»é”®" class="headerlink" title="6.6 æ’â¼Šæ•°æ®æ—¶è·å–â¾ƒåŠ¨â½£æˆçš„ä¸»é”®"></a>6.6 æ’â¼Šæ•°æ®æ—¶è·å–â¾ƒåŠ¨â½£æˆçš„ä¸»é”®</h3><p>å‰ææ˜¯ï¼šä¸»é”®æ˜¯â¾ƒåŠ¨â½£æˆçš„ã€‚ </p>
<p>ä¸šåŠ¡èƒŒæ™¯ï¼šâ¼€ä¸ªâ½¤æˆ·æœ‰å¤šä¸ªâ»†â¾Šã€‚</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008105345403.png" alt="image-20221008105345403"></p>
<p>æ’â¼Šâ¼€æ¡æ–°çš„è®°å½•ä¹‹åï¼Œâ¾ƒåŠ¨â½£æˆäº†ä¸»é”®ï¼Œâ½½è¿™ä¸ªä¸»é”®éœ€è¦åœ¨å…¶ä»–è¡¨ä¸­ä½¿â½¤æ—¶ã€‚ </p>
<p>æ’â¼Šâ¼€ä¸ªâ½¤æˆ·æ•°æ®çš„åŒæ—¶éœ€è¦ç»™è¯¥â½¤æˆ·åˆ†é…â»†â¾Šï¼šéœ€è¦å°†â½£æˆçš„â½¤æˆ·çš„idæ’â¼Šåˆ°â»†â¾Šè¡¨çš„user_idå­—æ®µ ä¸Šã€‚</p>
<blockquote>
<p>ç¬¬â¼€ç§â½…å¼ï¼šå¯ä»¥å…ˆæ’â¼Šâ½¤æˆ·æ•°æ®ï¼Œå†å†™â¼€æ¡æŸ¥è¯¢è¯­å¥è·å–idï¼Œç„¶åå†æ’â¼Šuser_idå­—æ®µã€‚ã€â½è¾ƒéº»çƒ¦ã€‘ </p>
<p>ç¬¬â¼†ç§â½…å¼ï¼šmybatisæä¾›äº†â¼€ç§â½…å¼æ›´åŠ ä¾¿æ·ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–â¾ƒåŠ¨â½£æˆçš„ä¸»é”®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> car</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">insertUseGeneratedKeys</span><span class="params">(Car car)</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUseGeneratedKeys&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;i</span></span></span><br><span class="line"><span class="string"><span class="tag">d&quot;</span>&gt;</span></span><br><span class="line"> insert into t_car(id,car_num,brand,guide_price,produce_time,car_type) val</span><br><span class="line">ues(null,#&#123;carNum&#125;,#&#123;brand&#125;,#&#123;guidePrice&#125;,#&#123;produceTime&#125;,#&#123;carType&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertUseGeneratedKeys</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.cl</span><br><span class="line">ass);</span><br><span class="line"> <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line"> car.setCarNum(<span class="string">&quot;5262&quot;</span>);</span><br><span class="line"> car.setBrand(<span class="string">&quot;BYDæ±‰&quot;</span>);</span><br><span class="line"> car.setGuidePrice(<span class="number">30.3</span>);</span><br><span class="line"> car.setProduceTime(<span class="string">&quot;2020-10-11&quot;</span>);</span><br><span class="line"> car.setCarType(<span class="string">&quot;æ–°èƒ½æº&quot;</span>);</span><br><span class="line"> mapper.insertUseGeneratedKeys(car);</span><br><span class="line"> SqlSessionUtil.openSession().commit();</span><br><span class="line"> System.out.println(car.getId()); &#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬ä¸ƒç« -MyBatisæŸ¥è¯¢è¯­å¥"><a href="#ç¬¬ä¸ƒç« -MyBatisæŸ¥è¯¢è¯­å¥" class="headerlink" title="ç¬¬ä¸ƒç«  MyBatisæŸ¥è¯¢è¯­å¥"></a>ç¬¬ä¸ƒç«  MyBatisæŸ¥è¯¢è¯­å¥</h2><h3 id="7-1-è¿”å›Car"><a href="#7-1-è¿”å›Car" class="headerlink" title="7.1 è¿”å›Car"></a>7.1 è¿”å›Car</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis.mapper;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.pojo.Car;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Car SQLæ˜ å°„å™¨ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CarMapper</span> &#123;</span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®idä¸»é”®æŸ¥è¯¢ï¼šç»“æœæœ€å¤šåªæœ‰â¼€æ¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> Car <span class="title function_">selectById</span><span class="params">(Long id)</span>; &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.powernode.mybatis.mapper.CarMapper&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Car&quot;</span>&gt;</span></span><br><span class="line"> select id,car_num carNum,brand,guide_price guidePrice,produce_tim</span><br><span class="line">e produceTime,car_type carType from t_car where id = #&#123;id&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis.test;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.mapper.CarMapper;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.pojo.Car;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.utils.SqlSessionUtil;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CarMapperTest</span> &#123;</span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectById</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.class);</span><br><span class="line"> <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> mapper.selectById(<span class="number">35L</span>);</span><br><span class="line"> System.out.println(car);</span><br><span class="line"> &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœ ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008105744526.png" alt="image-20221008105744526"></p>
<h3 id="7-2-è¿”å›List"><a href="#7-2-è¿”å›List" class="headerlink" title="7.2 è¿”å›List"></a>7.2 è¿”å›List<Car\></h3><p>å½“æŸ¥è¯¢çš„è®°å½•æ¡æ•°æ˜¯å¤šæ¡çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿â½¤é›†åˆæ¥æ”¶ã€‚å¦‚æœä½¿â½¤å•ä¸ªå®ä½“ç±»æ¥æ”¶ä¼šå‡ºç°å¼‚å¸¸ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æŸ¥è¯¢æ‰€æœ‰çš„Car</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">List&lt;Car&gt; <span class="title function_">selectAll</span><span class="params">()</span>;	</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Car&quot;</span>&gt;</span></span><br><span class="line"> select id,car_num carNum,brand,guide_price guidePrice,produce_time produceTime,car_type carType from t_car</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectAll</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.cla</span><br><span class="line">ss);</span><br><span class="line"> List&lt;Car&gt; cars = mapper.selectAll();</span><br><span class="line"> cars.forEach(car -&gt; System.out.println(car)); &#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœ ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008110306602.png" alt="image-20221008110306602"></p>
<p><strong>å¦‚æœè¿”å›å¤šæ¡è®°å½•ï¼Œé‡‡â½¤å•ä¸ªå®ä½“ç±»æ¥æ”¶ä¼šæ€æ ·ï¼Ÿ</strong></p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008110351179.png" alt="image-20221008110351179"></p>
<h3 id="7-3-è¿”å›Map"><a href="#7-3-è¿”å›Map" class="headerlink" title="7.3 è¿”å›Map"></a>7.3 è¿”å›Map</h3><p>å½“è¿”å›çš„æ•°æ®ï¼Œæ²¡æœ‰åˆé€‚çš„å®ä½“ç±»å¯¹åº”çš„è¯ï¼Œå¯ä»¥é‡‡â½¤Mapé›†åˆæ¥æ”¶ã€‚å­—æ®µååškeyï¼Œå­—æ®µå€¼åšvalueã€‚ æŸ¥è¯¢å¦‚æœå¯ä»¥ä¿è¯åªæœ‰â¼€æ¡æ•°æ®ï¼Œåˆ™è¿”å›â¼€ä¸ªMapé›†åˆå³å¯ã€‚</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008110441776.png" alt="image-20221008110441776"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šè¿‡idæŸ¥è¯¢â¼€æ¡è®°å½•ï¼Œè¿”å›Mapé›†åˆ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Map&lt;String, Object&gt; <span class="title function_">selectByIdRetMap</span><span class="params">(Long id)</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByIdRetMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line"> select id,car_num carNum,brand,guide_price guidePrice,produce_time produceTime,car_type carType from t_car where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>resultMap=â€mapâ€ï¼Œè¿™æ˜¯å› ä¸ºmybatiså†…ç½®äº†å¾ˆå¤šåˆ«åã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByIdRetMap</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.cla</span><br><span class="line">ss);</span><br><span class="line"> Map&lt;String,Object&gt; car = mapper.selectByIdRetMap(<span class="number">35L</span>);</span><br><span class="line"> System.out.println(car); &#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœ :</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008110542962.png" alt="image-20221008110542962"></p>
<p>å½“ç„¶ï¼Œå¦‚æœè¿”å›â¼€ä¸ªMapé›†åˆï¼Œå¯ä»¥å°†Mapé›†åˆæ”¾åˆ°Listé›†åˆä¸­å—ï¼Ÿå½“ç„¶å¯ä»¥ </p>
<p>åè¿‡æ¥ï¼Œå¦‚æœè¿”å›çš„ä¸æ˜¯â¼€æ¡è®°å½•ï¼Œæ˜¯å¤šæ¡è®°å½•çš„è¯ï¼Œåªé‡‡â½¤å•ä¸ªMapé›†åˆæ¥æ”¶ï¼Œè¿™æ ·åŒæ ·ä¼šå‡ºç°ä¹‹å‰ çš„å¼‚å¸¸ï¼šTooManyResultsException</p>
<h3 id="7-4-è¿”å›List"><a href="#7-4-è¿”å›List" class="headerlink" title="7.4 è¿”å›List"></a>7.4 è¿”å›List<Map\></h3><p>æŸ¥è¯¢ç»“æœæ¡æ•°â¼¤äºç­‰äº1æ¡æ•°æ®ï¼Œåˆ™å¯ä»¥è¿”å›â¼€ä¸ªå­˜å‚¨Mapé›†åˆçš„Listé›†åˆã€‚List<Map\>ç­‰åŒäºList<Car\></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢æ‰€æœ‰çš„Carï¼Œè¿”å›â¼€ä¸ªListé›†åˆã€‚Listé›†åˆä¸­å­˜å‚¨çš„æ˜¯Mapé›†åˆã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;Map&lt;String,Object&gt;&gt; <span class="title function_">selectAllRetListMap</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllRetListMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line"> select id,car_num carNum,brand,guide_price guidePrice,produce_time produceTime,car_type carType from t_car</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectAllRetListMap</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.class);</span><br><span class="line"> List&lt;Map&lt;String,Object&gt;&gt; cars = mapper.selectAllRetListMap();</span><br><span class="line"> System.out.println(cars); &#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§â¾ç»“æœï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line"> &#123;carType=ç‡ƒæ²¹â»‹, carNum=<span class="number">103</span>, guidePrice=<span class="number">50.30</span>, produceTime=<span class="number">2020</span>-<span class="number">10</span>-<span class="number">01</span>, id=</span><br><span class="line"><span class="number">33</span>, brand=å¥”é©°E300L&#125;,</span><br><span class="line"> &#123;carType=ç”µâ»‹, carNum=<span class="number">102</span>, guidePrice=<span class="number">30.23</span>, produceTime=<span class="number">2018</span>-09-<span class="number">10</span>, id=<span class="number">34</span></span><br><span class="line">, brand=â½äºšè¿ªæ±‰&#125;,</span><br><span class="line"> &#123;carType=ç‡ƒæ²¹â»‹, carNum=<span class="number">103</span>, guidePrice=<span class="number">50.30</span>, produceTime=<span class="number">2020</span>-<span class="number">10</span>-<span class="number">01</span>, id=</span><br><span class="line"><span class="number">35</span>, brand=å¥”é©°E300L&#125;,</span><br><span class="line"> &#123;carType=ç‡ƒæ²¹â»‹, carNum=<span class="number">103</span>, guidePrice=<span class="number">33.23</span>, produceTime=<span class="number">2020</span>-<span class="number">10</span>-<span class="number">11</span>, id=</span><br><span class="line"><span class="number">36</span>, brand=å¥”é©°C200&#125;,</span><br><span class="line"> ......</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="7-5-resultMapç»“æœæ˜ å°„"><a href="#7-5-resultMapç»“æœæ˜ å°„" class="headerlink" title="7.5  resultMapç»“æœæ˜ å°„"></a>7.5  resultMapç»“æœæ˜ å°„</h3><ul>
<li>æŸ¥è¯¢ç»“æœçš„åˆ—åå’Œjavaå¯¹è±¡çš„å±æ€§åå¯¹åº”ä¸ä¸Šæ€ä¹ˆåŠï¼Ÿ <ul>
<li>ç¬¬â¼€ç§â½…å¼ï¼šas ç»™åˆ—èµ·åˆ«å </li>
<li>ç¬¬â¼†ç§â½…å¼ï¼šä½¿â½¤resultMapè¿›â¾ç»“æœæ˜ å°„ </li>
<li>ç¬¬ä¸‰ç§â½…å¼ï¼šæ˜¯å¦å¼€å¯é©¼å³°å‘½åâ¾ƒåŠ¨æ˜ å°„ï¼ˆé…ç½®settingsï¼‰</li>
</ul>
</li>
</ul>
<h4 id="resultMapç»“æœæ˜ å°„"><a href="#resultMapç»“æœæ˜ å°„" class="headerlink" title="resultMapç»“æœæ˜ å°„"></a>resultMapç»“æœæ˜ å°„</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢æ‰€æœ‰Carï¼Œä½¿â½¤resultMapè¿›â¾ç»“æœæ˜ å°„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;Car&gt; <span class="title function_">selectAllByResultMap</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment"> resultMap:</span></span><br><span class="line"><span class="comment"> idï¼šè¿™ä¸ªç»“æœæ˜ å°„çš„æ ‡è¯†ï¼Œä½œä¸ºselectæ ‡ç­¾çš„resultMapå±æ€§çš„å€¼ã€‚</span></span><br><span class="line"><span class="comment"> typeï¼šç»“æœé›†è¦æ˜ å°„çš„ç±»ã€‚å¯ä»¥ä½¿â½¤åˆ«åã€‚</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;carResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--å¯¹è±¡çš„å”¯â¼€æ ‡è¯†ï¼Œå®˜â½…è§£é‡Šæ˜¯ï¼šä¸ºäº†æâ¾¼mybatisçš„æ€§èƒ½ã€‚å»ºè®®å†™ä¸Šã€‚--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;carNum&quot;</span> <span class="attr">column</span>=<span class="string">&quot;car_num&quot;</span>/&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--å½“å±æ€§åå’Œæ•°æ®åº“åˆ—åâ¼€è‡´æ—¶ï¼Œå¯ä»¥çœç•¥ã€‚ä½†å»ºè®®éƒ½å†™ä¸Šã€‚--&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--javaTypeâ½¤æ¥æŒ‡å®šå±æ€§ç±»å‹ã€‚jdbcTypeâ½¤æ¥æŒ‡å®šåˆ—ç±»å‹ã€‚â¼€èˆ¬å¯ä»¥çœç•¥ã€‚--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;brand&quot;</span> <span class="attr">column</span>=<span class="string">&quot;brand&quot;</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;guidePrice&quot;</span> <span class="attr">column</span>=<span class="string">&quot;guide_price&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;produceTime&quot;</span> <span class="attr">column</span>=<span class="string">&quot;produce_time&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;carType&quot;</span> <span class="attr">column</span>=<span class="string">&quot;car_type&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--resultMapå±æ€§çš„å€¼å¿…é¡»å’ŒresultMapæ ‡ç­¾ä¸­idå±æ€§å€¼â¼€è‡´ã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllByResultMap&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;carResultMap&quot;</span>&gt;</span></span><br><span class="line"> select * from t_car</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectAllByResultMap</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">carMapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.</span><br><span class="line">class);</span><br><span class="line"> List&lt;Car&gt; cars = carMapper.selectAllByResultMap();</span><br><span class="line"> System.out.println(cars); &#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§â¾ç»“æœæ­£å¸¸</p>
<h4 id="æ˜¯å¦å¼€å¯é©¼å³°å‘½åâ¾ƒåŠ¨æ˜ å°„"><a href="#æ˜¯å¦å¼€å¯é©¼å³°å‘½åâ¾ƒåŠ¨æ˜ å°„" class="headerlink" title="æ˜¯å¦å¼€å¯é©¼å³°å‘½åâ¾ƒåŠ¨æ˜ å°„"></a>æ˜¯å¦å¼€å¯é©¼å³°å‘½åâ¾ƒåŠ¨æ˜ å°„</h4><p>ä½¿â½¤è¿™ç§â½…å¼çš„å‰ææ˜¯ï¼šå±æ€§åéµå¾ªJavaçš„å‘½åè§„èŒƒï¼Œæ•°æ®åº“è¡¨çš„åˆ—åéµå¾ªSQLçš„å‘½åè§„èŒƒã€‚ </p>
<blockquote>
<p>Javaå‘½åè§„èŒƒï¼šâ¾¸å­—âºŸâ¼©å†™ï¼Œåâ¾¯æ¯ä¸ªå•è¯â¾¸å­—âºŸâ¼¤å†™ï¼Œéµå¾ªé©¼å³°å‘½åâ½…å¼ã€‚ </p>
<p>SQLå‘½åè§„èŒƒï¼šå…¨éƒ¨â¼©å†™ï¼Œå•è¯ä¹‹é—´é‡‡â½¤ä¸‹åˆ’çº¿åˆ†å‰²ã€‚ </p>
</blockquote>
<p>â½å¦‚ä»¥ä¸‹çš„å¯¹åº”å…³ç³»ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008111042849.png" alt="image-20221008111042849"></p>
<p>å¦‚ä½•å¯â½¤è¯¥åŠŸèƒ½ï¼Œåœ¨mybatis-config.xmlâ½‚ä»¶ä¸­è¿›â¾é…ç½®ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ”¾åœ¨propertiesæ ‡ç­¾åâ¾¯--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æŸ¥è¯¢æ‰€æœ‰Carï¼Œå¯â½¤é©¼å³°å‘½åâ¾ƒåŠ¨æ˜ å°„</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">List&lt;Car&gt; <span class="title function_">selectAllByMapUnderscoreToCamelCase</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllByMapUnderscoreToCamelCase&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Car&quot;</span>&gt;</span></span><br><span class="line"> select * from t_car</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectAllByMapUnderscoreToCamelCase</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">carMapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.class);</span><br><span class="line"> List&lt;Car&gt; cars = carMapper.selectAllByMapUnderscoreToCamelCase();</span><br><span class="line"> System.out.println(cars); &#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§â¾ç»“æœæ­£å¸¸ã€‚ </p>
<h3 id="7-6-è¿”å›æ€»è®°å½•æ¡æ•°"><a href="#7-6-è¿”å›æ€»è®°å½•æ¡æ•°" class="headerlink" title="7.6  è¿”å›æ€»è®°å½•æ¡æ•°"></a>7.6  è¿”å›æ€»è®°å½•æ¡æ•°</h3><p>éœ€æ±‚ï¼šæŸ¥è¯¢æ€»è®°å½•æ¡æ•°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–æ€»è®°å½•æ¡æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Long <span class="title function_">selectTotal</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--<span class="type">long</span>æ˜¯åˆ«åï¼Œå¯å‚è€ƒmybatiså¼€å‘â¼¿å†Œã€‚--&gt;</span><br><span class="line">&lt;select id=<span class="string">&quot;selectTotal&quot;</span> resultType=<span class="string">&quot;long&quot;</span>&gt;</span><br><span class="line"> select <span class="title function_">count</span><span class="params">(*)</span> from t_car</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectTotal</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">carMapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.</span><br><span class="line">class);</span><br><span class="line"> <span class="type">Long</span> <span class="variable">total</span> <span class="operator">=</span> carMapper.selectTotal();</span><br><span class="line"> System.out.println(total); &#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008111310143.png" alt="image-20221008111310143"></p>
<h2 id="ç¬¬å…«ç« -åŠ¨æ€SQL"><a href="#ç¬¬å…«ç« -åŠ¨æ€SQL" class="headerlink" title="ç¬¬å…«ç«  åŠ¨æ€SQL"></a>ç¬¬å…«ç«  åŠ¨æ€SQL</h2><p>æœ‰çš„ä¸šåŠ¡åœºæ™¯ï¼Œä¹Ÿéœ€è¦SQLè¯­å¥è¿›â¾åŠ¨æ€æ‹¼æ¥ï¼Œä¾‹å¦‚ï¼š </p>
<p>æ‰¹é‡åˆ é™¤ </p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008111342233.png" alt="image-20221008111342233"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> t_car <span class="keyword">where</span> id <span class="keyword">in</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,......è¿™â¾¥çš„å€¼æ˜¯åŠ¨æ€çš„ï¼Œæ ¹æ®â½¤æˆ·é€‰æ‹©çš„idä¸åŒï¼Œå€¼æ˜¯ä¸åŒçš„);</span><br></pre></td></tr></table></figure>
<ul>
<li>å¤šæ¡ä»¶æŸ¥è¯¢ </li>
</ul>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008111451951.png" alt="image-20221008111451951"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_car <span class="keyword">where</span> brand <span class="keyword">like</span> <span class="string">&#x27;ä¸°â½¥%&#x27;</span> <span class="keyword">and</span> guide_price <span class="operator">&gt;</span> <span class="number">30</span> <span class="keyword">and</span> .....;</span><br></pre></td></tr></table></figure>
<h3 id="8-1-ifæ ‡ç­¾"><a href="#8-1-ifæ ‡ç­¾" class="headerlink" title="8.1 ifæ ‡ç­¾"></a>8.1 ifæ ‡ç­¾</h3><p>éœ€æ±‚ï¼šå¤šæ¡ä»¶æŸ¥è¯¢ã€‚ </p>
<p>å¯èƒ½çš„æ¡ä»¶åŒ…æ‹¬ï¼šå“ç‰Œï¼ˆbrandï¼‰ã€æŒ‡å¯¼ä»·æ ¼ï¼ˆguide_priceï¼‰ã€æ±½â»‹ç±»å‹ï¼ˆcar_typeï¼‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis.mapper;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.pojo.Car;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CarMapper</span> &#123;</span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®å¤šæ¡ä»¶æŸ¥è¯¢Car</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> brand</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> guidePrice</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> carType</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> List&lt;Car&gt; <span class="title function_">selectByMultiCondition</span><span class="params">(<span class="meta">@Param(&quot;brand&quot;)</span> String brand, <span class="meta">@Param(&quot;guidePrice&quot;)</span> Double guidePrice, <span class="meta">@Param(&quot;carType&quot;)</span> String carType)</span>; &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.powernode.mybatis.mapper.CarMapper&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByMultiCondition&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line"> select * from t_car where</span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;brand != null and brand != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line"> brand like #&#123;brand&#125;&quot;%&quot;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;guidePrice != null and guidePrice != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line"> and guide_price &gt;= #&#123;guidePrice&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;carType != null and carType != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line"> and car_type = #&#123;carType&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis.test;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.mapper.CarMapper;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.pojo.Car;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.utils.SqlSessionUtil;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CarMapperTest</span> &#123;</span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByMultiCondition</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.class);</span><br><span class="line"> List&lt;Car&gt; cars = mapper.selectByMultiCondition(<span class="string">&quot;ä¸°â½¥&quot;</span>, <span class="number">20.0</span>, <span class="string">&quot;ç‡ƒæ²¹ â»‹&quot;</span>);</span><br><span class="line"> System.out.println(cars);</span><br><span class="line"> &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§â¾ç»“æœï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008111816462.png" alt="image-20221008111816462"></p>
<p>å¦‚æœç¬¬â¼€ä¸ªæ¡ä»¶ä¸ºç©ºï¼Œå‰©ä¸‹ä¸¤ä¸ªæ¡ä»¶ä¸ä¸ºç©ºï¼Œä¼šæ˜¯æ€æ ·å‘¢ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Car&gt; cars = mapper.selectByMultiCondition(<span class="string">&quot;&quot;</span>, <span class="number">20.0</span>, <span class="string">&quot;ç‡ƒæ²¹â»‹&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>æ‰§â¾ç»“æœï¼š </p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008111953840.png" alt="image-20221008111953840"></p>
<p>æŠ¥é”™äº†ï¼ŒSQLè¯­æ³•æœ‰é—®é¢˜ï¼Œwhereåâ¾¯å‡ºç°äº†andã€‚è¿™è¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ </p>
<p>â— å¯ä»¥whereåâ¾¯æ·»åŠ â¼€ä¸ªæ’æˆâ½´çš„æ¡ä»¶ã€‚</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008112034507.png" alt="image-20221008112034507" style="zoom:67%;" /></p>
<p>æ‰§â¾ç»“æœï¼š </p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008112055280.png" alt="image-20221008112055280" style="zoom:67%;" /></p>
<p>å¦‚æœä¸‰ä¸ªæ¡ä»¶éƒ½æ˜¯ç©ºï¼Œæœ‰å½±å“å—ï¼Ÿ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Car&gt; cars = mapper.selectByMultiCondition(<span class="string">&quot;&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>æ‰§â¾ç»“æœï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008112145303.png" alt="image-20221008112145303"></p>
<p>ä¸‰ä¸ªæ¡ä»¶éƒ½ä¸ä¸ºç©ºå‘¢ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Car&gt; cars = mapper.selectByMultiCondition(<span class="string">&quot;ä¸°â½¥&quot;</span>, <span class="number">20.0</span>, <span class="string">&quot;ç‡ƒæ²¹â»‹&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>æ‰§â¾ç»“æœï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008112230405.png" alt="image-20221008112230405"></p>
<h3 id="8-2-whereæ ‡ç­¾"><a href="#8-2-whereæ ‡ç­¾" class="headerlink" title="8.2 whereæ ‡ç­¾"></a>8.2 whereæ ‡ç­¾</h3><p>whereæ ‡ç­¾çš„ä½œâ½¤ï¼šè®©whereâ¼¦å¥æ›´åŠ åŠ¨æ€æ™ºèƒ½ã€‚ æ‰€æœ‰æ¡ä»¶éƒ½ä¸ºç©ºæ—¶ï¼Œwhereæ ‡ç­¾ä¿è¯ä¸ä¼šâ½£æˆwhereâ¼¦å¥ã€‚ â¾ƒåŠ¨å»é™¤æŸäº›æ¡ä»¶å‰â¾¯å¤šä½™çš„andæˆ–orã€‚</p>
<p>ç»§ç»­ä½¿â½¤ifæ ‡ç­¾ä¸­çš„éœ€æ±‚ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ ¹æ®å¤šæ¡ä»¶æŸ¥è¯¢Carï¼Œä½¿â½¤whereæ ‡ç­¾</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> brand</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> guidePrice</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> carType</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">List&lt;Car&gt; <span class="title function_">selectByMultiConditionWithWhere</span><span class="params">(<span class="meta">@Param(&quot;brand&quot;)</span> String brand, <span class="meta">@Param(&quot;guidePrice&quot;)</span> Double guidePrice, <span class="meta">@Param(&quot;carType&quot;)</span> String carType)</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByMultiConditionWithWhere&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line"> select * from t_car</span><br><span class="line"> <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;brand != null and brand != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line"> and brand like #&#123;brand&#125;&quot;%&quot;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;guidePrice != null and guidePrice != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line"> and guide_price &gt;= #&#123;guidePrice&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;carType != null and carType != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line"> and car_type = #&#123;carType&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByMultiConditionWithWhere</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.cla</span><br><span class="line">ss);</span><br><span class="line"> List&lt;Car&gt; cars = mapper.selectByMultiConditionWithWhere(<span class="string">&quot;ä¸°â½¥&quot;</span>, <span class="number">20.0</span>, <span class="string">&quot;ç‡ƒæ²¹â»‹&quot;</span>);</span><br><span class="line"> System.out.println(cars); &#125;</span><br></pre></td></tr></table></figure>
<p>è¿â¾ç»“æœï¼š</p>
<p> <img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008112423041.png" alt="image-20221008112423041"></p>
<p>å¦‚æœæ‰€æœ‰æ¡ä»¶éƒ½æ˜¯ç©ºå‘¢ï¼Ÿ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Car&gt; cars = mapper.selectByMultiConditionWithWhere(<span class="string">&quot;&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœ ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008112502545.png" alt="image-20221008112502545"></p>
<p>å®ƒå¯ä»¥â¾ƒåŠ¨å»æ‰å‰â¾¯å¤šä½™çš„andï¼Œé‚£å¯ä»¥â¾ƒåŠ¨å»æ‰å‰â¾¯å¤šä½™çš„orå—ï¼Ÿ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Car&gt; cars = mapper.selectByMultiConditionWithWhere(<span class="string">&quot;ä¸°â½¥&quot;</span>, <span class="number">20.0</span>, <span class="string">&quot;ç‡ƒæ²¹ â»‹&quot;</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByMultiConditionWithWhere&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line"> select * from t_car</span><br><span class="line"> <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;brand != null and brand != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line"> or brand like #&#123;brand&#125;&quot;%&quot;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;guidePrice != null and guidePrice != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line"> and guide_price &gt;= #&#123;guidePrice&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;carType != null and carType != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line"> and car_type = #&#123;carType&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ‰§â¾ç»“æœï¼š </p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008112541446.png" alt="image-20221008112541446"></p>
<h3 id="8-3-trimæ ‡ç­¾"><a href="#8-3-trimæ ‡ç­¾" class="headerlink" title="8.3 trimæ ‡ç­¾"></a>8.3 trimæ ‡ç­¾</h3><ul>
<li>trimæ ‡ç­¾çš„å±æ€§ï¼š </li>
</ul>
<p>prefixï¼šåœ¨trimæ ‡ç­¾ä¸­çš„è¯­å¥å‰æ·»åŠ å†…å®¹ </p>
<p>suffixï¼šåœ¨trimæ ‡ç­¾ä¸­çš„è¯­å¥åæ·»åŠ å†…å®¹ </p>
<p>prefixOverridesï¼šå‰ç¼€è¦†ç›–æ‰ï¼ˆå»æ‰ï¼‰ </p>
<p>suffixOverridesï¼šåç¼€è¦†ç›–æ‰ï¼ˆå»æ‰ï¼‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ ¹æ®å¤šæ¡ä»¶æŸ¥è¯¢Carï¼Œä½¿â½¤trimæ ‡ç­¾</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> brand</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> guidePrice</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> carType</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">List&lt;Car&gt; <span class="title function_">selectByMultiConditionWithTrim</span><span class="params">(<span class="meta">@Param(&quot;brand&quot;)</span> String brand, <span class="meta">@Param(&quot;guidePrice&quot;)</span> Double guidePrice, <span class="meta">@Param(&quot;carType&quot;)</span> String carType)</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByMultiConditionWithTrim&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line"> select * from t_car</span><br><span class="line"> <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;where&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;and|or&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;brand != null and brand != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line"> brand like #&#123;brand&#125;&quot;%&quot; and</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;guidePrice != null and guidePrice != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line"> guide_price &gt;= #&#123;guidePrice&#125; and</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;carType != null and carType != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line"> car_type = #&#123;carType&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByMultiConditionWithTrim</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.class);</span><br><span class="line"> List&lt;Car&gt; cars = mapper.selectByMultiConditionWithTrim(<span class="string">&quot;ä¸°â½¥&quot;</span>, <span class="number">20.0</span>, <span class="string">&quot;&quot;</span>) ;</span><br><span class="line"> System.out.println(cars); &#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008113527108.png" alt="image-20221008113527108"></p>
<p>å¦‚æœæ‰€æœ‰æ¡ä»¶ä¸ºç©ºï¼Œwhereä¼šè¢«åŠ ä¸Šå—ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Car&gt; cars = mapper.selectByMultiConditionWithTrim(<span class="string">&quot;&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>æ‰§â¾ç»“æœï¼š </p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008113554418.png" alt="image-20221008113554418"></p>
<h3 id="8-4-setæ ‡ç­¾"><a href="#8-4-setæ ‡ç­¾" class="headerlink" title="8.4 setæ ‡ç­¾"></a>8.4 setæ ‡ç­¾</h3><p>ä¸»è¦ä½¿â½¤åœ¨updateè¯­å¥å½“ä¸­ï¼Œâ½¤æ¥â½£æˆsetå…³é”®å­—ï¼ŒåŒæ—¶å»æ‰æœ€åå¤šä½™çš„â€œ,â€ </p>
<p>â½å¦‚æˆ‘ä»¬åªæ›´æ–°æäº¤çš„ä¸ä¸ºç©ºçš„å­—æ®µï¼Œå¦‚æœæäº¤çš„æ•°æ®æ˜¯ç©ºæˆ–è€…â€â€ï¼Œé‚£ä¹ˆè¿™ä¸ªå­—æ®µæˆ‘ä»¬å°†ä¸æ›´æ–°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ›´æ–°ä¿¡æ¯ï¼Œä½¿â½¤setæ ‡ç­¾</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> car</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">updateWithSet</span><span class="params">(Car car)</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateWithSet&quot;</span>&gt;</span></span><br><span class="line"> update t_car</span><br><span class="line"> <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;carNum != null and carNum != &#x27;&#x27;&quot;</span>&gt;</span>car_num = #&#123;carNum&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;brand != null and brand != &#x27;&#x27;&quot;</span>&gt;</span>brand = #&#123;brand&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;guidePrice != null and guidePrice != &#x27;&#x27;&quot;</span>&gt;</span>guide_price = #&#123;guidePrice&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;produceTime != null and produceTime != &#x27;&#x27;&quot;</span>&gt;</span>produce_time = #&#123;produceTime&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;carType != null and carType != &#x27;&#x27;&quot;</span>&gt;</span>car_type = #&#123;carType&#125;,&lt;/i f&gt;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line"> where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdateWithSet</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.cla</span><br><span class="line">ss);</span><br><span class="line"> <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="number">38L</span>,<span class="string">&quot;1001&quot;</span>,<span class="string">&quot;ä¸°â½¥éœ¸é“2&quot;</span>,<span class="number">10.0</span>,<span class="string">&quot;&quot;</span>,<span class="literal">null</span>);</span><br><span class="line"> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> mapper.updateWithSet(car);</span><br><span class="line"> System.out.println(count);</span><br><span class="line"> SqlSessionUtil.openSession().commit(); &#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§â¾ç»“æœï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008113756964.png" alt="image-20221008113756964"></p>
<h3 id="8-5-choose-when-otherwise"><a href="#8-5-choose-when-otherwise" class="headerlink" title="8.5 choose when otherwise"></a>8.5 choose when otherwise</h3><p>è¿™ä¸‰ä¸ªæ ‡ç­¾æ˜¯åœ¨â¼€èµ·ä½¿â½¤çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;choose&gt;</span><br><span class="line"> &lt;when&gt;&lt;/when&gt;</span><br><span class="line"> &lt;when&gt;&lt;/when&gt;</span><br><span class="line"> &lt;when&gt;&lt;/when&gt;</span><br><span class="line"> &lt;otherwise&gt;&lt;/otherwise&gt;</span><br><span class="line">&lt;/choose&gt;</span><br></pre></td></tr></table></figure>
<p>ç­‰åŒäºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>()&#123;</span><br><span class="line"> </span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>()&#123;</span><br><span class="line"> </span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>()&#123;</span><br><span class="line"> </span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>()&#123;</span><br><span class="line"> </span><br><span class="line">&#125;<span class="keyword">else</span>&#123; &#125;</span><br></pre></td></tr></table></figure>
<p>åªæœ‰â¼€ä¸ªåˆ†â½€ä¼šè¢«é€‰æ‹©ï¼ï¼ï¼ï¼</p>
<p>éœ€æ±‚ï¼šå…ˆæ ¹æ®å“ç‰ŒæŸ¥è¯¢ï¼Œå¦‚æœæ²¡æœ‰æä¾›å“ç‰Œï¼Œå†æ ¹æ®æŒ‡å¯¼ä»·æ ¼æŸ¥è¯¢ï¼Œå¦‚æœæ²¡æœ‰æä¾›æŒ‡å¯¼ä»·æ ¼ï¼Œå°±æ ¹æ®â½£äº§â½‡æœŸæŸ¥è¯¢ã€‚ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* ä½¿â½¤choose when otherwiseæ ‡ç­¾æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> brand</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> guidePrice</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> produceTime</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">List&lt;Car&gt; <span class="title function_">selectWithChoose</span><span class="params">(<span class="meta">@Param(&quot;brand&quot;)</span> String brand, <span class="meta">@Param(&quot;guidePrice&quot;)</span> Double guidePrice, <span class="meta">@Param(&quot;produceTime&quot;)</span> String produceTime)</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectWithChoose&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line"> select * from t_car</span><br><span class="line"> <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;brand != null and brand != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line"> brand like #&#123;brand&#125;&quot;%&quot;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;guidePrice != null and guidePrice != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line"> guide_price &gt;= #&#123;guidePrice&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line"> produce_time &gt;= #&#123;produceTime&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectWithChoose</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.cla</span><br><span class="line">ss);</span><br><span class="line"> <span class="comment">//List&lt;Car&gt; cars = mapper.selectWithChoose(&quot;ä¸°â½¥éœ¸é“&quot;, 20.0, &quot;2000-10-1</span></span><br><span class="line"><span class="number">0</span><span class="string">&quot;);</span></span><br><span class="line"><span class="string"> //List&lt;Car&gt; cars = mapper.selectWithChoose(&quot;</span><span class="string">&quot;, 20.0, &quot;</span><span class="number">2000</span>-<span class="number">10</span>-<span class="number">10</span><span class="string">&quot;);</span></span><br><span class="line"><span class="string"> //List&lt;Car&gt; cars = mapper.selectWithChoose(&quot;</span><span class="string">&quot;, null, &quot;</span><span class="number">2000</span>-<span class="number">10</span>-<span class="number">10</span><span class="string">&quot;);</span></span><br><span class="line"><span class="string"> List&lt;Car&gt; cars = mapper.selectWithChoose(&quot;</span><span class="string">&quot;, null, &quot;</span><span class="string">&quot;);</span></span><br><span class="line"><span class="string"> System.out.println(cars); &#125;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008114003604.png" alt="image-20221008114003604"></p>
<h3 id="8-6-foreachæ ‡ç­¾"><a href="#8-6-foreachæ ‡ç­¾" class="headerlink" title="8.6  foreachæ ‡ç­¾"></a>8.6  foreachæ ‡ç­¾</h3><p>å¾ªç¯æ•°ç»„æˆ–é›†åˆï¼ŒåŠ¨æ€â½£æˆsqlï¼Œâ½å¦‚è¿™æ ·çš„SQLï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> t_car <span class="keyword">where</span> id <span class="keyword">in</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> t_car <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">1</span> <span class="keyword">or</span> id <span class="operator">=</span> <span class="number">2</span> <span class="keyword">or</span> id <span class="operator">=</span> <span class="number">3</span>; <span class="number">12</span></span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_car <span class="keyword">values</span></span><br><span class="line"> (<span class="keyword">null</span>,<span class="string">&#x27;1001&#x27;</span>,<span class="string">&#x27;å‡¯ç¾ç‘&#x27;</span>,<span class="number">35.0</span>,<span class="string">&#x27;2010-10-11&#x27;</span>,<span class="string">&#x27;ç‡ƒæ²¹â»‹&#x27;</span>),</span><br><span class="line"> (<span class="keyword">null</span>,<span class="string">&#x27;1002&#x27;</span>,<span class="string">&#x27;â½äºšè¿ªå”&#x27;</span>,<span class="number">31.0</span>,<span class="string">&#x27;2020-11-11&#x27;</span>,<span class="string">&#x27;æ–°èƒ½æº&#x27;</span>),</span><br><span class="line"> (<span class="keyword">null</span>,<span class="string">&#x27;1003&#x27;</span>,<span class="string">&#x27;â½äºšè¿ªå®‹&#x27;</span>,<span class="number">32.0</span>,<span class="string">&#x27;2020-10-11&#x27;</span>,<span class="string">&#x27;æ–°èƒ½æº&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h4 id="æ‰¹é‡åˆ é™¤"><a href="#æ‰¹é‡åˆ é™¤" class="headerlink" title="æ‰¹é‡åˆ é™¤"></a>æ‰¹é‡åˆ é™¤</h4><ul>
<li>â½¤inæ¥åˆ é™¤</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* é€šè¿‡foreachå®Œæˆæ‰¹é‡åˆ é™¤</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> ids</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteBatchByForeach</span><span class="params">(<span class="meta">@Param(&quot;ids&quot;)</span> Long[] ids)</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">collectionï¼šé›†åˆæˆ–æ•°ç»„</span></span><br><span class="line"><span class="comment">itemï¼šé›†åˆæˆ–æ•°ç»„ä¸­çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">separatorï¼šåˆ†éš”ç¬¦</span></span><br><span class="line"><span class="comment">openï¼šforeachæ ‡ç­¾ä¸­æ‰€æœ‰å†…å®¹çš„å¼€å§‹</span></span><br><span class="line"><span class="comment">closeï¼šforeachæ ‡ç­¾ä¸­æ‰€æœ‰å†…å®¹çš„ç»“æŸ</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteBatchByForeach&quot;</span>&gt;</span></span><br><span class="line"> delete from t_car where id in</span><br><span class="line"> <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line"> #&#123;id&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteBatchByForeach</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.cla</span><br><span class="line">ss);</span><br><span class="line"> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> mapper.deleteBatchByForeach(<span class="keyword">new</span> <span class="title class_">Long</span>[]&#123;<span class="number">40L</span>, <span class="number">41L</span>, <span class="number">42L</span>&#125;);</span><br><span class="line"> System.out.println(<span class="string">&quot;åˆ é™¤äº†â¼æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line"> SqlSessionUtil.openSession().commit(); &#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§â¾ç»“æœï¼š </p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008114449025.png" alt="image-20221008114449025"></p>
<ul>
<li>â½¤oræ¥åˆ é™¤ </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* é€šè¿‡foreachå®Œæˆæ‰¹é‡åˆ é™¤</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> ids</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteBatchByForeach2</span><span class="params">(<span class="meta">@Param(&quot;ids&quot;)</span> Long[] ids)</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteBatchByForeach2&quot;</span>&gt;</span></span><br><span class="line"> delete from t_car where</span><br><span class="line"> <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;or&quot;</span>&gt;</span></span><br><span class="line"> id = #&#123;id&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteBatchByForeach2</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.cla</span><br><span class="line">ss);</span><br><span class="line"> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> mapper.deleteBatchByForeach2(<span class="keyword">new</span> <span class="title class_">Long</span>[]&#123;<span class="number">40L</span>, <span class="number">41L</span>, <span class="number">42L</span>&#125;);</span><br><span class="line"> System.out.println(<span class="string">&quot;åˆ é™¤äº†â¼æ¡è®°å½•ï¼š&quot;</span> + count);</span><br><span class="line"> SqlSessionUtil.openSession().commit(); &#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœ ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008114551486.png" alt="image-20221008114551486"></p>
<h4 id="æ‰¹é‡æ·»åŠ "><a href="#æ‰¹é‡æ·»åŠ " class="headerlink" title="æ‰¹é‡æ·»åŠ "></a>æ‰¹é‡æ·»åŠ </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ‰¹é‡æ·»åŠ ï¼Œä½¿â½¤foreachæ ‡ç­¾</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> cars</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">insertBatchByForeach</span><span class="params">(<span class="meta">@Param(&quot;cars&quot;)</span> List&lt;Car&gt; cars)</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertBatchByForeach&quot;</span>&gt;</span></span><br><span class="line"> insert into t_car values</span><br><span class="line"> <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;cars&quot;</span> <span class="attr">item</span>=<span class="string">&quot;car&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line"> (null,#&#123;car.carNum&#125;,#&#123;car.brand&#125;,#&#123;car.guidePrice&#125;,#&#123;car.produceTime&#125;,#</span><br><span class="line">&#123;car.carType&#125;)</span><br><span class="line"> <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertBatchByForeach</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(CarMapper.cl</span><br><span class="line">ass);</span><br><span class="line"> <span class="type">Car</span> <span class="variable">car1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="literal">null</span>, <span class="string">&quot;2001&quot;</span>, <span class="string">&quot;å…°åšåŸºå°¼&quot;</span>, <span class="number">100.0</span>, <span class="string">&quot;1998-10-11&quot;</span>, <span class="string">&quot;ç‡ƒæ²¹ â»‹&quot;</span>);</span><br><span class="line"> <span class="type">Car</span> <span class="variable">car2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="literal">null</span>, <span class="string">&quot;2001&quot;</span>, <span class="string">&quot;å…°åšåŸºå°¼&quot;</span>, <span class="number">100.0</span>, <span class="string">&quot;1998-10-11&quot;</span>, <span class="string">&quot;ç‡ƒæ²¹ â»‹&quot;</span>);</span><br><span class="line"> <span class="type">Car</span> <span class="variable">car3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="literal">null</span>, <span class="string">&quot;2001&quot;</span>, <span class="string">&quot;å…°åšåŸºå°¼&quot;</span>, <span class="number">100.0</span>, <span class="string">&quot;1998-10-11&quot;</span>, <span class="string">&quot;ç‡ƒæ²¹ â»‹&quot;</span>);</span><br><span class="line"> List&lt;Car&gt; cars = Arrays.asList(car1, car2, car3);</span><br><span class="line"> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> mapper.insertBatchByForeach(cars);</span><br><span class="line"> System.out.println(<span class="string">&quot;æ’â¼Šäº†â¼æ¡è®°å½•&quot;</span> + count);</span><br><span class="line"> SqlSessionUtil.openSession().commit(); &#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§â¾ç»“æœï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008114715205.png" alt="image-20221008114715205"></p>
<h3 id="8-7-sqlæ ‡ç­¾ä¸includeæ ‡ç­¾"><a href="#8-7-sqlæ ‡ç­¾ä¸includeæ ‡ç­¾" class="headerlink" title="8.7 sqlæ ‡ç­¾ä¸includeæ ‡ç­¾"></a>8.7 sqlæ ‡ç­¾ä¸includeæ ‡ç­¾</h3><p>sqlæ ‡ç­¾â½¤æ¥å£°æ˜sqlâ½šæ®µ </p>
<p>includeæ ‡ç­¾â½¤æ¥å°†å£°æ˜çš„sqlâ½šæ®µåŒ…å«åˆ°æŸä¸ªsqlè¯­å¥å½“ä¸­ </p>
<p>ä½œâ½¤ï¼šä»£ç å¤â½¤ã€‚æ˜“ç»´æŠ¤</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;carCols&quot;</span>&gt;</span>id,car_num carNum,brand,guide_price guidePrice,produce_t</span><br><span class="line">ime produceTime,car_type carType<span class="tag">&lt;/<span class="name">sql</span>&gt;</span> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllRetMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line"> select <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;carCols&quot;</span>/&gt;</span> from t_car</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllRetListMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line"> select <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;carCols&quot;</span>/&gt;</span> carType from t_car</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByIdRetMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line"> select <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;carCols&quot;</span>/&gt;</span> from t_car where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬ä¹ç« -MyBatisçš„â¾¼çº§æ˜ å°„åŠå»¶è¿ŸåŠ è½½"><a href="#ç¬¬ä¹ç« -MyBatisçš„â¾¼çº§æ˜ å°„åŠå»¶è¿ŸåŠ è½½" class="headerlink" title="ç¬¬ä¹ç«  MyBatisçš„â¾¼çº§æ˜ å°„åŠå»¶è¿ŸåŠ è½½"></a>ç¬¬ä¹ç«  MyBatisçš„â¾¼çº§æ˜ å°„åŠå»¶è¿ŸåŠ è½½</h2><p>æ¨¡å—åï¼šmybatis-009-advanced-mapping </p>
<p>æ‰“åŒ…â½…å¼ï¼šjar </p>
<p>ä¾èµ–ï¼šmybatisä¾èµ–ã€mysqlé©±åŠ¨ä¾èµ–ã€junitä¾èµ–ã€logbackä¾èµ– </p>
<p>é…ç½®â½‚ä»¶ï¼šmybatis-config.xmlã€logback.xmlã€jdbc.properties </p>
<p>æ‹·â»‰â¼¯å…·ç±»ï¼šSqlSessionUtil </p>
<p>å‡†å¤‡æ•°æ®åº“è¡¨ï¼šâ¼€ä¸ªç­çº§å¯¹åº”å¤šä¸ªå­¦â½£ã€‚ç­çº§è¡¨ï¼št_clazzã€‚å­¦â½£è¡¨ï¼št_student</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008170404883.png" alt="image-20221008170404883"></p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008170431627.png" alt="image-20221008170431627"></p>
<p>åˆ›å»ºpojoï¼šStudentã€Clazz</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis.pojo;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å­¦â½£ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"> <span class="keyword">private</span> Integer sid;</span><br><span class="line"> <span class="keyword">private</span> String sname;</span><br><span class="line"> <span class="comment">//......</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis.pojo;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç­çº§ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Clazz</span> &#123;</span><br><span class="line"> <span class="keyword">private</span> Integer cid;</span><br><span class="line"> <span class="keyword">private</span> String cname;</span><br><span class="line"> <span class="comment">//......</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºmapperæ¥â¼ï¼šStudentMapperã€ClazzMapper </p>
<p>åˆ›å»ºmapperæ˜ å°„â½‚ä»¶ï¼šStudentMapper.xmlã€ClazzMapper.xml</p>
<h3 id="9-1-å¤šå¯¹ä¸€"><a href="#9-1-å¤šå¯¹ä¸€" class="headerlink" title="9.1 å¤šå¯¹ä¸€"></a>9.1 å¤šå¯¹ä¸€</h3><p>å¤šç§â½…å¼ï¼Œå¸¸â»…çš„åŒ…æ‹¬ä¸‰ç§ï¼š </p>
<p>â— ç¬¬â¼€ç§â½…å¼ï¼šâ¼€æ¡SQLè¯­å¥ï¼Œçº§è”å±æ€§æ˜ å°„ã€‚ </p>
<p>â— ç¬¬â¼†ç§â½…å¼ï¼šâ¼€æ¡SQLè¯­å¥ï¼Œassociationã€‚ </p>
<p>â— ç¬¬ä¸‰ç§â½…å¼ï¼šä¸¤æ¡SQLè¯­å¥ï¼Œåˆ†æ­¥æŸ¥è¯¢ã€‚ï¼ˆè¿™ç§â½…å¼å¸¸â½¤ï¼šä¼˜ç‚¹â¼€æ˜¯å¯å¤â½¤ã€‚ä¼˜ç‚¹â¼†æ˜¯â½€æŒæ‡’åŠ è½½ã€‚ï¼‰ </p>
<h4 id="ç¬¬ä¸€ç§æ–¹å¼ï¼š-çº§è”å±æ€§æ˜ å°„"><a href="#ç¬¬ä¸€ç§æ–¹å¼ï¼š-çº§è”å±æ€§æ˜ å°„" class="headerlink" title="ç¬¬ä¸€ç§æ–¹å¼ï¼š çº§è”å±æ€§æ˜ å°„"></a>ç¬¬ä¸€ç§æ–¹å¼ï¼š çº§è”å±æ€§æ˜ å°„</h4><p>pojoç±»Studentä¸­æ·»åŠ â¼€ä¸ªå±æ€§ï¼šClazz clazz; è¡¨ç¤ºå­¦â½£å…³è”çš„ç­çº§å¯¹è±¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis.pojo;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å­¦â½£ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"> <span class="keyword">private</span> Integer sid;</span><br><span class="line"> <span class="keyword">private</span> String sname;</span><br><span class="line"> <span class="comment">//......</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.powernode.mybatis.mapper.StudentMapper&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;studentResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;clazz.cid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cid&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;clazz.cname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cname&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectBySid&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;studentResultMap&quot;</span>&gt;</span></span><br><span class="line"> select s.*, c.* from t_student s join t_clazz c on s.cid = c.cid where sid = #&#123;sid&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis.test;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.mapper.StudentMapper;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.pojo.Student;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.utils.SqlSessionUtil;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentMapperTest</span> &#123;</span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectBySid</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">StudentMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(Stud</span><br><span class="line">entMapper.class);</span><br><span class="line"> <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> mapper.selectBySid(<span class="number">1</span>);</span><br><span class="line"> System.out.println(student);</span><br><span class="line"> &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœ ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008171014889.png" alt="image-20221008171014889"></p>
<h4 id="ç¬¬â¼†ç§â½…å¼ï¼šassociation"><a href="#ç¬¬â¼†ç§â½…å¼ï¼šassociation" class="headerlink" title="ç¬¬â¼†ç§â½…å¼ï¼šassociation"></a>ç¬¬â¼†ç§â½…å¼ï¼šassociation</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;studentResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;clazz&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Clazz&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;cid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cid&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cname&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="ç¬¬ä¸‰ç§â½…å¼ï¼šåˆ†æ­¥æŸ¥è¯¢"><a href="#ç¬¬ä¸‰ç§â½…å¼ï¼šåˆ†æ­¥æŸ¥è¯¢" class="headerlink" title="ç¬¬ä¸‰ç§â½…å¼ï¼šåˆ†æ­¥æŸ¥è¯¢"></a>ç¬¬ä¸‰ç§â½…å¼ï¼šåˆ†æ­¥æŸ¥è¯¢</h4><p>å…¶ä»–ä½ç½®ä¸éœ€è¦ä¿®æ”¹ï¼Œåªéœ€è¦ä¿®æ”¹ä»¥åŠæ·»åŠ ä»¥ä¸‹ä¸‰å¤„ï¼š </p>
<p>ç¬¬â¼€å¤„ï¼šassociationä¸­selectä½ç½®å¡«å†™sqlIdã€‚sqlId=namespace+idã€‚å…¶ä¸­columnå±æ€§ä½œä¸ºè¿™æ¡â¼¦sqlè¯­å¥çš„æ¡ä»¶ã€‚ </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;studentResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;clazz&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">select</span>=<span class="string">&quot;com.powernode.mybatis.mapper.ClazzMapper.selectByCid&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">column</span>=<span class="string">&quot;cid&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectBySid&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;studentResultMap&quot;</span>&gt;</span></span><br><span class="line"> select s.* from t_student s where sid = #&#123;sid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬â¼†å¤„ï¼šåœ¨ClazzMapperæ¥â¼ä¸­æ·»åŠ â½…æ³• </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis.mapper;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.pojo.Clazz;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Clazzæ˜ å°„å™¨æ¥â¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ClazzMapper</span> &#123;</span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®cidè·å–Clazzä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> cid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> Clazz <span class="title function_">selectByCid</span><span class="params">(Integer cid)</span>; &#125;</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸‰å¤„ï¼šåœ¨ClazzMapper.xmlâ½‚ä»¶ä¸­è¿›â¾é…ç½® </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.powernode.mybatis.mapper.ClazzMapper&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByCid&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Clazz&quot;</span>&gt;</span></span><br><span class="line"> select * from t_clazz where cid = #&#123;cid&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ‰§â¾ç»“æœï¼Œå¯ä»¥å¾ˆæ˜æ˜¾çœ‹åˆ°å…ˆåæœ‰ä¸¤æ¡sqlè¯­å¥æ‰§â¾ï¼š </p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008172213485.png" alt="image-20221008172213485"></p>
<p>åˆ†æ­¥ä¼˜ç‚¹ï¼š </p>
<p>ç¬¬â¼€ä¸ªä¼˜ç‚¹ï¼šä»£ç å¤â½¤æ€§å¢å¼ºã€‚ </p>
<p>ç¬¬â¼†ä¸ªä¼˜ç‚¹ï¼šâ½€æŒå»¶è¿ŸåŠ è½½ã€‚ã€æš‚æ—¶è®¿é—®ä¸åˆ°çš„æ•°æ®å¯ä»¥å…ˆä¸æŸ¥è¯¢ã€‚æâ¾¼ç¨‹åºçš„æ‰§â¾æ•ˆç‡ã€‚ã€‘</p>
<h3 id="9-2-å¤šå¯¹â¼€å»¶è¿ŸåŠ è½½"><a href="#9-2-å¤šå¯¹â¼€å»¶è¿ŸåŠ è½½" class="headerlink" title="9.2 å¤šå¯¹â¼€å»¶è¿ŸåŠ è½½"></a>9.2 å¤šå¯¹â¼€å»¶è¿ŸåŠ è½½</h3><p>åœ¨mybatisä¸­å¦‚ä½•å¼€å¯å…¨å±€çš„å»¶è¿ŸåŠ è½½å‘¢ï¼Ÿéœ€è¦settingé…ç½®ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008172318065.png" alt="image-20221008172318065"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadingEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æŠŠfetchType=â€lazyâ€å»æ‰ã€‚ </p>
<p>æ‰§â¾ä»¥ä¸‹ç¨‹åºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentMapperTest</span> &#123;</span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectBySid</span><span class="params">()</span>&#123;</span><br><span class="line"> <span class="type">StudentMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(StudentMapper.class);</span><br><span class="line"> <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> mapper.selectBySid(<span class="number">1</span>);</span><br><span class="line"> <span class="comment">//System.out.println(student);</span></span><br><span class="line"> <span class="comment">// åªè·å–å­¦â½£å§“å</span></span><br><span class="line"> <span class="type">String</span> <span class="variable">sname</span> <span class="operator">=</span> student.getSname();</span><br><span class="line"> System.out.println(<span class="string">&quot;å­¦â½£å§“åï¼š&quot;</span> + sname);</span><br><span class="line"> <span class="comment">// åˆ°è¿™â¾¥ä¹‹åï¼Œæƒ³è·å–ç­çº§åå­—äº†</span></span><br><span class="line"> <span class="type">String</span> <span class="variable">cname</span> <span class="operator">=</span> student.getClazz().getCname();</span><br><span class="line"> System.out.println(<span class="string">&quot;å­¦â½£çš„ç­çº§åç§°ï¼š&quot;</span> + cname);</span><br><span class="line"> &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008172426891.png" alt="image-20221008172426891" style="zoom:80%;" /></p>
<p>é€šè¿‡ä»¥ä¸Šçš„æµ‹è¯•å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å·²ç»å¼€å¯äº†å…¨å±€å»¶è¿ŸåŠ è½½ç­–ç•¥ã€‚ </p>
<p>å¼€å¯å…¨å±€å»¶è¿ŸåŠ è½½ä¹‹åï¼Œæ‰€æœ‰çš„sqléƒ½ä¼šâ½€æŒå»¶è¿ŸåŠ è½½ï¼Œå¦‚æœæŸä¸ªsqlä½ ä¸å¸Œæœ›å®ƒâ½€æŒå»¶è¿ŸåŠ è½½æ€ä¹ˆåŠå‘¢ï¼Ÿ </p>
<p>å°†fetchTypeè®¾ç½®ä¸ºeagerï¼š </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;studentResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;clazz&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">select</span>=<span class="string">&quot;com.powernode.mybatis.mapper.ClazzMapper.selectByCid&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">column</span>=<span class="string">&quot;cid&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">fetchType</span>=<span class="string">&quot;eager&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008172501714.png" alt="image-20221008172501714" style="zoom:80%;" /></p>
<p>è¿™æ ·çš„è¯ï¼Œé’ˆå¯¹æŸä¸ªç‰¹å®šçš„sqlï¼Œä½ å°±å…³é—­äº†å»¶è¿ŸåŠ è½½æœºåˆ¶ã€‚ </p>
<p>åæœŸæˆ‘ä»¬è¦ä¸è¦å¼€å¯å»¶è¿ŸåŠ è½½æœºåˆ¶ï¼Œä¸»è¦çœ‹å®é™…çš„ä¸šåŠ¡éœ€æ±‚æ˜¯æ€æ ·çš„ã€‚</p>
<h3 id="9-3-â¼€å¯¹å¤š"><a href="#9-3-â¼€å¯¹å¤š" class="headerlink" title="9.3 â¼€å¯¹å¤š"></a>9.3 â¼€å¯¹å¤š</h3><p>â¼€å¯¹å¤šçš„å®ç°ï¼Œé€šå¸¸æ˜¯åœ¨â¼€çš„â¼€â½…ä¸­æœ‰Listé›†åˆå±æ€§ã€‚ </p>
<p>åœ¨Clazzç±»ä¸­æ·»åŠ List<Student\> stus; å±æ€§ã€‚ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Clazz</span> &#123;</span><br><span class="line"> <span class="keyword">private</span> Integer cid;</span><br><span class="line"> <span class="keyword">private</span> String cname;</span><br><span class="line"> <span class="keyword">private</span> List&lt;Student&gt; stus;</span><br><span class="line"> <span class="comment">// set getâ½…æ³•</span></span><br><span class="line"> <span class="comment">// æ„é€ â½…æ³•</span></span><br><span class="line"> <span class="comment">// toStringâ½…æ³• &#125;</span></span><br></pre></td></tr></table></figure>
<p>â¼€å¯¹å¤šçš„å®ç°é€šå¸¸åŒ…æ‹¬ä¸¤ç§å®ç°â½…å¼ï¼š</p>
<ul>
<li><p>ç¬¬â¼€ç§â½…å¼ï¼šcollection </p>
</li>
<li><p>ç¬¬â¼†ç§â½…å¼ï¼šåˆ†æ­¥æŸ¥è¯¢ </p>
</li>
</ul>
<h4 id="ç¬¬â¼€ç§â½…å¼ï¼šcollection"><a href="#ç¬¬â¼€ç§â½…å¼ï¼šcollection" class="headerlink" title="ç¬¬â¼€ç§â½…å¼ï¼šcollection"></a>ç¬¬â¼€ç§â½…å¼ï¼šcollection</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis.mapper;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.pojo.Clazz;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Clazzæ˜ å°„å™¨æ¥â¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ClazzMapper</span> &#123;</span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®cidè·å–Clazzä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> cid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> Clazz <span class="title function_">selectByCid</span><span class="params">(Integer cid)</span>;</span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®ç­çº§ç¼–å·æŸ¥è¯¢ç­çº§ä¿¡æ¯ã€‚åŒæ—¶ç­çº§ä¸­æ‰€æœ‰çš„å­¦â½£ä¿¡æ¯ä¹Ÿè¦æŸ¥è¯¢ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> cid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> Clazz <span class="title function_">selectClazzAndStusByCid</span><span class="params">(Integer cid)</span>; &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;clazzResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Clazz&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;cid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cid&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cname&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;stus&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectClazzAndStusByCid&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;clazzResultMap&quot;</span>&gt;</span></span><br><span class="line"> select * from t_clazz c join t_student s on c.cid = s.cid where c.cid =</span><br><span class="line">#&#123;cid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„æ˜¯ofTypeï¼Œè¡¨ç¤ºâ€œé›†åˆä¸­çš„ç±»å‹â€</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis.test;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.mapper.ClazzMapper;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.pojo.Clazz;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.utils.SqlSessionUtil;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClazzMapperTest</span> &#123;</span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectClazzAndStusByCid</span><span class="params">()</span> &#123;</span><br><span class="line"> <span class="type">ClazzMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> SqlSessionUtil.openSession().getMapper(ClazzMapper.class);</span><br><span class="line"> <span class="type">Clazz</span> <span class="variable">clazz</span> <span class="operator">=</span> mapper.selectClazzAndStusByCid(<span class="number">1001</span>);</span><br><span class="line"> System.out.println(clazz);</span><br><span class="line"> &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§â¾ç»“æœï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008185003193.png" alt="image-20221008185003193"></p>
<h4 id="ç¬¬â¼†ç§â½…å¼ï¼šåˆ†æ­¥æŸ¥è¯¢-æ¯”è¾ƒå¸¸ç”¨"><a href="#ç¬¬â¼†ç§â½…å¼ï¼šåˆ†æ­¥æŸ¥è¯¢-æ¯”è¾ƒå¸¸ç”¨" class="headerlink" title="ç¬¬â¼†ç§â½…å¼ï¼šåˆ†æ­¥æŸ¥è¯¢(æ¯”è¾ƒå¸¸ç”¨)"></a>ç¬¬â¼†ç§â½…å¼ï¼šåˆ†æ­¥æŸ¥è¯¢(æ¯”è¾ƒå¸¸ç”¨)</h4><p>ä¿®æ”¹ä»¥ä¸‹ä¸‰ä¸ªä½ç½®å³å¯ï¼š </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;clazzResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Clazz&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;cid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cid&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cname&quot;</span>/&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--ä¸»è¦çœ‹è¿™â¾¥--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;stus&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">select</span>=<span class="string">&quot;com.powernode.mybatis.mapper.StudentMapper.selectByC</span></span></span><br><span class="line"><span class="string"><span class="tag">id&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">column</span>=<span class="string">&quot;cid&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--sqlè¯­å¥ä¹Ÿå˜åŒ–äº†--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectClazzAndStusByCid&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;clazzResultMap&quot;</span>&gt;</span></span><br><span class="line"> select * from t_clazz c where c.cid = #&#123;cid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ ¹æ®ç­çº§ç¼–å·è·å–æ‰€æœ‰çš„å­¦â½£ã€‚</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> cid</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">List&lt;Student&gt; <span class="title function_">selectByCid</span><span class="params">(Integer cid)</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByCid&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line"> select * from t_student where cid = #&#123;cid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ‰§â¾ç»“æœï¼š </p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008185103148.png" alt="image-20221008185103148" style="zoom:50%;" /></p>
<h3 id="9-4-â¼€å¯¹å¤šå»¶è¿ŸåŠ è½½"><a href="#9-4-â¼€å¯¹å¤šå»¶è¿ŸåŠ è½½" class="headerlink" title="9.4 â¼€å¯¹å¤šå»¶è¿ŸåŠ è½½"></a>9.4 â¼€å¯¹å¤šå»¶è¿ŸåŠ è½½</h3><p>â¼€å¯¹å¤šå»¶è¿ŸåŠ è½½æœºåˆ¶å’Œå¤šå¯¹â¼€æ˜¯â¼€æ ·çš„ã€‚åŒæ ·æ˜¯é€šè¿‡ä¸¤ç§â½…å¼ï¼š</p>
<ul>
<li><p>ç¬¬â¼€ç§ï¼šfetchType=â€lazyâ€ </p>
</li>
<li><p>ç¬¬â¼†ç§ï¼šä¿®æ”¹å…¨å±€çš„é…ç½®settingï¼ŒlazyLoadingEnabled=trueï¼Œå¦‚æœå¼€å¯å…¨å±€å»¶è¿ŸåŠ è½½ï¼Œæƒ³è®©æŸä¸ª sqlä¸ä½¿â½¤å»¶è¿ŸåŠ è½½ï¼šfetchType=â€eagerâ€ </p>
</li>
</ul>
<h2 id="ç¬¬åç« -MyBatisçš„ç¼“å­˜"><a href="#ç¬¬åç« -MyBatisçš„ç¼“å­˜" class="headerlink" title="ç¬¬åç«  MyBatisçš„ç¼“å­˜"></a>ç¬¬åç«  MyBatisçš„ç¼“å­˜</h2><p>ç¼“å­˜ï¼šcache </p>
<p>ç¼“å­˜çš„ä½œâ½¤ï¼šé€šè¿‡å‡å°‘IOçš„â½…å¼ï¼Œæ¥æâ¾¼ç¨‹åºçš„æ‰§â¾æ•ˆç‡ã€‚ </p>
<p>mybatisçš„ç¼“å­˜ï¼šå°†selectè¯­å¥çš„æŸ¥è¯¢ç»“æœæ”¾åˆ°ç¼“å­˜ï¼ˆå†…å­˜ï¼‰å½“ä¸­ï¼Œä¸‹â¼€æ¬¡è¿˜æ˜¯è¿™æ¡selectè¯­å¥çš„è¯ï¼Œç›´ æ¥ä»ç¼“å­˜ä¸­å–ï¼Œä¸å†æŸ¥æ•°æ®åº“ã€‚â¼€â½…â¾¯æ˜¯å‡å°‘äº†IOã€‚å¦â¼€â½…â¾¯ä¸å†æ‰§â¾ç¹ççš„æŸ¥æ‰¾ç®—æ³•ã€‚æ•ˆç‡â¼¤â¼¤æå‡ã€‚</p>
<p>mybatisç¼“å­˜åŒ…æ‹¬ï¼š </p>
<blockquote>
<p>â¼€çº§ç¼“å­˜ï¼šå°†æŸ¥è¯¢åˆ°çš„æ•°æ®å­˜å‚¨åˆ°SqlSessionä¸­ã€‚ </p>
<p>â¼†çº§ç¼“å­˜ï¼šå°†æŸ¥è¯¢åˆ°çš„æ•°æ®å­˜å‚¨åˆ°SqlSessionFactoryä¸­ã€‚ </p>
<p>æˆ–è€…é›†æˆå…¶å®ƒç¬¬ä¸‰â½…çš„ç¼“å­˜ï¼šâ½å¦‚EhCache Javaè¯­â¾”å¼€å‘çš„ã€‘ã€Memcacheã€Cè¯­â¾”å¼€å‘çš„ã€‘ ç­‰</p>
</blockquote>
<font color='red'>ç¼“å­˜åªé’ˆå¯¹äºDQLè¯­å¥ï¼Œä¹Ÿå°±æ˜¯è¯´ç¼“å­˜æœºåˆ¶åªå¯¹åº”selectè¯­å¥ã€‚ </font>

<h3 id="10-1-â¼€çº§ç¼“å­˜"><a href="#10-1-â¼€çº§ç¼“å­˜" class="headerlink" title="10.1 â¼€çº§ç¼“å­˜"></a>10.1 â¼€çº§ç¼“å­˜</h3><p>â¼€çº§ç¼“å­˜é»˜è®¤æ˜¯å¼€å¯çš„ã€‚ä¸éœ€è¦åšä»»ä½•é…ç½®ã€‚ </p>
<p>åŸç†ï¼šåªè¦ä½¿â½¤åŒâ¼€ä¸ªSqlSessionå¯¹è±¡æ‰§â¾åŒâ¼€æ¡SQLè¯­å¥ï¼Œå°±ä¼šâ¾›ç¼“å­˜</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis.mapper;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.pojo.Car;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CarMapper</span> &#123;</span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®idè·å–Carä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> Car <span class="title function_">selectById</span><span class="params">(Long id)</span>; &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.powernode.mybatis.mapper.CarMapper&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Car&quot;</span>&gt;</span></span><br><span class="line"> select * from t_car where id = #&#123;id&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis.test;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.mapper.CarMapper;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.pojo.Car;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.utils.SqlSessionUtil;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CarMapperTest</span> &#123;</span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectById</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line"> <span class="comment">// æ³¨æ„ï¼šä¸èƒ½ä½¿â½¤æˆ‘ä»¬å°è£…çš„SqlSessionUtilâ¼¯å…·ç±»ã€‚</span></span><br><span class="line"> <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line"> <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> builder.build(Resources.getR</span><br><span class="line"><span class="title function_">esourceAsStream</span><span class="params">(<span class="string">&quot;mybatis-config.xml&quot;</span>)</span>);</span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession1</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper1</span> <span class="operator">=</span> sqlSession1.getMapper(CarMapper.class);</span><br><span class="line"> <span class="type">Car</span> <span class="variable">car1</span> <span class="operator">=</span> mapper1.selectById(<span class="number">83L</span>);</span><br><span class="line"> System.out.println(car1);</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper2</span> <span class="operator">=</span> sqlSession1.getMapper(CarMapper.class);</span><br><span class="line"> <span class="type">Car</span> <span class="variable">car2</span> <span class="operator">=</span> mapper2.selectById(<span class="number">83L</span>);</span><br><span class="line"> System.out.println(car2);</span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession2</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper3</span> <span class="operator">=</span> sqlSession2.getMapper(CarMapper.class);</span><br><span class="line"> <span class="type">Car</span> <span class="variable">car3</span> <span class="operator">=</span> mapper3.selectById(<span class="number">83L</span>);</span><br><span class="line"> System.out.println(car3);</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper4</span> <span class="operator">=</span> sqlSession2.getMapper(CarMapper.class);</span><br><span class="line"> <span class="type">Car</span> <span class="variable">car4</span> <span class="operator">=</span> mapper4.selectById(<span class="number">83L</span>);</span><br><span class="line"> System.out.println(car4);</span><br><span class="line"> &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœ ï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008185626009.png" alt="image-20221008185626009"></p>
<p>ä»€ä¹ˆæƒ…å†µä¸‹ä¸â¾›ç¼“å­˜ï¼Ÿ </p>
<blockquote>
<p>ç¬¬â¼€ç§ï¼šä¸åŒçš„SqlSessionå¯¹è±¡ã€‚ </p>
<p>ç¬¬â¼†ç§ï¼šæŸ¥è¯¢æ¡ä»¶å˜åŒ–äº†ã€‚ </p>
</blockquote>
<p>â¼€çº§ç¼“å­˜å¤±æ•ˆæƒ…å†µåŒ…æ‹¬ä¸¤ç§ï¼š </p>
<ul>
<li>ç¬¬â¼€ç§ï¼šç¬¬â¼€æ¬¡æŸ¥è¯¢å’Œç¬¬â¼†æ¬¡æŸ¥è¯¢ä¹‹é—´ï¼Œâ¼¿åŠ¨æ¸…ç©ºäº†â¼€çº§ç¼“å­˜ã€‚ </li>
</ul>
<p><strong>æ¸…ç©ºä¸€çº§ç¼“å­˜</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlSession.clearCache(); </span><br></pre></td></tr></table></figure>
<ul>
<li>ç¬¬â¼†ç§ï¼šç¬¬â¼€æ¬¡æŸ¥è¯¢å’Œç¬¬â¼†æ¬¡æŸ¥è¯¢ä¹‹é—´ï¼Œæ‰§â¾äº†å¢åˆ æ”¹æ“ä½œã€‚ã€è¿™ä¸ªå¢åˆ æ”¹å’Œå“ªå¼ è¡¨æ²¡æœ‰å…³ç³»ï¼Œåªè¦ æœ‰insert delete updateæ“ä½œï¼Œâ¼€çº§ç¼“å­˜å°±å¤±æ•ˆã€‚ã€‘</li>
</ul>
<h3 id="10-4-â¼†çº§ç¼“å­˜"><a href="#10-4-â¼†çº§ç¼“å­˜" class="headerlink" title="10.4 â¼†çº§ç¼“å­˜"></a>10.4 â¼†çº§ç¼“å­˜</h3><p>â¼†çº§ç¼“å­˜çš„èŒƒå›´æ˜¯SqlSessionFactoryã€‚ ä½¿â½¤â¼†çº§ç¼“å­˜éœ€è¦å…·å¤‡ä»¥ä¸‹â¼ä¸ªæ¡ä»¶ï¼š</p>
<ol>
<li><p><setting name="cacheEnabled" value="true"> å…¨å±€æ€§åœ°å¼€å¯æˆ–å…³é—­æ‰€æœ‰æ˜ å°„å™¨é…ç½®â½‚ä»¶ä¸­å·²é…ç½®çš„ä»»ä½•ç¼“å­˜ã€‚é»˜è®¤å°±æ˜¯trueï¼Œâ½†éœ€è®¾ç½®ã€‚ </p>
</li>
<li><p>åœ¨éœ€è¦ä½¿â½¤â¼†çº§ç¼“å­˜çš„SqlMapper.xmlâ½‚ä»¶ä¸­æ·»åŠ é…ç½®ï¼š<cache /></p>
</li>
<li><p>ä½¿â½¤â¼†çº§ç¼“å­˜çš„å®ä½“ç±»å¯¹è±¡å¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œä¹Ÿå°±æ˜¯å¿…é¡»å®ç°java.io.Serializableæ¥â¼ </p>
</li>
<li><p>SqlSessionå¯¹è±¡å…³é—­æˆ–æäº¤ä¹‹åï¼Œâ¼€çº§ç¼“å­˜ä¸­çš„æ•°æ®æ‰ä¼šè¢«å†™â¼Šåˆ°â¼†çº§ç¼“å­˜å½“ä¸­ã€‚æ­¤æ—¶â¼†çº§ç¼“å­˜æ‰å¯â½¤ã€‚ </p>
</li>
</ol>
<p>æµ‹è¯•â¼†çº§ç¼“å­˜ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"><span class="comment">//......</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectById2</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line"> <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession1</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper1</span> <span class="operator">=</span> sqlSession1.getMapper(CarMapper.class);</span><br><span class="line"> <span class="type">Car</span> <span class="variable">car1</span> <span class="operator">=</span> mapper1.selectById(<span class="number">83L</span>);</span><br><span class="line"> System.out.println(car1);</span><br><span class="line"> <span class="comment">// å…³é”®â¼€æ­¥</span></span><br><span class="line"> sqlSession1.close();</span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession2</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper2</span> <span class="operator">=</span> sqlSession2.getMapper(CarMapper.class);</span><br><span class="line"> <span class="type">Car</span> <span class="variable">car2</span> <span class="operator">=</span> mapper2.selectById(<span class="number">83L</span>);</span><br><span class="line"> System.out.println(car2); &#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008190139922.png" alt="image-20221008190139922"></p>
<p>â¼†çº§ç¼“å­˜çš„å¤±æ•ˆï¼šåªè¦ä¸¤æ¬¡æŸ¥è¯¢ä¹‹é—´å‡ºç°äº†å¢åˆ æ”¹æ“ä½œã€‚â¼†çº§ç¼“å­˜å°±ä¼šå¤±æ•ˆã€‚ã€â¼€çº§ç¼“å­˜ä¹Ÿä¼šå¤±æ•ˆã€‘ </p>
<p>â¼†çº§ç¼“å­˜çš„ç›¸å…³é…ç½®</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008190213512.png" alt="image-20221008190213512" style="zoom:80%;" /></p>
<ol>
<li>evictionï¼šæŒ‡å®šä»ç¼“å­˜ä¸­ç§»é™¤æŸä¸ªå¯¹è±¡çš„æ·˜æ±°ç®—æ³•ã€‚é»˜è®¤é‡‡â½¤LRUç­–ç•¥ã€‚ </li>
</ol>
<p>a. LRUï¼šLeast Recently Usedã€‚æœ€è¿‘æœ€å°‘ä½¿â½¤ã€‚ä¼˜å…ˆæ·˜æ±°åœ¨é—´éš”æ—¶é—´å†…ä½¿â½¤é¢‘ç‡æœ€ä½çš„å¯¹è±¡ã€‚(å…¶ </p>
<p>å®è¿˜æœ‰â¼€ç§æ·˜æ±°ç®—æ³•LFUï¼Œæœ€ä¸å¸¸â½¤ã€‚) </p>
<p>b. FIFOï¼šFirst In First Outã€‚â¼€ç§å…ˆè¿›å…ˆå‡ºçš„æ•°æ®ç¼“å­˜å™¨ã€‚å…ˆè¿›â¼Šâ¼†çº§ç¼“å­˜çš„å¯¹è±¡æœ€å…ˆè¢«æ·˜æ±°ã€‚ </p>
<p>c. SOFTï¼šè½¯å¼•â½¤ã€‚æ·˜æ±°è½¯å¼•â½¤æŒ‡å‘çš„å¯¹è±¡ã€‚å…·ä½“ç®—æ³•å’ŒJVMçš„åƒåœ¾å›æ”¶ç®—æ³•æœ‰å…³ã€‚ </p>
<p>d. WEAKï¼šå¼±å¼•â½¤ã€‚æ·˜æ±°å¼±å¼•â½¤æŒ‡å‘çš„å¯¹è±¡ã€‚å…·ä½“ç®—æ³•å’ŒJVMçš„åƒåœ¾å›æ”¶ç®—æ³•æœ‰å…³ã€‚ </p>
<ol>
<li>flushIntervalï¼š </li>
</ol>
<p>a. â¼†çº§ç¼“å­˜çš„åˆ·æ–°æ—¶é—´é—´éš”ã€‚å•ä½æ¯«ç§’ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®ã€‚å°±ä»£è¡¨ä¸åˆ·æ–°ç¼“å­˜ï¼Œåªè¦å†…å­˜â¾œå¤Ÿâ¼¤ï¼Œâ¼€ </p>
<p>ç›´ä¼šå‘â¼†çº§ç¼“å­˜ä¸­ç¼“å­˜æ•°æ®ã€‚é™¤â¾®æ‰§â¾äº†å¢åˆ æ”¹ã€‚ </p>
<ol>
<li><p>readOnlyï¼ša. trueï¼šå¤šæ¡ç›¸åŒçš„sqlè¯­å¥æ‰§â¾ä¹‹åè¿”å›çš„å¯¹è±¡æ˜¯å…±äº«çš„åŒâ¼€ä¸ªã€‚æ€§èƒ½å¥½ã€‚ä½†æ˜¯å¤šçº¿ç¨‹å¹¶å‘å¯èƒ½ </p>
<p>ä¼šå­˜åœ¨å®‰å…¨é—®é¢˜ã€‚ </p>
<p>b. falseï¼šå¤šæ¡ç›¸åŒçš„sqlè¯­å¥æ‰§â¾ä¹‹åè¿”å›çš„å¯¹è±¡æ˜¯å‰¯æœ¬ï¼Œè°ƒâ½¤äº†cloneâ½…æ³•ã€‚æ€§èƒ½â¼€èˆ¬ã€‚ä½†å®‰ </p>
<p>å…¨ã€‚ </p>
</li>
<li><p>sizeï¼š</p>
<p>a. è®¾ç½®â¼†çº§ç¼“å­˜ä¸­æœ€å¤šå¯å­˜å‚¨çš„javaå¯¹è±¡æ•°é‡ã€‚é»˜è®¤å€¼1024ã€‚ </p>
</li>
</ol>
<h2 id="ç¬¬åä¸€ç« -MyBatisçš„é€†å‘â¼¯ç¨‹"><a href="#ç¬¬åä¸€ç« -MyBatisçš„é€†å‘â¼¯ç¨‹" class="headerlink" title="ç¬¬åä¸€ç«  MyBatisçš„é€†å‘â¼¯ç¨‹"></a>ç¬¬åä¸€ç«  MyBatisçš„é€†å‘â¼¯ç¨‹</h2><p>æ‰€è°“çš„é€†å‘â¼¯ç¨‹æ˜¯ï¼šæ ¹æ®æ•°æ®åº“è¡¨é€†å‘â½£æˆJavaçš„pojoç±»ï¼ŒSqlMapper.xmlâ½‚ä»¶ï¼Œä»¥åŠMapperæ¥â¼ç±» ç­‰ã€‚è¦å®Œæˆè¿™ä¸ªâ¼¯ä½œï¼Œéœ€è¦å€ŸåŠ©åˆ«â¼ˆå†™å¥½çš„é€†å‘â¼¯ç¨‹æ’ä»¶ã€‚</p>
<p>æ€è€ƒï¼šä½¿â½¤è¿™ä¸ªæ’ä»¶çš„è¯ï¼Œéœ€è¦ç»™è¿™ä¸ªæ’ä»¶é…ç½®å“ªäº›ä¿¡æ¯ï¼Ÿ </p>
<p>â— pojoç±»åã€åŒ…åä»¥åŠâ½£æˆä½ç½®ã€‚ </p>
<p>â— SqlMapper.xmlâ½‚ä»¶åä»¥åŠâ½£æˆä½ç½®ã€‚ </p>
<p>â— Mapperæ¥â¼åä»¥åŠâ½£æˆä½ç½®ã€‚ </p>
<p>â— è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯ã€‚ </p>
<p>â— æŒ‡å®šå“ªäº›è¡¨å‚ä¸é€†å‘â¼¯ç¨‹ã€‚ </p>
<p>â— â€¦â€¦..</p>
<h3 id="11-1-é€†å‘â¼¯ç¨‹é…ç½®ä¸â½£æˆ"><a href="#11-1-é€†å‘â¼¯ç¨‹é…ç½®ä¸â½£æˆ" class="headerlink" title="11.1 é€†å‘â¼¯ç¨‹é…ç½®ä¸â½£æˆ"></a>11.1 é€†å‘â¼¯ç¨‹é…ç½®ä¸â½£æˆ</h3><h4 id="ç¬¬â¼€æ­¥ï¼šåŸºç¡€ç¯å¢ƒå‡†å¤‡"><a href="#ç¬¬â¼€æ­¥ï¼šåŸºç¡€ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¬¬â¼€æ­¥ï¼šåŸºç¡€ç¯å¢ƒå‡†å¤‡"></a>ç¬¬â¼€æ­¥ï¼šåŸºç¡€ç¯å¢ƒå‡†å¤‡</h4><p>æ–°å»ºæ¨¡å—ï¼šmybatis-011-generator </p>
<p>æ‰“åŒ…â½…å¼ï¼šjar </p>
<h4 id="ç¬¬â¼†æ­¥ï¼šåœ¨pomä¸­æ·»åŠ é€†å‘â¼¯ç¨‹æ’ä»¶"><a href="#ç¬¬â¼†æ­¥ï¼šåœ¨pomä¸­æ·»åŠ é€†å‘â¼¯ç¨‹æ’ä»¶" class="headerlink" title="ç¬¬â¼†æ­¥ï¼šåœ¨pomä¸­æ·»åŠ é€†å‘â¼¯ç¨‹æ’ä»¶"></a>ç¬¬â¼†æ­¥ï¼šåœ¨pomä¸­æ·»åŠ é€†å‘â¼¯ç¨‹æ’ä»¶</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å®šåˆ¶æ„å»ºè¿‡ç¨‹--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--å¯é…ç½®å¤šä¸ªæ’ä»¶--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--å…¶ä¸­çš„â¼€ä¸ªæ’ä»¶ï¼šmybatisé€†å‘â¼¯ç¨‹æ’ä»¶--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--æ’ä»¶çš„GAVåæ ‡--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--å…è®¸è¦†ç›–--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">overwrite</span>&gt;</span>true<span class="tag">&lt;/<span class="name">overwrite</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--æ’ä»¶çš„ä¾èµ–--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--mysqlé©±åŠ¨ä¾èµ–--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.30<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="ç¬¬ä¸‰æ­¥ï¼šé…ç½®generatorConfig-xml"><a href="#ç¬¬ä¸‰æ­¥ï¼šé…ç½®generatorConfig-xml" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šé…ç½®generatorConfig.xml"></a>ç¬¬ä¸‰æ­¥ï¼šé…ç½®generatorConfig.xml</h4><p>è¯¥â½‚ä»¶åå¿…é¡»å«åšï¼šgeneratorConfig.xml </p>
<p>è¯¥â½‚ä»¶å¿…é¡»æ”¾åœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹ã€‚ </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">generatorConfiguration</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//E</span></span></span><br><span class="line"><span class="string"><span class="meta">N&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment"> targetRuntimeæœ‰ä¸¤ä¸ªå€¼ï¼š</span></span><br><span class="line"><span class="comment"> MyBatis3Simpleï¼šâ½£æˆçš„æ˜¯åŸºç¡€ç‰ˆï¼Œåªæœ‰åŸºæœ¬çš„å¢åˆ æ”¹æŸ¥ã€‚</span></span><br><span class="line"><span class="comment"> MyBatis3ï¼šâ½£æˆçš„æ˜¯å¢å¼ºç‰ˆï¼Œé™¤äº†åŸºæœ¬çš„å¢åˆ æ”¹æŸ¥ä¹‹å¤–è¿˜æœ‰å¤æ‚çš„å¢åˆ æ”¹æŸ¥ã€‚</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">&quot;DB2Tables&quot;</span> <span class="attr">targetRuntime</span>=<span class="string">&quot;MyBatis3&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--é˜²â½Œâ½£æˆé‡å¤ä»£ç --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">type</span>=<span class="string">&quot;org.mybatis.generator.plugins.UnmergeableXmlMappersP</span></span></span><br><span class="line"><span class="string"><span class="tag">lugin&quot;</span>/&gt;</span></span><br><span class="line"> </span><br><span class="line"> <span class="tag">&lt;<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--æ˜¯å¦å»æ‰â½£æˆâ½‡æœŸ--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suppressDate&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--æ˜¯å¦å»é™¤æ³¨é‡Š--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suppressAllComments&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--è¿æ¥æ•°æ®åº“ä¿¡æ¯--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">connectionURL</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/powerno</span></span></span><br><span class="line"><span class="string"><span class="tag">de&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">userId</span>=<span class="string">&quot;root&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">password</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- â½£æˆpojoåŒ…åå’Œä½ç½® --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.powernode.mybatis.pojo&quot;</span> <span class="attr">tar</span></span></span><br><span class="line"><span class="tag"><span class="attr">getProject</span>=<span class="string">&quot;src/main/java&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--æ˜¯å¦å¼€å¯â¼¦åŒ…--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--æ˜¯å¦å»é™¤å­—æ®µåçš„å‰åç©ºâ½©--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;trimStrings&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- â½£æˆSQLæ˜ å°„â½‚ä»¶çš„åŒ…åå’Œä½ç½® --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.powernode.mybatis.mapper&quot;</span> <span class="attr">targ</span></span></span><br><span class="line"><span class="tag"><span class="attr">etProject</span>=<span class="string">&quot;src/main/resources&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--æ˜¯å¦å¼€å¯â¼¦åŒ…--&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- â½£æˆMapperæ¥â¼çš„åŒ…åå’Œä½ç½® --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">javaClientGenerator</span></span></span><br><span class="line"><span class="tag"> <span class="attr">type</span>=<span class="string">&quot;xmlMapper&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">targetPackage</span>=<span class="string">&quot;com.powernode.mybatis.mapper&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">targetProject</span>=<span class="string">&quot;src/main/java&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- è¡¨åå’Œå¯¹åº”çš„å®ä½“ç±»å--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;t_car&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Car&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="ç¬¬å››æ­¥ï¼šè¿â¾æ’ä»¶"><a href="#ç¬¬å››æ­¥ï¼šè¿â¾æ’ä»¶" class="headerlink" title="ç¬¬å››æ­¥ï¼šè¿â¾æ’ä»¶"></a>ç¬¬å››æ­¥ï¼šè¿â¾æ’ä»¶</h4><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008190626618.png" alt="image-20221008190626618"></p>
<h2 id="ç¬¬åäºŒç« -MyBatisä½¿â½¤PageHelper"><a href="#ç¬¬åäºŒç« -MyBatisä½¿â½¤PageHelper" class="headerlink" title="ç¬¬åäºŒç«  MyBatisä½¿â½¤PageHelper"></a>ç¬¬åäºŒç«  MyBatisä½¿â½¤PageHelper</h2><h3 id="12-1-limitåˆ†â»š"><a href="#12-1-limitåˆ†â»š" class="headerlink" title="12.1 limitåˆ†â»š"></a>12.1 limitåˆ†â»š</h3><p>mysqlçš„limitåâ¾¯ä¸¤ä¸ªæ•°å­—ï¼š </p>
<p>ç¬¬â¼€ä¸ªæ•°å­—ï¼šstartIndexï¼ˆèµ·å§‹ä¸‹æ ‡ã€‚ä¸‹æ ‡ä»0å¼€å§‹ã€‚ï¼‰ </p>
<p>ç¬¬â¼†ä¸ªæ•°å­—ï¼špageSizeï¼ˆæ¯â»šæ˜¾ç¤ºçš„è®°å½•æ¡æ•°ï¼‰ </p>
<p>å‡è®¾å·²çŸ¥â»šç pageNumï¼Œè¿˜æœ‰æ¯â»šæ˜¾ç¤ºçš„è®°å½•æ¡æ•°pageSizeï¼Œç¬¬â¼€ä¸ªæ•°å­—å¯ä»¥åŠ¨æ€çš„è·å–å—ï¼Ÿ </p>
<p>startIndex = (pageNum - 1) * pageSize </p>
<p>æ‰€ä»¥ï¼Œæ ‡å‡†é€šâ½¤çš„mysqlåˆ†â»šSQLï¼š </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line"> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line"> tableName ......</span><br><span class="line">limit</span><br><span class="line"> (pageNum <span class="operator">-</span> <span class="number">1</span>) <span class="operator">*</span> pageSize, pageSize</span><br></pre></td></tr></table></figure>
<p><strong>åœ¨MyBatisä¸­ä½¿ç”¨</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis.mapper;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.pojo.Car;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CarMapper</span> &#123;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šè¿‡åˆ†â»šçš„â½…å¼è·å–Caråˆ—è¡¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> startIndex â»šç </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> pageSize æ¯â»šæ˜¾ç¤ºè®°å½•æ¡æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> List&lt;Car&gt; <span class="title function_">selectAllByPage</span><span class="params">(<span class="meta">@Param(&quot;startIndex&quot;)</span> Integer startIndex, <span class="meta">@Param(&quot;pageSize&quot;)</span> Integer pageSize)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.powernode.mybatis.mapper.CarMapper&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllByPage&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Car&quot;</span>&gt;</span></span><br><span class="line"> select * from t_car limit #&#123;startIndex&#125;,#&#123;pageSize&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.mybatis.test;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.mapper.CarMapper;</span><br><span class="line"><span class="keyword">import</span> com.powernode.mybatis.pojo.Car;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageTest</span> &#123;</span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testPage</span><span class="params">()</span><span class="keyword">throws</span> Exception&#123;</span><br><span class="line"> <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(CarMapper.class);</span><br><span class="line"> <span class="comment">// â»šç </span></span><br><span class="line"> <span class="type">Integer</span> <span class="variable">pageNum</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"> <span class="comment">// æ¯â»šæ˜¾ç¤ºè®°å½•æ¡æ•°</span></span><br><span class="line"> <span class="type">Integer</span> <span class="variable">pageSize</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"> <span class="comment">// èµ·å§‹ä¸‹æ ‡</span></span><br><span class="line"> <span class="type">Integer</span> <span class="variable">startIndex</span> <span class="operator">=</span> (pageNum - <span class="number">1</span>) * pageSize;</span><br><span class="line"> List&lt;Car&gt; cars = mapper.selectAllByPage(startIndex, pageSize);</span><br><span class="line"> cars.forEach(car -&gt; System.out.println(car));</span><br><span class="line"> sqlSession.commit();</span><br><span class="line"> sqlSession.close();</span><br><span class="line"> &#125; &#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§â¾ç»“æœï¼š</p>
<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20221008190927054.png" alt="image-20221008190927054"></p>
<h3 id="12-2-PageHelperæ’ä»¶"><a href="#12-2-PageHelperæ’ä»¶" class="headerlink" title="12.2  PageHelperæ’ä»¶"></a>12.2  PageHelperæ’ä»¶</h3><p>ä½¿â½¤PageHelperæ’ä»¶è¿›â¾åˆ†â»šï¼Œæ›´åŠ çš„ä¾¿æ·ã€‚</p>
<h4 id="ç¬¬â¼€æ­¥ï¼šå¼•â¼Šä¾èµ–"><a href="#ç¬¬â¼€æ­¥ï¼šå¼•â¼Šä¾èµ–" class="headerlink" title="ç¬¬â¼€æ­¥ï¼šå¼•â¼Šä¾èµ–"></a>ç¬¬â¼€æ­¥ï¼šå¼•â¼Šä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="ç¬¬â¼†æ­¥ï¼šåœ¨mybatis-config-xmlâ½‚ä»¶ä¸­é…ç½®æ’ä»¶"><a href="#ç¬¬â¼†æ­¥ï¼šåœ¨mybatis-config-xmlâ½‚ä»¶ä¸­é…ç½®æ’ä»¶" class="headerlink" title="ç¬¬â¼†æ­¥ï¼šåœ¨mybatis-config.xmlâ½‚ä»¶ä¸­é…ç½®æ’ä»¶"></a>ç¬¬â¼†æ­¥ï¼šåœ¨mybatis-config.xmlâ½‚ä»¶ä¸­é…ç½®æ’ä»¶</h4><p>typeAliasesæ ‡ç­¾ä¸‹â¾¯è¿›â¾é…ç½®ï¼š </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="ç¬¬ä¸‰æ­¥ï¼šç¼–å†™Javaä»£ç "><a href="#ç¬¬ä¸‰æ­¥ï¼šç¼–å†™Javaä»£ç " class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šç¼–å†™Javaä»£ç "></a>ç¬¬ä¸‰æ­¥ï¼šç¼–å†™Javaä»£ç </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Car&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Car&quot;</span>&gt;</span></span><br><span class="line"> select * from t_car</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å…³é”®ç‚¹ï¼š</p>
<ul>
<li>åœ¨æŸ¥è¯¢è¯­å¥ä¹‹å‰å¼€å¯åˆ†â»šåŠŸèƒ½ã€‚</li>
<li>åœ¨æŸ¥è¯¢è¯­å¥ä¹‹åå°è£…PageInfoå¯¹è±¡ã€‚ï¼ˆPageInfoå¯¹è±¡å°†æ¥ä¼šå­˜å‚¨åˆ°requeståŸŸå½“ä¸­ã€‚åœ¨â»šâ¾¯ä¸Šå±•ç¤ºã€‚ï¼‰</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testPageHelper</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line"> <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().b</span><br><span class="line"><span class="title function_">uild</span><span class="params">(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>)</span>);</span><br><span class="line"> <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"> <span class="type">CarMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(CarMapper.class);</span><br><span class="line"> <span class="comment">// å¼€å¯åˆ†â»š</span></span><br><span class="line"> PageHelper.startPage(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line"> <span class="comment">// æ‰§â¾æŸ¥è¯¢è¯­å¥</span></span><br><span class="line"> List&lt;Car&gt; cars = mapper.selectAll();</span><br><span class="line"> <span class="comment">// è·å–åˆ†â»šä¿¡æ¯å¯¹è±¡</span></span><br><span class="line"> PageInfo&lt;Car&gt; pageInfo = <span class="keyword">new</span> <span class="title class_">PageInfo</span>&lt;&gt;(cars, <span class="number">5</span>);</span><br><span class="line"> System.out.println(pageInfo); &#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§â¾ç»“æœï¼š </p>
<p>PageInfo{pageNum=2, pageSize=2, size=2, startRow=3, endRow=4, total=6, pages=3, </p>
<p>list=Page{count=true, pageNum=2, pageSize=2, startRow=2, endRow=4, total=6, pages=3, </p>
<p>reasonable=false, pageSizeZero=false}[Car{id=86, carNum=â€™1234â€™, brand=â€™ä¸°â½¥éœ¸é“â€™, </p>
<p>guidePrice=50.5, produceTime=â€™2020-10-11â€™, carType=â€™ç‡ƒæ²¹â»‹â€™}, Car{id=87, carNum=â€™1234â€™, </p>
<p>brand=â€™ä¸°â½¥éœ¸é“â€™, guidePrice=50.5, produceTime=â€™2020-10-11â€™, carType=â€™ç‡ƒæ²¹â»‹â€™}], prePage=1, </p>
<p>nextPage=3, isFirstPage=false, isLastPage=false, hasPreviousPage=true, hasNextPage=true, </p>
<p>navigatePages=5, navigateFirstPage=1, navigateLastPage=3, navigatepageNums=[1, 2, 3]} </p>
<p>å¯¹æ‰§â¾ç»“æœè¿›â¾æ ¼å¼åŒ–ï¼š</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">PageInfo&#123;</span><br><span class="line"> pageNum=2, pageSize=2, size=2, startRow=3, endRow=4, total=6, pages=3,</span><br><span class="line"> list=Page&#123;count=true, pageNum=2, pageSize=2, startRow=2, endRow=4, total=</span><br><span class="line">6, pages=3, reasonable=false, pageSizeZero=false&#125;</span><br><span class="line"> [Car&#123;id=86, carNum=&#x27;1234&#x27;, brand=&#x27;ä¸°â½¥éœ¸é“&#x27;, guidePrice=50.5, produceTime</span><br><span class="line">=&#x27;2020-10-11&#x27;, carType=&#x27;ç‡ƒæ²¹â»‹&#x27;&#125;,</span><br><span class="line"> Car&#123;id=87, carNum=&#x27;1234&#x27;, brand=&#x27;ä¸°â½¥éœ¸é“&#x27;, guidePrice=50.5, produceTime</span><br><span class="line">=&#x27;2020-10-11&#x27;, carType=&#x27;ç‡ƒæ²¹â»‹&#x27;&#125;],</span><br><span class="line"> prePage=1, nextPage=3, isFirstPage=false, isLastPage=false, hasPreviousPa</span><br><span class="line">ge=true, hasNextPage=true,</span><br><span class="line"> navigatePages=5, navigateFirstPage=1, navigateLastPage=3, navigatepageNum</span><br><span class="line">s=[1, 2, 3]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://manamn.space">Gao</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://manamn.space/2022/10/17/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/MyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">https://manamn.space/2022/10/17/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/MyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://manamn.space" target="_blank">çˆ±ç¬‘çš„Gaoçš„ä¸ªäººåšå®¢</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/">ç™¾é‡ŒåŠJavaåŸ¹è®­</a><a class="post-meta__tags" href="/tags/%E5%BC%80%E5%8F%91%E5%BF%85%E5%A4%87%E6%A1%86%E6%9E%B6/">å¼€å‘å¿…å¤‡æ¡†æ¶</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.leonus.cn/cover/171111-16429290715c39.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/10/17/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E4%BD%A0%E4%BA%86%E8%A7%A3%E5%A4%9A%E5%B0%91/"><img class="prev-cover" src="https://cdn.leonus.cn/cover/171111-16429290715c39.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">ä»£ç†æ¨¡å¼ä½ äº†è§£å¤šå°‘</div></div></a></div><div class="next-post pull-right"><a href="/2022/10/17/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/Thmeleaf/"><img class="next-cover" src="https://cdn.leonus.cn/cover/171111-16429290715c39.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">Thmeleaf</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/2022/10/17/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/Maven%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Mavenå­¦ä¹ ç¬”è®°"><img class="cover" src="https://cdn.leonus.cn/cover/171111-16429290715c39.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-17</div><div class="title">Mavenå­¦ä¹ ç¬”è®°</div></div></a></div><div><a href="/2022/10/17/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/Linux%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Linuxå­¦ä¹ ç¬”è®°"><img class="cover" src="https://cdn.leonus.cn/cover/171111-16429290715c39.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-17</div><div class="title">Linuxå­¦ä¹ ç¬”è®°</div></div></a></div><div><a href="/2022/10/17/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/Thmeleaf/" title="Thmeleaf"><img class="cover" src="https://cdn.leonus.cn/cover/171111-16429290715c39.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-17</div><div class="title">Thmeleaf</div></div></a></div><div><a href="/2022/10/17/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E4%BD%A0%E4%BA%86%E8%A7%A3%E5%A4%9A%E5%B0%91/" title="ä»£ç†æ¨¡å¼ä½ äº†è§£å¤šå°‘"><img class="cover" src="https://cdn.leonus.cn/cover/171111-16429290715c39.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-17</div><div class="title">ä»£ç†æ¨¡å¼ä½ äº†è§£å¤šå°‘</div></div></a></div><div><a href="/2022/10/16/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/Web%E7%BD%91%E9%A1%B5%E6%8A%80%E6%9C%AF/Get%E8%AF%B7%E6%B1%82%E5%92%8CPost%E8%AF%B7%E6%B1%82%E7%9A%84%E5%8C%BA%E5%88%AB/" title="Getè¯·æ±‚å’ŒPostè¯·æ±‚çš„åŒºåˆ«"><img class="cover" src="http://pic.netbian.com/uploads/allimg/221009/225723-166532744398b2.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-16</div><div class="title">Getè¯·æ±‚å’ŒPostè¯·æ±‚çš„åŒºåˆ«</div></div></a></div><div><a href="/2022/10/16/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/Web%E7%BD%91%E9%A1%B5%E6%8A%80%E6%9C%AF/Web%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%8F%8AServlet%E5%85%A5%E9%97%A8/" title="Webç¯å¢ƒæ­å»ºä»¥åŠServletå…¥é—¨"><img class="cover" src="http://pic.netbian.com/uploads/allimg/210827/235918-1630079958392e.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-16</div><div class="title">Webç¯å¢ƒæ­å»ºä»¥åŠServletå…¥é—¨</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://yzf.qq.com/fsna/kf-file/kf_pic/20221016/KFPIC_38088722014365ca6_WXIMAGE_d75c047ed85544ddaded8bf8eafb054c.jpg?" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Gao</div><div class="author-info__description">ç”Ÿæ´»æ˜æœ— ä¸‡ç‰©å¯çˆ±</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">147</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">38</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">26</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/gaoziman"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/gaoziman" target="_blank" title="Github"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gitHub"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=2942894660@qq.com" target="_blank" title="Email"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-youxiang"></use></svg></a><a class="social-icon faa-parent animated-hover" href="/atom.xml" target="_blank" title="RSS"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-rss"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/692044806?spm_id_from=333.1007.0.0" target="_blank" title="BiliBili"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili"></use></svg></a><a class="social-icon faa-parent animated-hover" href="tencent://Message/?Uin=2942894660&amp;amp;websiteName=local.edu.com:8888=&amp;amp;Menu=yes" target="_blank" title="QQ"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-QQ1"></use></svg></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="toc-number">1.</span> <span class="toc-text">MyBatiså­¦ä¹ ç¬”è®°</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A1%86%E6%9E%B6%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">ç¬¬ä¸€ç«  æ¡†æ¶æ¦‚è¿°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E6%A1%86%E6%9E%B6"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 æ¡†æ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E7%BB%93%E6%9E%84"><span class="toc-number">1.1.2.</span> <span class="toc-text">è½¯ä»¶å¼€å‘å¸¸ç”¨ç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">ä¸‰å±‚æ¶æ„</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">å¸¸ç”¨æ¡†æ¶</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%86%E6%9E%B6%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">1.1.3.</span> <span class="toc-text">æ¡†æ¶æ˜¯ä»€ä¹ˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%86%E6%9E%B6%E5%AE%9A%E4%B9%89"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">æ¡†æ¶å®šä¹‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%86%E6%9E%B6%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">æ¡†æ¶è§£å†³çš„é—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JDBC%E7%BC%96%E7%A8%8B"><span class="toc-number">1.1.4.</span> <span class="toc-text">JDBCç¼–ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8JDBC%E7%9A%84%E7%BC%96%E7%A8%8B%E5%9B%9E%E9%A1%BE"><span class="toc-number">1.1.4.1.</span> <span class="toc-text">ä½¿ç”¨JDBCçš„ç¼–ç¨‹å›é¡¾</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8JDBC%E7%9A%84%E7%BC%BA%E9%99%B7"><span class="toc-number">1.1.4.2.</span> <span class="toc-text">ä½¿ç”¨JDBCçš„ç¼ºé™·</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%86%E8%A7%A3MyBatis"><span class="toc-number">1.1.5.</span> <span class="toc-text">äº†è§£MyBatis</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#MyBatis%E6%A1%86%E6%9E%B6%E8%A7%A3%E5%86%B3%E7%9A%84%E4%B8%BB%E8%A6%81%E9%97%AE%E9%A2%98"><span class="toc-number">1.1.5.1.</span> <span class="toc-text">MyBatisæ¡†æ¶è§£å†³çš„ä¸»è¦é—®é¢˜</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MyBatis%E6%A1%86%E6%9E%B6%E7%9A%84%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.5.2.</span> <span class="toc-text">MyBatisæ¡†æ¶çš„æ¦‚è¿°</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-MyBatis%E6%A1%86%E6%9E%B6%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-number">1.2.</span> <span class="toc-text">ç¬¬äºŒç«  MyBatisæ¡†æ¶å¿«é€Ÿå…¥é—¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%86%85%E5%AE%B9%E5%88%97%E8%A1%A8"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 å†…å®¹åˆ—è¡¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. 2 å…¥é—¨æ¡ˆä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1-%E5%BC%80%E5%8F%91%E5%87%86%E5%A4%87"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">2.2.1 å¼€å‘å‡†å¤‡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-MyBatis%E4%B8%8B%E8%BD%BD"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.2 MyBatisä¸‹è½½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-MyBatis%E2%BC%8A%E2%BB%94%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.2.4.</span> <span class="toc-text">2.3 MyBatisâ¼Šâ»”ç¨‹åºå¼€å‘æ­¥éª¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E5%85%B3%E4%BA%8EMyBatis%E6%A0%B8%E2%BC%BC%E9%85%8D%E7%BD%AE%E2%BD%82%E4%BB%B6%E7%9A%84%E5%90%8D%E5%AD%97%E5%92%8C%E8%B7%AF%E5%BE%84%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.2.5.</span> <span class="toc-text">2.4 å…³äºMyBatisæ ¸â¼¼é…ç½®â½‚ä»¶çš„åå­—å’Œè·¯å¾„è¯¦è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-MyBatis%E7%AC%AC%E2%BC%80%E4%B8%AA%E2%BD%90%E8%BE%83%E5%AE%8C%E6%95%B4%E7%9A%84%E4%BB%A3%E7%A0%81%E5%86%99%E6%B3%95"><span class="toc-number">1.2.6.</span> <span class="toc-text">2.5 MyBatisç¬¬â¼€ä¸ªâ½è¾ƒå®Œæ•´çš„ä»£ç å†™æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-%E5%BC%95%E5%85%A5%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="toc-number">1.2.7.</span> <span class="toc-text">2.6 å¼•å…¥å•å…ƒæµ‹è¯•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-%E5%BC%95%E5%85%A5%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6"><span class="toc-number">1.2.8.</span> <span class="toc-text">2.7 å¼•å…¥æ—¥å¿—æ¡†æ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-MyBatis%E5%B7%A5%E5%85%B7%E7%B1%BBSessionUtils%E7%9A%84%E5%B0%81%E8%A3%85"><span class="toc-number">1.2.9.</span> <span class="toc-text">2.8 MyBatiså·¥å…·ç±»SessionUtilsçš„å°è£…</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-%E4%BD%BF%E7%94%A8MyBatis%E5%AE%8C%E6%88%90CRUD"><span class="toc-number">1.3.</span> <span class="toc-text">ç¬¬ä¸‰ç«  ä½¿ç”¨MyBatiså®ŒæˆCRUD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-Inser-Create"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1 Inser(Create)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-delete-Delete"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.2 delete(Delete)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-update-Update"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.3 update(Update)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-select-Retrieve"><span class="toc-number">1.3.4.</span> <span class="toc-text">3.4 select(Retrieve)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E5%85%B3%E4%BA%8ESQL%E4%B8%AD%E7%9A%84namespace"><span class="toc-number">1.3.5.</span> <span class="toc-text">3.5 å…³äºSQLä¸­çš„namespace</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-MyBatis%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.4.</span> <span class="toc-text">ç¬¬å››ç«  MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶è¯¦è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-environment"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1  environment</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-transactionManager"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.2 transactionManager</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-dataSource"><span class="toc-number">1.4.3.</span> <span class="toc-text">4.3 dataSource</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-Properties"><span class="toc-number">1.4.4.</span> <span class="toc-text">4.4 Properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-mapper"><span class="toc-number">1.4.5.</span> <span class="toc-text">4.5 mapper</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0-%E5%9C%A8WEB%E4%B8%AD%E5%BA%94%E2%BD%A4MyBatis%EF%BC%88%E4%BD%BF%E2%BD%A4MVC%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F%EF%BC%89"><span class="toc-number">1.5.</span> <span class="toc-text">ç¬¬äº”ç«  åœ¨WEBä¸­åº”â½¤MyBatisï¼ˆä½¿â½¤MVCæ¶æ„æ¨¡å¼ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">1.5.1.</span> <span class="toc-text">5.1 éœ€æ±‚åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%92%8C%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE"><span class="toc-number">1.5.2.</span> <span class="toc-text">5.2 æ•°æ®åº“è¡¨çš„è®¾è®¡å’Œå‡†å¤‡æ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.5.3.</span> <span class="toc-text">5.3 å®ç°æ­¥éª¤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E2%BC%80%E6%AD%A5%EF%BC%9A%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">1.5.3.1.</span> <span class="toc-text">ç¬¬â¼€æ­¥ï¼šç¯å¢ƒæ­å»º</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E2%BC%86%E6%AD%A5%EF%BC%9A%E5%89%8D%E7%AB%AF%E2%BB%9A%E2%BE%AFindex-html"><span class="toc-number">1.5.3.2.</span> <span class="toc-text">ç¬¬â¼†æ­¥ï¼šå‰ç«¯â»šâ¾¯index.html</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BApojo%E5%8C%85%E3%80%81service%E5%8C%85%E3%80%81dao%E5%8C%85%E3%80%81web%E5%8C%85%E3%80%81utils%E5%8C%85"><span class="toc-number">1.5.3.3.</span> <span class="toc-text">ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºpojoåŒ…ã€serviceåŒ…ã€daoåŒ…ã€webåŒ…ã€utilsåŒ…</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E5%AE%9A%E4%B9%89pojo%E7%B1%BB%EF%BC%9AAccount"><span class="toc-number">1.5.3.4.</span> <span class="toc-text">ç¬¬å››æ­¥ï¼šå®šä¹‰pojoç±»ï¼šAccount</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E6%AD%A5%EF%BC%9A%E7%BC%96%E5%86%99AccountDao%E6%8E%A5%E2%BC%9D%EF%BC%8C%E4%BB%A5%E5%8F%8AAccountDaoImpl%E5%AE%9E%E7%8E%B0%E7%B1%BB"><span class="toc-number">1.5.3.5.</span> <span class="toc-text">ç¬¬äº”æ­¥ï¼šç¼–å†™AccountDaoæ¥â¼ï¼Œä»¥åŠAccountDaoImplå®ç°ç±»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E6%AD%A5%EF%BC%9AAccountDaoImpl%E4%B8%AD%E7%BC%96%E5%86%99%E4%BA%86mybatis%E4%BB%A3%E7%A0%81%EF%BC%8C%E9%9C%80%E8%A6%81%E7%BC%96%E5%86%99SQL%E6%98%A0%E5%B0%84%E2%BD%82%E4%BB%B6%E4%BA%86"><span class="toc-number">1.5.3.6.</span> <span class="toc-text">ç¬¬å…­æ­¥ï¼šAccountDaoImplä¸­ç¼–å†™äº†mybatisä»£ç ï¼Œéœ€è¦ç¼–å†™SQLæ˜ å°„â½‚ä»¶äº†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E6%AD%A5%EF%BC%9A%E7%BC%96%E5%86%99AccountService%E6%8E%A5%E2%BC%9D%E4%BB%A5%E5%8F%8AAccountServiceImpl"><span class="toc-number">1.5.3.7.</span> <span class="toc-text">ç¬¬ä¸ƒæ­¥ï¼šç¼–å†™AccountServiceæ¥â¼ä»¥åŠAccountServiceImpl</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E2%BC%8B%E6%AD%A5%EF%BC%9A%E7%BC%96%E5%86%99AccountController"><span class="toc-number">1.5.3.8.</span> <span class="toc-text">ç¬¬â¼‹æ­¥ï¼šç¼–å†™AccountController</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-MyBatis%E5%AF%B9%E8%B1%A1%E4%BD%9C%E2%BD%A4%E5%9F%9F%E4%BB%A5%E5%8F%8A%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98"><span class="toc-number">1.5.4.</span> <span class="toc-text">5.4 MyBatiså¯¹è±¡ä½œâ½¤åŸŸä»¥åŠäº‹åŠ¡é—®é¢˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98"><span class="toc-number">1.5.5.</span> <span class="toc-text">äº‹åŠ¡é—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0-MyBatis%E5%B0%8F%E6%8A%80%E5%B7%A7"><span class="toc-number">1.6.</span> <span class="toc-text">ç¬¬å…­ç«  MyBatiså°æŠ€å·§</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E5%92%8C"><span class="toc-number">1.6.1.</span> <span class="toc-text">6.1 #{}å’Œ${}</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%E5%BF%85%E9%A1%BB%E4%BD%BF%E2%BD%A4"><span class="toc-number">1.6.2.</span> <span class="toc-text">6.2 ä»€ä¹ˆæƒ…å†µä¸‹å¿…é¡»ä½¿â½¤${}</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E6%8B%BC%E6%8E%A5%E8%A1%A8%E5%90%8D"><span class="toc-number">1.6.3.</span> <span class="toc-text">6.3 æ‹¼æ¥è¡¨å</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4"><span class="toc-number">1.6.4.</span> <span class="toc-text">6.4 æ‰¹é‡åˆ é™¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.6.5.</span> <span class="toc-text">6.5 æ¨¡ç³ŠæŸ¥è¯¢</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E2%BD%A4"><span class="toc-number">1.6.5.1.</span> <span class="toc-text">ä½¿â½¤${}</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">1.6.5.2.</span> <span class="toc-text">ä½¿ç”¨#{}</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-%E6%8F%92%E2%BC%8A%E6%95%B0%E6%8D%AE%E6%97%B6%E8%8E%B7%E5%8F%96%E2%BE%83%E5%8A%A8%E2%BD%A3%E6%88%90%E7%9A%84%E4%B8%BB%E9%94%AE"><span class="toc-number">1.6.6.</span> <span class="toc-text">6.6 æ’â¼Šæ•°æ®æ—¶è·å–â¾ƒåŠ¨â½£æˆçš„ä¸»é”®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E7%AB%A0-MyBatis%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.7.</span> <span class="toc-text">ç¬¬ä¸ƒç«  MyBatisæŸ¥è¯¢è¯­å¥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E8%BF%94%E5%9B%9ECar"><span class="toc-number">1.7.1.</span> <span class="toc-text">7.1 è¿”å›Car</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E8%BF%94%E5%9B%9EList"><span class="toc-number">1.7.2.</span> <span class="toc-text">7.2 è¿”å›List</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-%E8%BF%94%E5%9B%9EMap"><span class="toc-number">1.7.3.</span> <span class="toc-text">7.3 è¿”å›Map</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-%E8%BF%94%E5%9B%9EList"><span class="toc-number">1.7.4.</span> <span class="toc-text">7.4 è¿”å›List</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5-resultMap%E7%BB%93%E6%9E%9C%E6%98%A0%E5%B0%84"><span class="toc-number">1.7.5.</span> <span class="toc-text">7.5  resultMapç»“æœæ˜ å°„</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#resultMap%E7%BB%93%E6%9E%9C%E6%98%A0%E5%B0%84"><span class="toc-number">1.7.5.1.</span> <span class="toc-text">resultMapç»“æœæ˜ å°„</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%98%AF%E5%90%A6%E5%BC%80%E5%90%AF%E9%A9%BC%E5%B3%B0%E5%91%BD%E5%90%8D%E2%BE%83%E5%8A%A8%E6%98%A0%E5%B0%84"><span class="toc-number">1.7.5.2.</span> <span class="toc-text">æ˜¯å¦å¼€å¯é©¼å³°å‘½åâ¾ƒåŠ¨æ˜ å°„</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-6-%E8%BF%94%E5%9B%9E%E6%80%BB%E8%AE%B0%E5%BD%95%E6%9D%A1%E6%95%B0"><span class="toc-number">1.7.6.</span> <span class="toc-text">7.6  è¿”å›æ€»è®°å½•æ¡æ•°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%85%AB%E7%AB%A0-%E5%8A%A8%E6%80%81SQL"><span class="toc-number">1.8.</span> <span class="toc-text">ç¬¬å…«ç«  åŠ¨æ€SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-if%E6%A0%87%E7%AD%BE"><span class="toc-number">1.8.1.</span> <span class="toc-text">8.1 ifæ ‡ç­¾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-where%E6%A0%87%E7%AD%BE"><span class="toc-number">1.8.2.</span> <span class="toc-text">8.2 whereæ ‡ç­¾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-trim%E6%A0%87%E7%AD%BE"><span class="toc-number">1.8.3.</span> <span class="toc-text">8.3 trimæ ‡ç­¾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-set%E6%A0%87%E7%AD%BE"><span class="toc-number">1.8.4.</span> <span class="toc-text">8.4 setæ ‡ç­¾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-choose-when-otherwise"><span class="toc-number">1.8.5.</span> <span class="toc-text">8.5 choose when otherwise</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6-foreach%E6%A0%87%E7%AD%BE"><span class="toc-number">1.8.6.</span> <span class="toc-text">8.6  foreachæ ‡ç­¾</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4"><span class="toc-number">1.8.6.1.</span> <span class="toc-text">æ‰¹é‡åˆ é™¤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0"><span class="toc-number">1.8.6.2.</span> <span class="toc-text">æ‰¹é‡æ·»åŠ </span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-7-sql%E6%A0%87%E7%AD%BE%E4%B8%8Einclude%E6%A0%87%E7%AD%BE"><span class="toc-number">1.8.7.</span> <span class="toc-text">8.7 sqlæ ‡ç­¾ä¸includeæ ‡ç­¾</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B9%9D%E7%AB%A0-MyBatis%E7%9A%84%E2%BE%BC%E7%BA%A7%E6%98%A0%E5%B0%84%E5%8F%8A%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD"><span class="toc-number">1.9.</span> <span class="toc-text">ç¬¬ä¹ç«  MyBatisçš„â¾¼çº§æ˜ å°„åŠå»¶è¿ŸåŠ è½½</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-%E5%A4%9A%E5%AF%B9%E4%B8%80"><span class="toc-number">1.9.1.</span> <span class="toc-text">9.1 å¤šå¯¹ä¸€</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%9A-%E7%BA%A7%E8%81%94%E5%B1%9E%E6%80%A7%E6%98%A0%E5%B0%84"><span class="toc-number">1.9.1.1.</span> <span class="toc-text">ç¬¬ä¸€ç§æ–¹å¼ï¼š çº§è”å±æ€§æ˜ å°„</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E2%BC%86%E7%A7%8D%E2%BD%85%E5%BC%8F%EF%BC%9Aassociation"><span class="toc-number">1.9.1.2.</span> <span class="toc-text">ç¬¬â¼†ç§â½…å¼ï¼šassociation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%A7%8D%E2%BD%85%E5%BC%8F%EF%BC%9A%E5%88%86%E6%AD%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.9.1.3.</span> <span class="toc-text">ç¬¬ä¸‰ç§â½…å¼ï¼šåˆ†æ­¥æŸ¥è¯¢</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-%E5%A4%9A%E5%AF%B9%E2%BC%80%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD"><span class="toc-number">1.9.2.</span> <span class="toc-text">9.2 å¤šå¯¹â¼€å»¶è¿ŸåŠ è½½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-%E2%BC%80%E5%AF%B9%E5%A4%9A"><span class="toc-number">1.9.3.</span> <span class="toc-text">9.3 â¼€å¯¹å¤š</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E2%BC%80%E7%A7%8D%E2%BD%85%E5%BC%8F%EF%BC%9Acollection"><span class="toc-number">1.9.3.1.</span> <span class="toc-text">ç¬¬â¼€ç§â½…å¼ï¼šcollection</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E2%BC%86%E7%A7%8D%E2%BD%85%E5%BC%8F%EF%BC%9A%E5%88%86%E6%AD%A5%E6%9F%A5%E8%AF%A2-%E6%AF%94%E8%BE%83%E5%B8%B8%E7%94%A8"><span class="toc-number">1.9.3.2.</span> <span class="toc-text">ç¬¬â¼†ç§â½…å¼ï¼šåˆ†æ­¥æŸ¥è¯¢(æ¯”è¾ƒå¸¸ç”¨)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-%E2%BC%80%E5%AF%B9%E5%A4%9A%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD"><span class="toc-number">1.9.4.</span> <span class="toc-text">9.4 â¼€å¯¹å¤šå»¶è¿ŸåŠ è½½</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E7%AB%A0-MyBatis%E7%9A%84%E7%BC%93%E5%AD%98"><span class="toc-number">1.10.</span> <span class="toc-text">ç¬¬åç«  MyBatisçš„ç¼“å­˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-%E2%BC%80%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-number">1.10.1.</span> <span class="toc-text">10.1 â¼€çº§ç¼“å­˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-%E2%BC%86%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-number">1.10.2.</span> <span class="toc-text">10.4 â¼†çº§ç¼“å­˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AB%A0-MyBatis%E7%9A%84%E9%80%86%E5%90%91%E2%BC%AF%E7%A8%8B"><span class="toc-number">1.11.</span> <span class="toc-text">ç¬¬åä¸€ç«  MyBatisçš„é€†å‘â¼¯ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-%E9%80%86%E5%90%91%E2%BC%AF%E7%A8%8B%E9%85%8D%E7%BD%AE%E4%B8%8E%E2%BD%A3%E6%88%90"><span class="toc-number">1.11.1.</span> <span class="toc-text">11.1 é€†å‘â¼¯ç¨‹é…ç½®ä¸â½£æˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E2%BC%80%E6%AD%A5%EF%BC%9A%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span class="toc-number">1.11.1.1.</span> <span class="toc-text">ç¬¬â¼€æ­¥ï¼šåŸºç¡€ç¯å¢ƒå‡†å¤‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E2%BC%86%E6%AD%A5%EF%BC%9A%E5%9C%A8pom%E4%B8%AD%E6%B7%BB%E5%8A%A0%E9%80%86%E5%90%91%E2%BC%AF%E7%A8%8B%E6%8F%92%E4%BB%B6"><span class="toc-number">1.11.1.2.</span> <span class="toc-text">ç¬¬â¼†æ­¥ï¼šåœ¨pomä¸­æ·»åŠ é€†å‘â¼¯ç¨‹æ’ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E9%85%8D%E7%BD%AEgeneratorConfig-xml"><span class="toc-number">1.11.1.3.</span> <span class="toc-text">ç¬¬ä¸‰æ­¥ï¼šé…ç½®generatorConfig.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E8%BF%90%E2%BE%8F%E6%8F%92%E4%BB%B6"><span class="toc-number">1.11.1.4.</span> <span class="toc-text">ç¬¬å››æ­¥ï¼šè¿â¾æ’ä»¶</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%8C%E7%AB%A0-MyBatis%E4%BD%BF%E2%BD%A4PageHelper"><span class="toc-number">1.12.</span> <span class="toc-text">ç¬¬åäºŒç«  MyBatisä½¿â½¤PageHelper</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1-limit%E5%88%86%E2%BB%9A"><span class="toc-number">1.12.1.</span> <span class="toc-text">12.1 limitåˆ†â»š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2-PageHelper%E6%8F%92%E4%BB%B6"><span class="toc-number">1.12.2.</span> <span class="toc-text">12.2  PageHelperæ’ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E2%BC%80%E6%AD%A5%EF%BC%9A%E5%BC%95%E2%BC%8A%E4%BE%9D%E8%B5%96"><span class="toc-number">1.12.2.1.</span> <span class="toc-text">ç¬¬â¼€æ­¥ï¼šå¼•â¼Šä¾èµ–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E2%BC%86%E6%AD%A5%EF%BC%9A%E5%9C%A8mybatis-config-xml%E2%BD%82%E4%BB%B6%E4%B8%AD%E9%85%8D%E7%BD%AE%E6%8F%92%E4%BB%B6"><span class="toc-number">1.12.2.2.</span> <span class="toc-text">ç¬¬â¼†æ­¥ï¼šåœ¨mybatis-config.xmlâ½‚ä»¶ä¸­é…ç½®æ’ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E7%BC%96%E5%86%99Java%E4%BB%A3%E7%A0%81"><span class="toc-number">1.12.2.3.</span> <span class="toc-text">ç¬¬ä¸‰æ­¥ï¼šç¼–å†™Javaä»£ç </span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/10/17/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/Thmeleaf/" title="Thmeleaf"><img src="https://cdn.leonus.cn/cover/171111-16429290715c39.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Thmeleaf"/></a><div class="content"><a class="title" href="/2022/10/17/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/Thmeleaf/" title="Thmeleaf">Thmeleaf</a><time datetime="2022-10-17T04:47:07.000Z" title="å‘è¡¨äº 2022-10-17 12:47:07">2022-10-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/17/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/MyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="MyBatiså­¦ä¹ ç¬”è®°"><img src="https://cdn.leonus.cn/cover/171111-16429290715c39.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MyBatiså­¦ä¹ ç¬”è®°"/></a><div class="content"><a class="title" href="/2022/10/17/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/MyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="MyBatiså­¦ä¹ ç¬”è®°">MyBatiså­¦ä¹ ç¬”è®°</a><time datetime="2022-10-17T04:46:33.000Z" title="å‘è¡¨äº 2022-10-17 12:46:33">2022-10-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/17/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E4%BD%A0%E4%BA%86%E8%A7%A3%E5%A4%9A%E5%B0%91/" title="ä»£ç†æ¨¡å¼ä½ äº†è§£å¤šå°‘"><img src="https://cdn.leonus.cn/cover/171111-16429290715c39.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ä»£ç†æ¨¡å¼ä½ äº†è§£å¤šå°‘"/></a><div class="content"><a class="title" href="/2022/10/17/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E4%BD%A0%E4%BA%86%E8%A7%A3%E5%A4%9A%E5%B0%91/" title="ä»£ç†æ¨¡å¼ä½ äº†è§£å¤šå°‘">ä»£ç†æ¨¡å¼ä½ äº†è§£å¤šå°‘</a><time datetime="2022-10-17T04:46:09.000Z" title="å‘è¡¨äº 2022-10-17 12:46:09">2022-10-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/17/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/Maven%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Mavenå­¦ä¹ ç¬”è®°"><img src="https://cdn.leonus.cn/cover/171111-16429290715c39.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mavenå­¦ä¹ ç¬”è®°"/></a><div class="content"><a class="title" href="/2022/10/17/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/Maven%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Mavenå­¦ä¹ ç¬”è®°">Mavenå­¦ä¹ ç¬”è®°</a><time datetime="2022-10-17T04:45:25.000Z" title="å‘è¡¨äº 2022-10-17 12:45:25">2022-10-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/17/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/Linux%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Linuxå­¦ä¹ ç¬”è®°"><img src="https://cdn.leonus.cn/cover/171111-16429290715c39.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linuxå­¦ä¹ ç¬”è®°"/></a><div class="content"><a class="title" href="/2022/10/17/%E7%99%BE%E9%87%8C%E5%8D%8AJava%E5%9F%B9%E8%AE%AD/Linux%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Linuxå­¦ä¹ ç¬”è®°">Linuxå­¦ä¹ ç¬”è®°</a><time datetime="2022-10-17T04:37:06.000Z" title="å‘è¡¨äº 2022-10-17 12:37:06">2022-10-17</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><div class="aplayer no-destroy" data-id="1708664797" data-server="tencent" data-type="playlist"   data-order="list" data-fixed="true" data-preload="auto" data-autoplay="false" data-mutex="true" ></div><script async src="/js/diytitle.js"></script><script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('å·²æŒ‚è½½butterfly_clock_anzhiyu')
    if(parent_div_git) {
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var qweather_key = 'b16a1fa0e63c46a4b8f28abfb06ae3fe';
  var gaud_map_key = 'e2b04289e870b005374ee030148d64fd&s=rsv3';
  var baidu_ak_key = 'undefined';
  var flag = 0;
  var clock_rectangle = '112.982279,28.19409';
  var clock_default_rectangle_enable = 'false';

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_anzhiyu_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_anzhiyu_injector_config();
  }
  </script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><script data-pjax>
    function butterfly_categories_card_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<style>li.categoryBar-list-item{width:32.3%;}.categoryBar-list{max-height: 190px;overflow:auto;}.categoryBar-list::-webkit-scrollbar{width:0!important}@media screen and (max-width: 650px){.categoryBar-list{max-height: 160px;}}</style><div class="recent-post-item" style="height:auto;width:100%;padding:0px;"><div id="categoryBar"><ul class="categoryBar-list"><li class="categoryBar-list-item" style="background:url(https://bu.dusays.com/2022/10/06/633ed59127114.jpg);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/è½¬è½½/&quot;);" href="javascript:void(0);">è½¬è½½</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">å¤§å­¦å­¦ä¹ å²</span></li><li class="categoryBar-list-item" style="background:url(https://image.anzhiy.cn/adminuploads/1/2022/09/15/63233b4f2a401.jpg);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/éšç¬”âŒš/&quot;);" href="javascript:void(0);">éšç¬”âŒš</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">å‰ç«¯æˆé•¿å†ç¨‹</span></li><li class="categoryBar-list-item" style="background:url(https://image.anzhiy.cn/adminuploads/1/2022/09/05/6315e146a135f.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/JVMä¸Šç¯‡/&quot;);" href="javascript:void(0);">JVMä¸Šç¯‡</a><span class="categoryBar-list-count">12</span><span class="categoryBar-list-descr">ç”Ÿæ´»æ¬¢ä¹å¤š</span></li><li class="categoryBar-list-item" style="background:url(https://image.anzhiy.cn/adminuploads/1/2022/09/15/63233ec9893f4.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/JVMä¸‹ç¯‡/&quot;);" href="javascript:void(0);">JVMä¸‹ç¯‡</a><span class="categoryBar-list-count">4</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/https/banner.jpg);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/JavaSE/&quot;);" href="javascript:void(0);">JavaSE</a><span class="categoryBar-list-count">19</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/interview-vue01/banner.jpg);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/JVMä¸­ç¯‡/&quot;);" href="javascript:void(0);">JVMä¸­ç¯‡</a><span class="categoryBar-list-count">4</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/blog-construct/banner.jpg);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/Javaè‡ªå­¦ç¬”è®°/&quot;);" href="javascript:void(0);">Javaè‡ªå­¦ç¬”è®°</a><span class="categoryBar-list-count">8</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://image.anzhiy.cn/adminuploads/1/2022/09/05/6315e1453758c.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/Cè¯­è¨€/&quot;);" href="javascript:void(0);">Cè¯­è¨€</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://image.anzhiy.cn/adminuploads/1/2022/09/05/6315e146a135f.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/MySQL-shk/&quot;);" href="javascript:void(0);">MySQL-shk</a><span class="categoryBar-list-count">11</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/banner/%E9%9B%B7%E7%94%B5%E5%B0%86%E5%86%9B.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/æ•™ç¨‹/&quot;);" href="javascript:void(0);">æ•™ç¨‹</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://image.anzhiy.cn/adminuploads/1/2022/09/15/63233ec9893f4.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/å­¦ä¹ è·¯çº¿/&quot;);" href="javascript:void(0);">å­¦ä¹ è·¯çº¿</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/https/banner.jpg);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/æ–‡æ¡£/&quot;);" href="javascript:void(0);">æ–‡æ¡£</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/interview-vue01/banner.jpg);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/å¼€å‘å¿…å¤‡æ¡†æ¶/&quot;);" href="javascript:void(0);">å¼€å‘å¿…å¤‡æ¡†æ¶</a><span class="categoryBar-list-count">5</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/blog-construct/banner.jpg);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/é‡å­¦JavaåŸºç¡€/&quot;);" href="javascript:void(0);">é‡å­¦JavaåŸºç¡€</a><span class="categoryBar-list-count">16</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://image.anzhiy.cn/adminuploads/1/2022/09/05/6315e1453758c.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/Java/&quot;);" href="javascript:void(0);">Java</a><span class="categoryBar-list-count">7</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://image.anzhiy.cn/adminuploads/1/2022/09/05/6315e146a135f.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/JavaçŸ¥è¯†ç‚¹/&quot;);" href="javascript:void(0);">JavaçŸ¥è¯†ç‚¹</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://image.anzhiy.cn/adminuploads/1/2022/09/15/63233ec9893f4.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/å¤šçº¿ç¨‹/&quot;);" href="javascript:void(0);">å¤šçº¿ç¨‹</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/https/banner.jpg);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/MyBatis/&quot;);" href="javascript:void(0);">MyBatis</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/interview-vue01/banner.jpg);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/Thymeleaf/&quot;);" href="javascript:void(0);">Thymeleaf</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/blog-construct/banner.jpg);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/Java-Basic/&quot;);" href="javascript:void(0);">Java-Basic</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://image.anzhiy.cn/adminuploads/1/2022/09/05/6315e1453758c.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/è®¡ç®—æœºç»„æˆåŸç†/&quot;);" href="javascript:void(0);">è®¡ç®—æœºç»„æˆåŸç†</a><span class="categoryBar-list-count">10</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://image.anzhiy.cn/adminuploads/1/2022/09/05/6315e146a135f.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/è®¾è®¡æ¨¡å¼/&quot;);" href="javascript:void(0);">è®¾è®¡æ¨¡å¼</a><span class="categoryBar-list-count">7</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/banner/%E9%9B%B7%E7%94%B5%E5%B0%86%E5%86%9B.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/è®¡ç®—æœºç½‘ç»œ/&quot;);" href="javascript:void(0);">è®¡ç®—æœºç½‘ç»œ</a><span class="categoryBar-list-count">12</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://image.anzhiy.cn/adminuploads/1/2022/09/05/6315e146a135f.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/HTTP/&quot;);" href="javascript:void(0);">HTTP</a><span class="categoryBar-list-count">3</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://image.anzhiy.cn/adminuploads/1/2022/09/15/63233ec9893f4.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/Webç½‘é¡µæŠ€æœ¯/&quot;);" href="javascript:void(0);">Webç½‘é¡µæŠ€æœ¯</a><span class="categoryBar-list-count">9</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/https/banner.jpg);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/MySQL/&quot;);" href="javascript:void(0);">MySQL</a><span class="categoryBar-list-count">8</span><span class="categoryBar-list-descr"></span></li></ul></div></div>';
      console.log('å·²æŒ‚è½½butterfly_categories_card')
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      }
    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    butterfly_categories_card_injector_config()
    }
  </script><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div><div id="ghbdages" style="overflow:hidden;max-height:60px;height:auto;text-align:center;margin-top:10px"><div class="swiper-wrapper"><div class="swiper-slide"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="åšå®¢æ¡†æ¶ä¸ºHexo_v5.4.0"><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="ä¸»é¢˜ç‰ˆæœ¬Butterfly_v4.2.2"><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a></div><div class="swiper-slide"><a class="github-badge" target="_blank" href="https://www.jsdelivr.com/" style="margin-inline:5px" title="æœ¬ç«™ä½¿ç”¨JsDelivrä¸ºé™æ€èµ„æºæä¾›CDNåŠ é€Ÿ"><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&amp;logo=jsDelivr" alt=""/></a><a class="github-badge" target="_blank" href="https://beian.miit.gov.cn/#/Integrated/index" style="margin-inline:5px" title="æœ¬ç«™å·²åœ¨æ¹˜è¿›è¡Œå¤‡æ¡ˆ"><img src="https://img.shields.io/badge/æ¹˜ICPå¤‡-2022004213å·-e1d492?style=flat&amp;logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAdCAYAAAC9pNwMAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAACNlJREFUSInF1mmMVeUdx/Hv2e+5+519mJWBYQZkGxZZxLKJqBXGoLS1iXWrmihotFXaJiTWWlsbl6q1aetWd5u0VkKjNG4YEJSlOCibDLMwM8x679z9nnPP1jcVJUxf+7z6J8+LT37/Z4VvaQhfFS8+sBXbctCDGrVTKlBUH4mxAbI9Hfj0IJLsp6paJ5/tmn20N/D0wKDRMq9F/c3M2U1/V0vDfWMFh+tv/Ig1zYPMabDImPJ52OaXO87W580KggCiiOsJOJ6I3wcNFaaeNKxrt72f2fLGu4FpJ/sDQABRzD22fH7/Yze069vGc6mrDLNIJCDik10sxz2by3VdPM87xzkP9jwPTZFRVI1YUJKH+oy7n3tbvv/P2wW/UQxRWe6w4ZJRptYLHDoCuz8v5cP92XbI762O+h6UVWHnUFbPpU0fEb2A60mMJ7MUi9b/b7UgKhiZMaIxm8YLplLMDPz8hl/EH+rs8TNlUpFf32uyZJGLPDwCiTGUyTWodTN49eUCdz2YwXb9NNcObp1X98WDoufynzMVCEKGn27ayPTWBi5ad8P5iQUkJEnFLjqM9Z+hrVX0vfDe6K2dPRWsW2bwyp9EUifSJB84gdxrkR0eRgv1o/3I4fbbprJ6scqamzVO9pffec1S5ZWY2Nfz5qEy/FqOC2Y3s3j53HMSi18VRjFPwSwg+1RfVbl115vvJrsfej7UGIsYPPGgQ7JXoO+Xx5B3dHEomyJ9x1qiQozkr95h5937aFnVyouPlgJK+Ss7Fxz64OTSxSX+LHYxT2IsRW5kbGI4oHcR0jqoqTjV9se3I7/f8rS/ClS23GxSXhph6L5d9Akm7qqZhHWBQGUJ+CWGFzcg7e7m6D3/ZuW1Ea5YKdA3EojuONi813TqNi+YPYOKUhXDtCeGL26/hakLLiEcdsaHRkRAoLRc4fJrmhnekyF0apgZowWSwwkaa+rw3f8WA1GZZsPP5JEChX8dhZTN6iU6kAcs5s+dHd183SJ0VVKL57pfw6YdRQw23aeWTns47DPTALWlRTR7kMLew6hGgYqUhWXYFFUdPZ6lUBahLA8hVcOftckfi7No7VRAAQqsX1dybfvG1qwriM9mM5mJ4e4jO5Cc01dPqixbr8tWGBQUL4vjGigEEShi+xUmZ2RiR/sJ1pbS8NkgZrKAGw0TsgQsQyFaF/nfYTGprAlMFysbA1pI3mhkR6snhGsaymYGvPyFEb9IdbUE2AzFFTwpRqCtBY0wmdER+hZW4j63gcJj38V+/ErSUZXsYBfjIZHIRW0c2Z8BskCAqN+CbBJBFnyyKjR+Ez57nBxLqpfMUeSISElMBFz6x2Q6OxzWrYjyxWVzEewioU3LCS5vQY6nMUrLwNaxXvoQ59IloFSx54PPAZtQLExVZZDxsVE8J4dn6v4JYatgbSjk0owPw7RGH2ADMo88Z7L20ip8f7gC7fAo0q4+0rt7kEQDvaghVZbiPHUHcyeXcfLjT3jmpR7AYsnSScya3UR8bARVMck7Y/cB75/X6rDf3Fg2dw2jKZm5dXGm1LuAzO5DCo9v6aT0ibco5kzOvLOP+NGTFJtDpPYeZKijk/Rn3QxsfZV7txwhX7ABiZUXBsGvIvguQApNQQva9RMmTvZ2dpVUls+tX/UD7GN/Y8Ws05w6rQF+9vyzg1vZjbvMRJhXiRSU8DpTFFe0QE8S6SfPkOkZoktrB2oAhZWrwljxOPmchiSMYOWNoxNuruFU5vWeXdsojiUon345113dBBQBmTYlTimgdB8nfPo4WjaNFgN9OMEkJ02dnadVt5ki54Esqy+bzKJltVhSPbI3iN2zCyMTeXNCuG7Omm2Zok7PR2+R7jvD8ouruHhmCrB5jVZeYxLdrTP4sr4Vtd9g4MA4qc4c+6cu5NPamfw4P59t2WrA4YdXKkASf7SFivo6PDdEPmf1fRM++zp1bH/0r4I1dD1ODtOWaW4IsvPjL7nqXhloQiSPwjjgMYkMASyGEBkjhISCQwkwzve/18AbT+pk8pVY4UacQi9y+gyZ0eRAw4qHa89LXEx1LXMSPfhDJYRb59BtlLKg2WPT2l6qYl1svtGkrLYckyA1S+t5+2ATm37WCui0LSynsckDNH5zTxAchbQtkx08hDHYiW6NgC0enHBzEZ102UDH8QORdEckjEzZrNWkRydzyx17uGnDXqbUnGZ6dRPjSY91q2TqwjFuvTxLo5Zn5Qo/pumRSFcTLQtybEhGE0fQrDhhJ0VvH2lTnnHPhGtsmWan469apERjI2MH3qN7+7MEfH6ql29CbV7PvsMG32k6yU2XDhEKyZw66eJaRdrXR7CzCcqUNC3zwgymPJRCH4KRRLINimpL14A5Y4GDeOqbsPRVcfuN7Xj44pav/hFfrNT2kr2rsqf2Ibp5pEA14ZIImUyW3t5REkkTXRGQ/DGGhtLginhqCWknQDE5hKf5UFSF9Lj020Q2ul5V1AR2hr+8vuP8Vlc2zMPRxoSjnx7XBC14sDoydahSGq7KdO/HFyrBchxCVfX4fDKp4T7SCQejYODZLrYgIqgKFsNIgQqEYob8mW6yiUyb7Z64LVK/+B85xznnJ3AWzqTzuIX46mr5wLs+UUTyIriBCjRNxguHMJIFDLEEvXEOVRWnSJ0+jCd4CJoGjoedM1CLcXQziW3nMV2TSMBeOx7vWZvPt1r+cMPzE8KunaUkFn0vNrvtqXj34c1W6gzxlEQ6naIoBahtnkMwoFMwIVzSRNguMt53Aj2s4nkSlgPoGqLkICsRNF0gl8rYWuP8+11/w/OOJDEhHPKLCIpOXmi+M9AgP+maiesLifF2T1Rn5ZNj5Lo/Qc/GcPMmhdoqlEgIGzCK4PiCmJKK68p4KfF3qYGuF0qCRUkJTzleUbvQyWRTuE5xYthxQbBs7EISAbkzUFG3VfXXbK2YFi3X/eryfKKnqVBItNjJxDzH8erddC4SqWwcN5WyTtlyO1RP/Lh3eHD76MB40swmiDVJyDLYRhpc5+ub6tse/wWKbvSQEAw1awAAAABJRU5ErkJggg==" alt=""/></a></div><div class="swiper-slide"><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="æœ¬ç«™é¡¹ç›®ç”±Githubæ‰˜ç®¡"><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" title="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></div></div></div><style>a.github-badge:hover:before {display:none}</style>';
    console.log('å·²æŒ‚è½½butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/js/runtime/runtime.min.js"></script><script defer src="https://cdn.cbd.int/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://cdn.cbd.int/hexo-butterfly-footer-beautify/lib/swiperbdage_init.min.js"></script><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item swiper_container_card" style="height: auto;width: 100%"><div id="random"><div id="random-banner"><canvas id="peoplecanvas"></canvas></div><a id="random-hover" style="width:100%;height:auto;" href="javascript:toRandomPost()" rel="external nofollow noreferrer" one-link-mark="yes"><i class="fa fa-paper-plane" style="margin-left:10px"></i><div style="margin-left:10px">éšä¾¿é€›é€›<i class="fa-solid fa-arrow-right" style="margin-left:10px"></i></div></a></div><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2022/05/16/æ•™ç¨‹/2021æœ€æ–°ç‰ˆjavaå­¦ä¹ è·¯çº¿/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://tx2.a.yximgs.com/udata/music/music_f307a39407e74b1ab48f8409b8b0c3210.jpg" alt="" onerror="this.src=https://cdn.cbd.int/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-05-16</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2022/05/16/æ•™ç¨‹/2021æœ€æ–°ç‰ˆjavaå­¦ä¹ è·¯çº¿/&quot;);" href="javascript:void(0);" alt="">2021æœ€æ–°ç‰ˆjavaå­¦ä¹ è·¯çº¿</a><div class="blog-slider__text">å†æ€ä¹ˆçœ‹æˆ‘ä¹Ÿä¸çŸ¥é“æ€ä¹ˆæè¿°å®ƒçš„å•¦ï¼</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2022/05/16/æ•™ç¨‹/2021æœ€æ–°ç‰ˆjavaå­¦ä¹ è·¯çº¿/&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2022/05/03/éšæœºå›¾api/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://nwjshm.cn/usr/themes/Cuteen/static/img/default-list-bg.jpg" alt="" onerror="this.src=https://cdn.cbd.int/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-05-03</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2022/05/03/éšæœºå›¾api/&quot;);" href="javascript:void(0);" alt="">éšæœºå›¾api</a><div class="blog-slider__text">å†æ€ä¹ˆçœ‹æˆ‘ä¹Ÿä¸çŸ¥é“æ€ä¹ˆæè¿°å®ƒçš„å•¦ï¼</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2022/05/03/éšæœºå›¾api/&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('å·²æŒ‚è½½butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/js/swiper.min.js"></script><script defer data-pjax src="https://cdn.cbd.int/hexo-butterfly-swiper-anzhiyu@1.0.4/lib/swiper_init.js"></script><script data-pjax src="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/gsap/3.9.1/gsap.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper-anzhiyu@1.0.4/lib/people.min.js"></script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '1.5s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('flink-list-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__flipInY');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('flink-list-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__animated');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('article-sort-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__slideInRight');
    arr[i].setAttribute('data-wow-duration', '1.5s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('site-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__flipInY');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('site-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__animated');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/wow_init.js"></script><script async src="/js/ali_font.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/"});</script></body></html>